{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src\\interfaces\\CustomEvent.js","src\\interfaces\\Document.js","src\\interfaces\\Element.js","src\\interfaces\\Event.js","src\\interfaces\\EventTarget.js","src\\interfaces\\HTMLSlotElement.js","src\\interfaces\\HTMLTableElement.js","src\\interfaces\\HTMLTableRowElement.js","src\\interfaces\\HTMLTableSectionElement.js","src\\interfaces\\Node.js","src\\interfaces\\ShadowRoot.js","src\\main.js","src\\mixins\\ChildNode.js","src\\mixins\\DocumentOrShadowRoot.js","src\\mixins\\NonDocumentTypeChildNode.js","src\\mixins\\NonElementParentNode.js","src\\mixins\\ParentNode.js","src\\mixins\\Slotable.js","src\\patch.js","src\\utils.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","b","call","exports","length","1","module","_interopRequireWildcard","__esModule","Object","prototype","hasOwnProperty","default","_classCallCheck","TypeError","defineProperty","_utils","$","_class","this","bubbles","cancelable","composed","detail","document","createEvent","initCustomEvent","shadow","_createClass","enumerable","configurable","writable","key","q","descriptors","Document","getElementsByTagName","value","filterByRoot","getElementsByTagNameNS","getElementsByClassName","name","nodeType","Node","DOCUMENT_NODE","isShadowRoot","makeError","clone","_interopRequireDefault","d","updateSlotableName","Element","setAttribute","assignedSlot","assignSlotables","assignASlot","_ShadowRoot","_ShadowRoot2","mode","namespaceURI","localName","isValidCustomElementName","shadowRoot","ownerDocument","createDocumentFragment","extend","host","childNodes","get","slice","parentNode","innerHTML","set","matches","parentElement","insertAdjacent","createTextNode","parseHTMLFragment","S","getAttribute","V","slot","serializeHTMLFragment","replaceAll","R","DOCUMENT_FRAGMENT_NODE","createElement","replace","hasRelatedTarget","initEvent","stopPropagation","stopImmediatePropagationFlag","currentTarget","path","Window","closedShadowHidden","shadowIncludingRoot","push","target","builtInComposedEvents","indexOf","type","relatedTarget","calculatePath","Event","FocusEvent","MouseEvent","retarget","getTheParent","shadowIncludingInclusiveAncestor","root","defaultView","_slicedToArray","calculateRelatedTarget","calculateTarget","Symbol","iterator","next","done","return","Array","isArray","_typeof","constructor","Da","addEventListener","Ea","removeEventListener","Fa","dispatchEvent","Ga","capture","once","passive","EventListenerCollection","create","addListener","attach","removeListener","empty","detach","hostListeners","shadowListeners","callback","eventPhase","CAPTURING_PHASE","invokeListeners","AT_TARGET","getListeners","BUBBLING_PHASE","listeners","splice","calculatedPath","c","stopImmediatePropagation","updateSlotName","assignSlotablesForATree","flatten","findFlattenedSlotables","assignedNodes","caption","remove","tHead","tFoot","rows","cells","ancestorOf","preceding","reverse","Math","abs","min","hasChildNodes","normalize","TEXT_NODE","data","DOCUMENT_TYPE_NODE","publicId","systemId","ELEMENT_NODE","prefix","attributes","ATTRIBUTE_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","isEqualNode","ownerElement","atttributes","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_DISCONNECTED","preInsert","append","preRemove","firstChild","lastChild","previousSibling","nextSibling","textContent","_patch","_patch2","nativeShadowDom","window","forceShadowDomPolyfill","arguments","convertNodesIntoANode","replaceChild","insertBefore","native","activeElement","Qb","descriptor","Sb","previousElementSibling","nextElementSibling","Tb","Ub","pop","recursed","node","id","Wb","Xb","Yb","Zb","querySelectorAll","children","firstElementChild","lastElementChild","childElementCount","findASlot","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","CustomEvent","_CustomEvent2","_Document2","_Element2","HTMLElement","outerHTML","insertAdjacentText","insertAdjacentElement","insertAdjacentHTML","_Event2","_Event","EventTarget","_EventTarget2","HTMLSlotElement","_HTMLSlotElement2","HTMLTableElement","_HTMLTableElement2","HTMLTableRowElement","_HTMLTableRowElement2","HTMLTableSectionElement","_HTMLTableSectionElement2","_Node2","DocumentType","_ChildNode2","CharacterData","_DocumentOrShadowRoot2","_NonDocumentTypeChildNode2","_NonElementParentNode2","DocumentFragment","_ParentNode2","_Slotable2","Text","_CustomEvent","_Document","_Element","_EventTarget","_HTMLSlotElement","_HTMLTableElement","_HTMLTableRowElement","_HTMLTableSectionElement","_Node","_ChildNode","_DocumentOrShadowRoot","_NonDocumentTypeChildNode","_NonElementParentNode","_ParentNode","_Slotable","HTMLUnknownElement","_toConsumableArray","from","getOwnPropertyNames","getOwnPropertyDescriptor","_shadow","nodeName","test","appendChild","content","qualifiedName","p","descendant","inclusiveDescendant","ancestor","inclusiveAncestor","cloneNode","adopt","hostIncludingInclusiveAncestor","shadowIncludingDescendant","shadowIncludingInclusiveDescendant","shadowIncludingAncestor","toLowerCase","findSlotables","apply","concat","signalASlotChange","removeChild","ensurePreInsertionValidity","insert","Pb","v","w","D","W","C","sa","la","pa","ta","ra","ua","T","U","ib","Fb","Gb","Hb","Ib","Jb","Jc","Ob","Kc","Gc"],"mappings":"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","file":"./dist/shadow-dom.min.js.map","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } // https://dom.spec.whatwg.org/#interface-event\n\nvar _class = function _class(type, init) {\n    _classCallCheck(this, _class);\n\n    var bubbles = false;\n    var cancelable = false;\n    var composed = false;\n    var detail = null;\n    if (init) {\n        bubbles = init.bubbles === true;\n        cancelable = init.cancelable === true;\n        composed = init.composed === true;\n        detail = init.detail || null;\n    }\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, bubbles, cancelable, detail);\n    $.shadow(event).composed = composed;\n    return event;\n};\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-document\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'getElementsByTagName',\n\n\n        // TODO: tests\n        value: function getElementsByTagName(qualifiedName) {\n            var results = $.descriptors.Document.getElementsByTagName.value.call(this, qualifiedName);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByTagNameNS',\n        value: function getElementsByTagNameNS(ns, localName) {\n            var results = $.descriptors.Document.getElementsByTagNameNS.value.call(this, ns, localName);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByClassName',\n        value: function getElementsByClassName(names) {\n            var results = $.descriptors.Document.getElementsByClassName.value.call(this, name);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'importNode',\n        value: function importNode(node, deep) {\n            if (node.nodeType === Node.DOCUMENT_NODE || $.isShadowRoot(node)) {\n                throw $.makeError('NotSupportedError');\n            }\n\n            return $.clone(node, this, deep);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _ShadowRoot = require('../interfaces/ShadowRoot.js');\n\nvar _ShadowRoot2 = _interopRequireDefault(_ShadowRoot);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'attachShadow',\n        value: function attachShadow(init) {\n            // https://dom.spec.whatwg.org/#dom-element-attachshadow\n            if (!init || init.mode !== 'open' && init.mode !== 'closed') {\n                throw $.makeError('TypeError');\n            }\n\n            if (this.namespaceURI !== 'http://www.w3.org/1999/xhtml') {\n                throw $.makeError('NotSupportedError');\n            }\n\n            switch (this.localName) {\n                case \"article\":case \"aside\":case \"blockquote\":case \"body\":\n                case \"div\":case \"footer\":case \"h1\":case \"h2\":case \"h3\":\n                case \"h4\":case \"h5\":case \"h6\":case \"header\":case \"main\":\n                case \"nav\":case \"p\":case \"section\":case \"span\":\n                    break;\n                default:\n                    if ($.isValidCustomElementName(this.localName)) {\n                        break;\n                    }\n                    throw $.makeError('NotSupportedError');\n            }\n\n            if (this.shadowRoot) {\n                throw $.makeError('InvalidStateError');\n            }\n\n            var shadow = this.ownerDocument.createDocumentFragment();\n\n            $.extend(shadow, _ShadowRoot2.default);\n\n            $.shadow(shadow).host = this;\n            $.shadow(shadow).mode = init.mode;\n            $.shadow(shadow).childNodes = [];\n\n            var childNodes = $.descriptors.Node.childNodes.get.call(this);\n\n            $.shadow(this).shadowRoot = shadow;\n            $.shadow(this).childNodes = $.slice(this.childNodes);\n\n            for (var i = 0; i < childNodes.length; i++) {\n                $.shadow(childNodes[i]).parentNode = this;\n            }\n\n            $.descriptors.Element.innerHTML.set.call(this, null);\n\n            return shadow;\n        }\n    }, {\n        key: 'closest',\n\n\n        // TODO: tests\n        value: function closest(selectors) {\n            var element = this;\n\n            do {\n                if (element.matches(selectors)) {\n                    return element;\n                }\n            } while (element = element.parentElement);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByTagName',\n        value: function getElementsByTagName(qualifiedName) {\n            var results = $.descriptors.Element.getElementsByTagName.value.call(this, qualifiedName);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByTagNameNS',\n        value: function getElementsByTagNameNS(ns, localName) {\n            var results = $.descriptors.Element.getElementsByTagNameNS.value.call(this, ns, localName);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByClassName',\n        value: function getElementsByClassName(names) {\n            var results = $.descriptors.Element.getElementsByClassName.value.call(this, name);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'insertAdjacentElement',\n        value: function insertAdjacentElement(where, element) {\n            // https://dom.spec.whatwg.org/#dom-element-insertadjacentelement\n            return $.insertAdjacent(this, where, element);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'insertAdjacentText',\n        value: function insertAdjacentText(where, data) {\n            // https://dom.spec.whatwg.org/#dom-element-insertadjacenttext\n            var text = this.ownerDocument.createTextNode(data);\n            $.insertAdjacent(this, where, text);\n            return;\n        }\n\n        // https://w3c.github.io/DOM-Parsing/#extensions-to-the-element-interface\n\n        // TODO: tests\n\n    }, {\n        key: 'insertAdjacentHTML',\n\n\n        // TODO: tests\n        value: function insertAdjacentHTML(position, text) {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-insertadjacenthtml\n            // We aren't going to go exactly by the books for this one.\n            var fragment = $.parseHTMLFragment(text, this);\n            $.insertAdjacent(this, position, fragment);\n        }\n    }, {\n        key: 'slot',\n\n\n        // TODO: Override setAttribute, setAttributeNS, removeAttribute,\n        // removeAttributeNS, setAttributeNode, setAttributeNodeNS, \n        // and removeAttributeNode to detect slot changes.\n\n        get: function get() {\n            // The slot attribute must reflect the \"slot\" content attribute.\n            return this.getAttribute('slot');\n        }\n\n        // TODO: tests\n        ,\n        set: function set(value) {\n            updateSlotableName(this, 'slot', this.slot, value, null);\n        }\n    }, {\n        key: 'shadowRoot',\n        get: function get() {\n            // https://dom.spec.whatwg.org/#dom-element-shadowroot\n\n            var shadowRoot = $.shadow(this).shadowRoot;\n\n            if (!shadowRoot || shadowRoot.mode === 'closed') {\n                return null;\n            }\n\n            return shadowRoot;\n        }\n    }, {\n        key: 'innerHTML',\n        get: function get() {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-innerhtml\n            return $.serializeHTMLFragment(this);\n        }\n\n        // TODO: tests\n        ,\n        set: function set(value) {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-innerhtml\n            var fragment = $.parseHTMLFragment(value, this);\n            $.replaceAll(fragment, this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'outerHTML',\n        get: function get() {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-outerhtml\n            return $.serializeHTMLFragment({ childNodes: [this] });\n        }\n\n        // TODO: tests\n        ,\n        set: function set(value) {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-outerhtml\n            var parent = this.parentNode;\n            if (parent === null) {\n                return;\n            }\n            if (parent.nodeType === Node.DOCUMENT_NODE) {\n                throw $.makeError('NoModificationAllowedError');\n            }\n            if (parent.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n                parent = this.ownerDocument.createElement('body');\n            }\n            var fragment = $.parseHTMLFragment(value, parent);\n            $.replace(this, fragment, this.parentNode);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;\n\n\nfunction updateSlotableName(element, localName, oldValue, value, namespace) {\n    // https://dom.spec.whatwg.org/#slotable-name\n    if (localName === 'slot' && namespace == null) {\n        if (value === oldValue) {\n            return;\n        }\n        if (value == null && oldValue === '') {\n            return;\n        }\n        if (value === '' && oldValue == null) {\n            return;\n        }\n        if (value == null || value === '') {\n            $.descriptors.Element.setAttribute.value.call(element, 'slot', '');\n        } else {\n            $.descriptors.Element.setAttribute.value.call(element, 'slot', value);\n        }\n        var assignedSlot = $.shadow(element).assignedSlot;\n        if (assignedSlot) {\n            $.assignSlotables(assignedSlot);\n        }\n        $.assignASlot(element);\n    }\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.hasRelatedTarget = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-event\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class(type, init) {\n        _classCallCheck(this, _class);\n\n        var bubbles = false;\n        var cancelable = false;\n        var composed = false;\n        if (init) {\n            bubbles = init.bubbles === true;\n            cancelable = init.cancelable === true;\n            composed = init.composed === true;\n        }\n        var event = document.createEvent('event');\n        event.initEvent(type, bubbles, cancelable);\n        $.shadow(event).composed = composed;\n        return event;\n    }\n\n    _createClass(_class, [{\n        key: 'stopImmediatePropagation',\n        value: function stopImmediatePropagation() {\n            this.stopPropagation();\n            $.shadow(this).stopImmediatePropagationFlag = true;\n        }\n    }, {\n        key: 'composedPath',\n        value: function composedPath() {\n            // https://dom.spec.whatwg.org/#dom-event-composedpath\n\n            // 1. Let composedPath be a new empty list.\n            var composedPath = [];\n\n            // 2. Let currentTarget be context objects currentTarget attribute value.\n            var currentTarget = this.currentTarget;\n\n            // 3. For each tuple in context objects path:\n            var path = $.shadow(this).path || [];\n\n            for (var i = 0; i < path.length; i++) {\n                var item = path[i][0];\n                if (currentTarget instanceof Window) {\n                    if (!(item instanceof Node) || !$.closedShadowHidden(item, $.shadowIncludingRoot(item))) {\n                        composedPath.push(item);\n                    }\n                } else if (currentTarget instanceof Node) {\n                    if (!$.closedShadowHidden(item, currentTarget)) {\n                        composedPath.push(item);\n                    }\n                } else {\n                    composedPath.push(item);\n                }\n            }\n\n            // 4. return composedPath.\n            return composedPath.slice();\n        }\n    }, {\n        key: 'currentTarget',\n        get: function get() {\n            return $.shadow(this).currentTarget;\n        }\n    }, {\n        key: 'target',\n        get: function get() {\n            return $.shadow(this).target;\n        }\n    }, {\n        key: 'composed',\n        get: function get() {\n            // TODO: Compare against the actual prototype instead of just the type strings\n            return $.shadow(this).composed || builtInComposedEvents.indexOf(this.type) !== -1;\n        }\n    }]);\n\n    return _class;\n}();\n\n// FocusEvent:\n// relatedTarget will be the element losing or gaining focus\n// MouseEvent:\n// relatedTarget will be the element being moved into or out of\n\n\nexports.default = _class;\n\nvar hasRelatedTarget = exports.hasRelatedTarget = function () {\n    function hasRelatedTarget() {\n        _classCallCheck(this, hasRelatedTarget);\n    }\n\n    _createClass(hasRelatedTarget, [{\n        key: 'relatedTarget',\n        get: function get() {\n            return $.shadow(this).relatedTarget;\n        }\n    }]);\n\n    return hasRelatedTarget;\n}();\n\n;\n\nvar builtInComposedEvents = [\n// FocusEvent\n'blur', 'focus', 'focusin', 'focusout',\n// MouseEvent\n'click', 'dblclick', 'mousedown', 'mouseenter', 'mouseleave', 'mousemove', 'mouseout', 'mouseover', 'mouseup',\n// WheelEvent\n'wheel',\n// InputEvent\n'beforeinput', 'input',\n// KeyboardEvent\n'keydown', 'keyup',\n// CompositionEvent\n'compositionstart', 'compositionupdate', 'compositionend',\n// Legacy UIEvent\n'DOMActivate',\n// Legacy FocusEvent\n'DOMFocusIn', 'DOMFocusOut',\n// Legacy KeyboardEvent\n'keypress'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-eventtarget\n\nexports.default = function (base) {\n\n    var native = {\n        addEventListener: base.prototype.addEventListener,\n        removeEventListener: base.prototype.removeEventListener,\n        dispatchEvent: base.prototype.dispatchEvent\n    };\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'addEventListener',\n            value: function addEventListener(type, callback, options) {\n                if (typeof callback !== 'function') {\n                    return;\n                }\n\n                var listener = { callback: callback };\n                var capture = false;\n\n                if (typeof options === 'boolean') {\n                    capture = options;\n                } else if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n                    capture = options.capture === true;\n                    listener.once = options.once === true;\n                    // we don't do anything with passive.\n                    listener.passive = options.passive === true;\n                }\n\n                var collection = EventListenerCollection.get(this, type, capture) || EventListenerCollection.create(this, type, capture);\n\n                collection.addListener(this, listener);\n                collection.attach(native.addEventListener);\n            }\n        }, {\n            key: 'removeEventListener',\n            value: function removeEventListener(type, callback, options) {\n                if (typeof callback !== 'function') {\n                    return;\n                }\n\n                var listener = { callback: callback };\n                var capture = false;\n\n                if (typeof options === 'boolean') {\n                    capture = options;\n                } else if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n                    capture = options.capture === true;\n                }\n\n                var collection = EventListenerCollection.get(this, type, capture);\n\n                if (!collection) {\n                    return;\n                }\n\n                collection.removeListener(this, listener);\n\n                if (collection.empty) {\n                    collection.detach(native.removeEventListener);\n                }\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar EventListenerCollection = function () {\n    _createClass(EventListenerCollection, null, [{\n        key: 'get',\n        value: function get(target, type, capture) {\n            var nativeTarget = $.shadow(target).host || target;\n            var collections = $.shadow(nativeTarget).listeners;\n            if (!(collections instanceof Array)) {\n                return null;\n            }\n            for (var i = 0; i < collections.length; i++) {\n                var collection = collections[i];\n                if (collection.target === nativeTarget && collection.type === type && collection.capture === capture) {\n                    return collection;\n                }\n            }\n            return null;\n        }\n    }, {\n        key: 'create',\n        value: function create(target, type, capture) {\n            var nativeTarget = $.shadow(target).host || target;\n            var collections = $.shadow(nativeTarget).listeners;\n            if (!(collections instanceof Array)) {\n                collections = [];\n                $.shadow(nativeTarget).listeners = collections;\n            }\n            var collection = new EventListenerCollection(nativeTarget, type, capture);\n            collections.push(collection);\n            return collection;\n        }\n    }]);\n\n    function EventListenerCollection(target, type, capture) {\n        var _this = this;\n\n        _classCallCheck(this, EventListenerCollection);\n\n        this.target = $.shadow(target).host || target;\n        this.type = type;\n        this.capture = capture;\n\n        this.hostListeners = [];\n        this.shadowListeners = [];\n\n        this.callback = function (event) {\n            var shadowRoot = $.shadow(_this.target).shadowRoot;\n            switch (event.eventPhase) {\n                case Event.prototype.CAPTURING_PHASE:\n                    _this.invokeListeners(event, _this.target, _this.hostListeners);\n                    if (shadowRoot) {\n                        _this.invokeListeners(event, shadowRoot, _this.shadowListeners);\n                    }\n                    break;\n                case Event.prototype.AT_TARGET:\n                    var nativeTarget = $.descriptors.Event.target.get.call(event);\n                    _this.invokeListeners(event, nativeTarget, _this.getListeners(nativeTarget));\n                    break;\n                case Event.prototype.BUBBLING_PHASE:\n                    if (shadowRoot) {\n                        _this.invokeListeners(event, shadowRoot, _this.shadowListeners);\n                    }\n                    _this.invokeListeners(event, _this.target, _this.hostListeners);\n                    break;\n            }\n        };\n    }\n\n    _createClass(EventListenerCollection, [{\n        key: 'getListeners',\n        value: function getListeners(target) {\n            return $.shadow(target).host ? this.shadowListeners : this.hostListeners;\n        }\n    }, {\n        key: 'addListener',\n        value: function addListener(target, listener) {\n            var listeners = this.getListeners(target);\n\n            for (var i = 0; i < listeners.length; i++) {\n                if (listener.callback === listeners[i].callback) {\n                    return;\n                }\n            }\n\n            listeners.push(listener);\n        }\n    }, {\n        key: 'removeListener',\n        value: function removeListener(target, listener) {\n            var listeners = this.getListeners(target);\n\n            for (var i = 0; i < listeners.length; i++) {\n                var other = listeners[i];\n                if (listener.callback === other.callback) {\n                    listeners.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    }, {\n        key: 'invokeListeners',\n        value: function invokeListeners(event, currentTarget, listeners) {\n            var path = $.shadow(event).calculatedPath;\n\n            if (!path) {\n                path = $.shadow(event).calculatedPath = calculatePath(event);\n            }\n\n            var target = calculateTarget(currentTarget, path);\n\n            // if there is no target, the event is not composed and should be stopped\n            if (!target) {\n                event.stopImmediatePropagation();\n            } else {\n                var relatedTarget = calculateRelatedTarget(currentTarget, path);\n                var remove = [];\n\n                $.shadow(event).path = path;\n                $.shadow(event).currentTarget = currentTarget;\n                $.shadow(event).target = target;\n                $.shadow(event).relatedTarget = relatedTarget;\n\n                for (var i = 0; i < listeners.length; i++) {\n                    var listener = listeners[i];\n                    var result = listener.callback.call(currentTarget, event);\n                    if (listener.once) {\n                        remove.push(listener);\n                    }\n                    if ($.shadow(event).stopImmediatePropagationFlag) {\n                        break;\n                    }\n                }\n\n                $.shadow(event).path = null;\n                $.shadow(event).currentTarget = null;\n\n                for (var _i = 0; _i < remove.length; _i++) {\n                    var index = listeners.indexOf(remove[_i]);\n                    listeners.splice(index, 1);\n                }\n            }\n        }\n    }, {\n        key: 'attach',\n        value: function attach(descriptor) {\n            descriptor.call(this.target, this.type, this.callback, this.capture);\n        }\n    }, {\n        key: 'detach',\n        value: function detach(descriptor) {\n            descriptor.call(this.target, this.type, this.callback, this.capture);\n        }\n    }, {\n        key: 'empty',\n        get: function get() {\n            return this.hostListeners.length === 0 && this.shadowListeners.length === 0;\n        }\n    }]);\n\n    return EventListenerCollection;\n}();\n\nfunction calculatePath(event) {\n    // https://dom.spec.whatwg.org/#concept-event-dispatch\n\n    var path = [];\n\n    var target = $.descriptors.Event.target.get.call(event);\n\n    var relatedTargetDescriptor = null;\n\n    if (event instanceof FocusEvent) {\n        relatedTargetDescriptor = $.descriptors.FocusEvent.relatedTarget;\n    } else if (event instanceof MouseEvent) {\n        relatedTargetDescriptor = $.descriptors.MouseEvent.relatedTarget;\n    }\n\n    // Skip (native)\n    // 1. Set events dispatch flag.\n\n    // 2. Let targetOverride be target, if legacy target override flag is \n    // not given, and targets associated Document otherwise. \n    var targetOverride = target;\n\n    // 3. Let relatedTarget be the result of retargeting events relatedTarget \n    // against target if events relatedTarget is non-null, and null otherwise.\n    var originalRelatedTarget = null;\n    var relatedTarget = null;\n    if (relatedTargetDescriptor) {\n        originalRelatedTarget = relatedTargetDescriptor.get.call(event);\n        if (originalRelatedTarget) {\n            relatedTarget = $.retarget(originalRelatedTarget, target);\n        }\n    }\n\n    // Skip (native)\n    // 4. If target is relatedTarget and target is not events relatedTarget, then return true.\n\n    // 5. Append (target, targetOverride, relatedTarget) to events path.\n    path.push([target, targetOverride, relatedTarget]);\n\n    // Skip (native)\n    // 6. Let isActivationEvent be true, if event is a MouseEvent object and \n    // events type attribute is \"click\", and false otherwise.\n    // 7. Let activationTarget be target, if isActivationEvent is true and \n    //target has activation behavior, and null otherwise.\n\n    // 8. Let parent be the result of invoking targets get the parent with event.\n    var parent = getTheParent(target, event);\n\n    // 9. While parent is non-null:\n    while (parent != null) {\n        // 1. Let relatedTarget be the result of retargeting events relatedTarget\n        // against parent if events relatedTarget is non-null, and null otherwise.\n        if (originalRelatedTarget) {\n            relatedTarget = $.retarget(originalRelatedTarget, parent);\n        }\n        // 2. If targets root is a shadow-including inclusive ancestor of parent, then... \n        // append (parent, null, relatedTarget) to events path.\n        if ($.shadowIncludingInclusiveAncestor($.root(target), parent)) {\n            path.push([parent, null, relatedTarget]);\n        }\n        // 3. Otherwise, if parent and relatedTarget are identical, then set parent to null.\n        else if (parent === relatedTarget) {\n                parent = null;\n            }\n            // 4. Otherwise, set target to parent and then... \n            // append (parent, target, relatedTarget) to events path.\n            else {\n                    target = parent;\n                    path.push([parent, target, relatedTarget]);\n                }\n        // 5. If parent is non-null, then set parent to the result of \n        // invoking parents get the parent with event.\n        if (parent != null) {\n            parent = getTheParent(parent, event);\n        }\n    }\n\n    return path;\n}\n\nfunction getTheParent(node, event) {\n    // https://dom.spec.whatwg.org/#get-the-parent\n    // Each EventTarget object also has an associated get the parent \n    // algorithm, which takes an event event, and returns an EventTarget \n    // object. Unless specified otherwise it returns null.\n\n    // A nodes get the parent algorithm, given an event, \n    // returns the nodes assigned slot, if node is assigned, \n    // and nodes parent otherwise.\n\n    // A documents get the parent algorithm, given an event, returns null if events \n    // type attribute value is \"load\" or document does not have a browsing context, \n    // and the documents associated Window object otherwise.\n\n    // A shadow roots get the parent algorithm, given an event, returns null if \n    // events composed flag is unset and shadow root is the root of events \n    // paths first tuples item, and shadow roots host otherwise.\n\n    if (node instanceof Node) {\n        if (node.nodeType === Node.DOCUMENT_NODE) {\n            if (event.type === 'load') {\n                // or browsing context?\n                return null;\n            }\n            return node.defaultView;\n        } else if ($.isShadowRoot(node)) {\n            if (!event.composed) {\n                var _$$shadow$path$ = _slicedToArray($.shadow(event).path[0], 1),\n                    item = _$$shadow$path$[0];\n\n                if ($.root(item) === node) {\n                    return null;\n                }\n            }\n            return node.host;\n        }\n        return node.assignedSlot || node.parentNode;\n    }\n\n    return null;\n}\n\nfunction calculateRelatedTarget(currentTarget, path) {\n    for (var i = 0; i < path.length; i++) {\n        var _path$i = _slicedToArray(path[i], 3),\n            item = _path$i[0],\n            relatedTarget = _path$i[2];\n\n        if (item === currentTarget) {\n            return relatedTarget;\n        }\n    }\n    return null;\n}\n\nfunction calculateTarget(currentTarget, path) {\n    for (var i = 0; i < path.length; i++) {\n        var _path$i2 = _slicedToArray(path[i], 1),\n            item = _path$i2[0];\n\n        if (item === currentTarget) {\n            for (var j = i; j >= 0; j--) {\n                var _path$j = _slicedToArray(path[j], 2),\n                    target = _path$j[1];\n\n                if (target != null) {\n                    return target;\n                }\n            }\n            return null;\n        }\n    }\n    return null;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://html.spec.whatwg.org/multipage/scripting.html#the-slot-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'assignedNodes',\n\n\n        // TODO: tests\n        value: function assignedNodes(options) {\n            if (this.localName !== 'slot') {\n                return;\n            }\n\n            // https://html.spec.whatwg.org/multipage/scripting.html#dom-slot-assignednodes\n            // The assignedNodes(options) method, when invoked, must run these steps:\n\n            // 1. If the value of options's flatten member is false, then return this element's assigned nodes.\n            if (!options || options.flatten !== true) {\n                return $.shadow(this).assignedNodes || [];\n            }\n\n            // 2. Return the result of finding flattened slotables with this element.\n            return $.findFlattenedSlotables(this);\n        }\n    }, {\n        key: 'name',\n\n\n        // TODO: tests\n        get: function get() {\n            if (this.localName !== 'slot') {\n                return;\n            }\n\n            return this.getAttribute('name');\n        }\n\n        // TODO: impl, tests\n        ,\n        set: function set(value) {\n            if (this.localName !== 'slot') {\n                return;\n            }\n\n            updateSlotName(this, 'name', this.name, value, null);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;\n\n\nfunction updateSlotName(element, localName, oldValue, value, namespace) {\n    // https://dom.spec.whatwg.org/#slotable-name\n    if (localName === 'name' && namespace == null) {\n        if (value === oldValue) {\n            return;\n        }\n        if (value == null && oldValue === '') {\n            return;\n        }\n        if (value === '' && oldValue == null) {\n            return;\n        }\n        if (value == null || value === '') {\n            $.descriptors.Element.setAttribute.value.call(element, 'name', '');\n        } else {\n            $.descriptors.Element.setAttribute.value.call(element, 'name', value);\n        }\n        $.assignSlotablesForATree(element);\n    }\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://www.w3.org/TR/html5/single-page.html#the-table-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'deleteCaption',\n\n\n        // TODO: tests\n        value: function deleteCaption() {\n            var caption = this.caption;\n            if (caption) {\n                $.remove(caption, this);\n            }\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'deleteTHead',\n        value: function deleteTHead() {\n            var tHead = this.tHead;\n            if (tHead) {\n                $.remove(tHead, this);\n            }\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'deleteTFoot',\n        value: function deleteTFoot() {\n            var tFoot = this.tFoot;\n            if (tFoot) {\n                $.remove(tFoot, this);\n            }\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'deleteRow',\n        value: function deleteRow(index) {\n            // https://www.w3.org/TR/html5/single-page.html#dom-table-deleterow\n            if (index === -1) {\n                index = this.rows.length - 1;\n            }\n            if (index < 0 || index >= this.rows.length) {\n                throw $.makeError('IndexSizeError');\n            }\n            this.rows[index].remove();\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://www.w3.org/TR/html5/single-page.html#the-tr-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'deleteCell',\n\n\n        // TODO: tests\n        value: function deleteCell(index) {\n            // https://www.w3.org/TR/html5/single-page.html#dom-tr-deletecell\n            if (index === -1) {\n                index = this.cells.length - 1;\n            }\n            if (index < 0 || index >= this.cells.length) {\n                throw $.makeError('IndexSizeError');\n            }\n            this.cells[index].remove();\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://www.w3.org/TR/html5/single-page.html#the-tbody-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'deleteRow',\n\n\n        // TODO: tests\n        value: function deleteRow(index) {\n            // https://www.w3.org/TR/html5/single-page.html#dom-tbody-deleterow\n            if (index < 0 || index >= this.rows.length) {\n                throw $.makeError('IndexSizeError');\n            }\n            this.rows[index].remove();\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-node\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'getRootNode',\n        value: function getRootNode(options) {\n            var composed = options && options.composed === true;\n            return composed ? $.shadowIncludingRoot(this) : $.root(this);\n        }\n    }, {\n        key: 'hasChildNodes',\n\n\n        // TODO: tests\n        value: function hasChildNodes() {\n            var childNodes = $.shadow(this).childNodes;\n            if (childNodes) {\n                return childNodes.length > 0;\n            }\n\n            return $.descriptors.Node.hasChildNodes.value.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'normalize',\n\n\n        // TODO: tests\n        value: function normalize() {\n            // https://dom.spec.whatwg.org/#dom-node-normalize\n            // The normalize() method, when invoked, must run these steps \n            // for each descendant exclusive Text node node of context object:\n            var childNodes = this.childNodes;\n            for (var i = 0; i < childNodes.length; i++) {\n                var childNode = childNodes[i];\n                if (childNode.hasChildNodes()) {\n                    childNode.normalize();\n                } else if (childNode.nodeType === Node.TEXT_NODE) {\n                    var length = childNode.data.length;\n                    if (length === 0) {\n                        $.remove(childNode, this);\n                        continue;\n                    }\n                    var j = void 0;\n                    for (j = i + 1; j < childNodes.length; j++) {\n                        var nextSibling = childNodes[j];\n                        if (nextSibling.nodeType !== Node.TEXT_NODE) {\n                            break;\n                        }\n                        childNode.data += nextSibling.data;\n                        i++;\n                        continue;\n                    }\n                }\n            }\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'cloneNode',\n        value: function cloneNode(deep) {\n            // https://dom.spec.whatwg.org/#dom-node-clonenode\n            // The cloneNode(deep) method, when invoked, must run these steps:\n\n            // 1. If context object is a shadow root, then throw a NotSupportedError.\n            if ($.isShadowRoot(this)) {\n                throw $.makeError('NotSupportedError');\n            }\n\n            // 2. Return a clone of the context object, with the clone children flag set if deep is true.\n            return $.clone(this, undefined, deep);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'isEqualNode',\n        value: function isEqualNode(other) {\n            // https://dom.spec.whatwg.org/#dom-node-isequalnode\n            // https://dom.spec.whatwg.org/#concept-node-equals\n            if (!other) {\n                return false;\n            }\n\n            if (this.nodeType !== other.nodeType) {\n                return false;\n            }\n\n            switch (this.nodeType) {\n                case Node.DOCUMENT_TYPE_NODE:\n                    if (this.name !== other.name || this.publicId !== other.publicId || this.systemId !== other.systemId) {\n                        return false;\n                    }\n                case Node.ELEMENT_NODE:\n                    if (this.namespaceURI !== other.namespaceURI || this.prefix !== other.prefix || this.localName !== other.localName || this.attributes.length !== other.attributes.length) {\n                        return false;\n                    }\n                case Node.ATTRIBUTE_NODE:\n                    if (this.namespaceURI !== other.namespaceURI || this.localName !== other.localName || this.value !== other.value) {\n                        return false;\n                    }\n                case Node.PROCESSING_INSTRUCTION_NODE:\n                    if (this.target !== other.target || this.data !== other.data) {\n                        return false;\n                    }\n                case Node.TEXT_NODE:\n                case Node.COMMENT_NODE:\n                    if (this.data !== other.data) {\n                        return false;\n                    }\n            }\n\n            if (this.nodeType == Node.ELEMENT_NODE) {\n                for (var i = 0; i < this.attributes.length; i++) {\n                    var attr1 = this.attributes[i];\n                    var attr2 = other.attributes[attr1.name];\n                    if (attr1.value !== attr2.value) {\n                        return false;\n                    }\n                }\n            }\n\n            var childNodes1 = this.childNodes;\n            var childNodes2 = other.childNodes;\n            if (childNodes1.length !== other.childNodes.length) {\n                return false;\n            }\n\n            for (var _i = 0; _i < childNodes1.length; _i++) {\n                if (!childNodes1[_i].isEqualNode(childNodes2[_i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'compareDocumentPosition',\n        value: function compareDocumentPosition(other) {\n            // https://dom.spec.whatwg.org/#dom-node-comparedocumentposition\n\n            if (this === other) {\n                return 0;\n            }\n\n            var node1 = other;\n            var node2 = this;\n            var attr1 = null;\n            var attr2 = null;\n\n            if (node1.nodeType == Document.prototype.ATTRIBUTE_NODE) {\n                attr1 = node1;\n                node1 = attr1.ownerElement;\n            }\n\n            if (node2.nodeType == Document.prototype.ATTRIBUTE_NODE) {\n                attr2 = node2;\n                node2 = attr2.ownerElement;\n\n                if (attr1 && node1 && node2 === node1) {\n                    var attrs = node2.atttributes;\n                    for (var i = 0; i < attrs.length; i++) {\n                        var attr = attrs[i];\n                        if (attr.isEqualNode(attr1)) {\n                            return Document.prototype.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + Document.prototype.DOCUMENT_POSITION_PRECEDING;\n                        } else if (attr.isEqualNode(attr2)) {\n                            return Document.prototype.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + Document.prototype.DOCUMENT_POSITION_FOLLOWING;\n                        }\n                    }\n                }\n            }\n\n            if (!node1 || !node2 || $.root(node1) !== $.root(node2)) {\n                return Document.prototype.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + Document.prototype.DOCUMENT_POSITION_FOLLOWING + Document.prototype.DOCUMENT_POSITION_DISCONNECTED;\n            }\n\n            if (ancestorOf(node2, node1) || node1 === node2 && attr2) {\n                return Document.prototype.DOCUMENT_POSITION_CONTAINS + Document.prototype.DOCUMENT_POSITION_PRECEDING;\n            }\n\n            if (ancestorOf(node1, node2) || node1 === node2 && attr1) {\n                return Document.prototype.DOCUMENT_POSITION_CONTAINS + Document.prototype.DOCUMENT_POSITION_FOLLOWING;\n            }\n\n            if (preceding(node1, node2)) {\n                return Document.prototype.DOCUMENT_POSITION_PRECEDING;\n            }\n\n            return Document.prototype.DOCUMENT_POSITION_FOLLOWING;\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'contains',\n        value: function contains(node) {\n            // https://dom.spec.whatwg.org/#dom-node-contains\n\n            var parent = node.parentNode;\n\n            if (!parent) {\n                return false;\n            }\n\n            do {\n                if (parent === this) {\n                    return true;\n                }\n            } while (parent = parent.parentNode);\n\n            return false;\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'insertBefore',\n        value: function insertBefore(node, child) {\n            // https://dom.spec.whatwg.org/#dom-node-insertbefore\n            // The insertBefore(node, child) method, when invoked, must return the result \n            // of pre-inserting node into context object before child.\n            return $.preInsert(node, this, child);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'appendChild',\n        value: function appendChild(node) {\n            // https://dom.spec.whatwg.org/#dom-node-appendchild\n            // The appendChild(node) method, when invoked, must return the result of \n            // appending node to context object.\n            return $.append(node, this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'replaceChild',\n        value: function replaceChild(node, child) {\n            // https://dom.spec.whatwg.org/#dom-node-replacechild\n            // The replaceChild(node, child) method, when invoked, must return the \n            // result of replacing child with node within context object.\n            return $.replace(child, node, this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'removeChild',\n        value: function removeChild(child) {\n            // https://dom.spec.whatwg.org/#dom-node-removechild\n            // The removeChild(child) method, when invoked, must return the result of \n            // pre-removing child from context object.\n            return $.preRemove(child, this);\n        }\n    }, {\n        key: 'parentNode',\n        get: function get() {\n            var parentNode = $.shadow(this).parentNode;\n            if (parentNode) {\n                return parentNode;\n            }\n\n            return $.descriptors.Node.parentNode.get.call(this);\n        }\n    }, {\n        key: 'parentElement',\n        get: function get() {\n            var parentNode = this.parentNode;\n            if (parentNode && parentNode.nodeType === Node.ELEMENT_NODE) {\n                return parentNode;\n            }\n\n            return null;\n        }\n    }, {\n        key: 'childNodes',\n        get: function get() {\n            var childNodes = $.shadow(this).childNodes;\n            if (childNodes) {\n                return childNodes.slice();\n            }\n\n            return $.descriptors.Node.childNodes.get.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'firstChild',\n        get: function get() {\n            var childNodes = $.shadow(this).childNodes;\n            if (childNodes) {\n                if (childNodes.length) {\n                    return childNodes[0];\n                }\n                return null;\n            }\n\n            return $.descriptors.Node.firstChild.get.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'lastChild',\n        get: function get() {\n            var childNodes = $.shadow(this).childNodes;\n            if (childNodes) {\n                if (childNodes.length) {\n                    return childNodes[childNodes.length - 1];\n                }\n                return null;\n            }\n\n            return $.descriptors.Node.lastChild.get.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'previousSibling',\n        get: function get() {\n            var parentNode = $.shadow(this).parentNode;\n            if (parentNode) {\n                var childNodes = $.shadow(parentNode).childNodes;\n                var siblingIndex = childNodes.indexOf(this) - 1;\n                return siblingIndex < 0 ? null : childNodes[siblingIndex];\n            }\n\n            return $.descriptors.Node.previousSibling.get.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'nextSibling',\n        get: function get() {\n            var parentNode = $.shadow(this).parentNode;\n            if (parentNode) {\n                var childNodes = $.shadow(parentNode).childNodes;\n                var siblingIndex = childNodes.indexOf(this) + 1;\n                return siblingIndex === childNodes.length ? null : childNodes[siblingIndex];\n            }\n\n            return $.descriptors.Node.nextSibling.get.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'textContent',\n        get: function get() {\n            switch (this.nodeType) {\n                case Node.DOCUMENT_FRAGMENT_NODE:\n                case Node.ELEMENT_NODE:\n                    var result = '';\n                    var childNodes = this.childNodes;\n                    for (var i = 0; i < childNodes.length; i++) {\n                        result += childNodes[i].textContent;\n                    }\n                    return result;\n                case Node.ATTRIBUTE_NODE:\n                    return this.value;\n                case Node.TEXT_NODE:\n                case Node.PROCESSING_INSTRUCTION_NODE:\n                case Node.COMMENT_NODE:\n                    return this.data;\n                default:\n                    return null;\n            }\n        }\n\n        // TODO: tests\n        ,\n        set: function set(value) {\n            switch (this.nodeType) {\n                case Node.DOCUMENT_FRAGMENT_NODE:\n                case Node.ELEMENT_NODE:\n                    var node = null;\n                    if (value !== '') {\n                        node = this.ownerDocument.createTextNode(value);\n                    }\n                    $.replaceAll(node, this);\n                    return;\n            }\n\n            return $.descriptors.Node.textContent.set.call(this, value);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;\n\n\nfunction ancestorOf(node, ancestor) {\n    var parent = node.parentNode;\n\n    do {\n        if (parent === ancestor) {\n            return true;\n        }\n    } while (parent = parent.parentNode);\n\n    return false;\n}\n\nfunction preceding(element1, element2) {\n    function precedingSiblings(parent, sibling1, sibling2) {\n        var siblings = parent.childNodes;\n        for (var _i2 = 0; _i2 < siblings.length; _i2++) {\n            var sibling = siblings[_i2];\n            if (sibling === sibling1) {\n                return true;\n            } else if (sibling === sibling2) {\n                return false;\n            }\n        }\n    }\n\n    // Check if they're already siblings.\n    var ancestor1 = element1.parentNode;\n    var ancestor2 = element2.parentNode;\n\n    if (ancestor1 === ancestor2) {\n        return precedingSiblings(element1, element2);\n    }\n\n    // Find the closest common ancestor.\n    var ancestors1 = [ancestor1];\n    var ancestors2 = [ancestor2];\n\n    while (ancestor1 = ancestor1.parentNode) {\n        ancestors1.push(ancestor1);\n    }\n\n    while (ancestor2 = ancestor2.parentNode) {\n        ancestors2.push(ancestor2);\n    }\n\n    ancestors1.reverse();\n    ancestors2.reverse();\n\n    var diff = Math.abs(ancestors1.length - ancestors2.length);\n    var min = Math.min(ancestors1.length, ancestors2.length);\n\n    var i = 0;\n    while (ancestors1[i] === ancestors2[i]) {\n        i++;\n    }\n\n    return precedingSiblings(ancestors1[i - 1], ancestors1[i], ancestors2[i]);\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-shadowroot\n// https://www.w3.org/TR/shadow-dom/#the-shadowroot-interface\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'nodeName',\n        get: function get() {\n            return '#shadow-root';\n        }\n    }, {\n        key: 'mode',\n        get: function get() {\n            return $.shadow(this).mode;\n        }\n    }, {\n        key: 'host',\n        get: function get() {\n            return $.shadow(this).host;\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'innerHTML',\n        get: function get() {\n            return $.serializeHTMLFragment(this);\n        }\n\n        // TODO: tests\n        ,\n        set: function set(value) {\n            var fragment = $.parseHTMLFragment(value, this);\n            $.replaceAll(fragment, this);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nvar _patch = require('./patch.js');\n\nvar _patch2 = _interopRequireDefault(_patch);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar nativeShadowDom = 'attachShadow' in Element.prototype;\n\nif (!nativeShadowDom || window.forceShadowDomPolyfill) {\n    (0, _patch2.default)();\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n            value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-childnode\n\nexports.default = function (base) {\n\n            return function () {\n                        function _class() {\n                                    _classCallCheck(this, _class);\n                        }\n\n                        _createClass(_class, [{\n                                    key: 'before',\n\n\n                                    // TODO: tests\n                                    value: function before() {\n                                                // https://dom.spec.whatwg.org/#dom-childnode-before\n                                                // The before(nodes) method, when invoked, must run these steps:\n\n                                                // 1. Let parent be context objects parent.\n                                                var parent = this.parentNode;\n\n                                                // 2. If parent is null, terminate these steps.\n                                                if (!parent) {\n                                                            return;\n                                                }\n\n                                                // 3. Let viablePreviousSibling be context objects first preceding \n                                                // sibling not in nodes, and null otherwise.\n                                                var viablePreviousSibling = this.previousSibling;\n\n                                                for (var _len = arguments.length, nodes = Array(_len), _key = 0; _key < _len; _key++) {\n                                                            nodes[_key] = arguments[_key];\n                                                }\n\n                                                while (viablePreviousSibling && nodes.indexOf(viablePreviousSibling) !== -1) {\n                                                            viablePreviousSibling = viablePreviousSibling.previousSibling;\n                                                }\n\n                                                // 4. Let node be the result of converting nodes into a node, given \n                                                // nodes and context objects node document. Rethrow any exceptions.\n                                                var node = $.convertNodesIntoANode(nodes, this.ownerDocument);\n\n                                                // 5. If viablePreviousSibling is null, set it to parents first child, \n                                                // and to viablePreviousSiblings next sibling otherwise.\n                                                if (viablePreviousSibling === null) {\n                                                            viablePreviousSibling = parent.firstChild;\n                                                } else {\n                                                            viablePreviousSibling = viablePreviousSibling.nextSibling;\n                                                }\n\n                                                // 6. Pre-insert node into parent before viablePreviousSibling. \n                                                // Rethrow any exceptions.\n                                                $.preInsert(node, parent, viablePreviousSibling);\n                                    }\n\n                                    // TODO: tests\n\n                        }, {\n                                    key: 'after',\n                                    value: function after() {\n                                                // https://dom.spec.whatwg.org/#dom-childnode-after\n                                                // The after(nodes) method, when invoked, must run these steps:\n\n                                                // 1. Let parent be context objects parent.\n                                                var parent = this.parentNode;\n\n                                                // 2. If parent is null, terminate these steps.\n                                                if (!parent) {\n                                                            return;\n                                                }\n\n                                                // 3. Let viableNextSibling be context objects first following \n                                                // sibling not in nodes, and null otherwise.\n                                                var viableNextSibling = this.nextSibling;\n\n                                                for (var _len2 = arguments.length, nodes = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                                                            nodes[_key2] = arguments[_key2];\n                                                }\n\n                                                while (viableNextSibling && nodes.indexOf(viableNextSibling) !== -1) {\n                                                            viableNextSibling = viableNextSibling.nextSibling;\n                                                }\n\n                                                // 4. Let node be the result of converting nodes into a node, given \n                                                // nodes and context objects node document. Rethrow any exceptions.\n                                                var node = $.convertNodesIntoANode(nodes, this.ownerDocument);\n\n                                                // 5. Pre-insert node into parent before viableNextSibling. Rethrow \n                                                // any exceptions.\n                                                $.preInsert(node, parent, viableNextSibling);\n                                    }\n\n                                    // TODO: tests\n\n                        }, {\n                                    key: 'replaceWith',\n                                    value: function replaceWith() {\n                                                // https://dom.spec.whatwg.org/#dom-childnode-replacewith\n                                                // The replaceWith(nodes) method, when invoked, must run these steps:\n\n                                                // 1. Let parent be context objects parent.\n                                                var parent = this.parentNode;\n\n                                                // 2. If parent is null, terminate these steps.\n                                                if (!parent) {\n                                                            return;\n                                                }\n\n                                                // 3. Let viableNextSibling be context objects first following \n                                                // sibling not in nodes, and null otherwise.\n                                                var viableNextSibling = this.nextSibling;\n\n                                                for (var _len3 = arguments.length, nodes = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n                                                            nodes[_key3] = arguments[_key3];\n                                                }\n\n                                                while (viableNextSibling && nodes.indexOf(viableNextSibling) !== -1) {\n                                                            viableNextSibling = viableNextSibling.nextSibling;\n                                                }\n\n                                                // 4. Let node be the result of converting nodes into a node, given \n                                                // nodes and context objects node document. Rethrow any exceptions.\n                                                var node = $.convertNodesIntoANode(nodes, this.ownerDocument);\n\n                                                // 5. If context objects parent is parent, replace the context object \n                                                // with node within parent. Rethrow any exceptions.\n                                                if (this.parentNode == parent) {\n                                                            parent.replaceChild(this, node);\n                                                }\n                                                // 6. Otherwise, pre-insert node into parent before viableNextSibling. \n                                                // Rethrow any exceptions.\n                                                else {\n                                                                        parent.insertBefore(node, viableNextSibling);\n                                                            }\n                                    }\n\n                                    // TODO: tests\n\n                        }, {\n                                    key: 'remove',\n                                    value: function remove() {\n                                                // https://dom.spec.whatwg.org/#dom-childnode-remove\n                                                // The remove() method, when invoked, must run these steps:\n\n                                                // 1. If context objects parent is null, terminate these steps.\n                                                var parent = this.parentNode;\n\n                                                if (!parent) {\n                                                            return;\n                                                }\n\n                                                // 2. Remove the context object from context objects parent.\n                                                $.remove(this, parent);\n                                    }\n                        }]);\n\n                        return _class;\n            }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#mixin-documentorshadowroot\n// https://www.w3.org/TR/shadow-dom/#extensions-to-the-documentorshadowroot-mixin\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'activeElement',\n\n\n        // TODO: consider getSelection()\n        // TODO: consider elementFromPoint(double x, double y)\n        // TODO: consider elementsFromPoint(double x, double y)\n        // TODO: consider get styleSheets()\n\n        // TODO: tests\n        get: function get() {\n            var document = this.ownerDocument || this;\n            var nativeActiveElement = native.activeElement.get.call(document);\n\n            if (!nativeActiveElement || document != $.shadowIncludingRoot(this)) {\n                return null;\n            }\n\n            return $.retarget(nativeActiveElement, this);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-nondocumenttypechildnode\n\nexports.default = function (base) {\n\n    var native = {\n        previousElementSibling: $.descriptor(base, 'previousElementSibling'),\n        nextElementSibling: $.descriptor(base, 'nextElementSibling')\n    };\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'previousElementSibling',\n\n\n            // TODO: tests\n            get: function get() {\n                var parentNode = $.shadow(this).parentNode;\n\n                if (!parentNode) {\n                    if (native.previousElementSibling) {\n                        return native.previousElementSibling.get(this);\n                    }\n                    parentNode = this.parentNode;\n                }\n\n                var childNodes = $.shadow(parentNode).childNodes;\n                var index = childNodes.indexOf(this);\n\n                if (index === 0) {\n                    return null;\n                }\n\n                do {\n                    var previous = childNodes[--index];\n\n                    if (previous.nodeType === Node.ELEMENT_NODE) {\n                        return previous;\n                    }\n                } while (index > 0);\n\n                return null;\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'nextElementSibling',\n            get: function get() {\n                var parentNode = $.shadow(this).parentNode;\n\n                if (!parentNode) {\n                    if (native.nextElementSibling) {\n                        return native.nextElementSibling.get(this);\n                    }\n                    parentNode = this.parentNode;\n                }\n\n                var childNodes = $.shadow(parentNode).childNodes;\n                var index = childNodes.indexOf(this);\n\n                if (index === childNodes.length - 1) {\n                    return null;\n                }\n\n                do {\n                    var previous = childNodes[++index];\n\n                    if (previous.nodeType === Node.ELEMENT_NODE) {\n                        return previous;\n                    }\n                } while (index < childNodes.length);\n\n                return null;\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-nonelementparentnode\n\nexports.default = function (base) {\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: \"getElementById\",\n            value: function getElementById(id) {\n                // https://dom.spec.whatwg.org/#dom-nonelementparentnode-getelementbyid\n\n                var firstChild = this.firstChild;\n\n                if (!firstChild) {\n                    return null;\n                }\n\n                var stack = [{ node: firstChild, recursed: false }];\n\n                while (stack.length) {\n                    var frame = stack.pop();\n\n                    if (frame.recursed) {\n                        if (frame.node.nextSibling) {\n                            stack.push({ node: frame.node.nextSibling, recursed: false });\n                        }\n                    } else {\n                        if (frame.node.id === id) {\n                            return frame.node;\n                        }\n\n                        stack.push({ node: frame.node, recursed: true });\n\n                        if (firstChild = frame.node.firstChild) {\n                            stack.push({ node: firstChild, recursed: false });\n                        }\n                    }\n                }\n\n                return null;\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-parentnode\n\nexports.default = function (base) {\n\n    var native = {\n        children: $.descriptor(base, 'children'),\n        firstElementChild: $.descriptor(base, 'firstElementChild'),\n        lastElementChild: $.descriptor(base, 'lastElementChild'),\n        childElementCount: $.descriptor(base, 'childElementCount')\n    };\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'prepend',\n\n\n            // TODO: tests\n            value: function prepend() {\n                for (var _len = arguments.length, nodes = Array(_len), _key = 0; _key < _len; _key++) {\n                    nodes[_key] = arguments[_key];\n                }\n\n                // https://dom.spec.whatwg.org/#dom-parentnode-prepend\n                // The prepend(nodes) method, when invoked, must run these steps:\n\n                // 1. Let node be the result of converting nodes into a node given \n                // nodes and context objects node document. Rethrow any exceptions.\n                var node = $.convertNodesIntoANode(nodes, this.ownerDocument || this);\n\n                // 2. Pre-insert node into context object before the context objects \n                // first child. Rethrow any exceptions.\n                $.preInsert(node, this, this.firstChild);\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'append',\n            value: function append() {\n                for (var _len2 = arguments.length, nodes = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                    nodes[_key2] = arguments[_key2];\n                }\n\n                // https://dom.spec.whatwg.org/#dom-parentnode-append\n                // The append(nodes) method, when invoked, must run these steps:\n\n                // 1. Let node be the result of converting nodes into a node given \n                // nodes and context objects node document. Rethrow any exceptions.\n                var node = $.convertNodesIntoANode(nodes, this.ownerDocument || this);\n\n                // 2. Append node to context object. Rethrow any exceptions.\n                $.append(node, this);\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'querySelector',\n            value: function querySelector(selectors) {\n                var results = this.querySelectorAll(selectors);\n\n                if (results.length) {\n                    return results[0];\n                }\n\n                return null;\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'querySelectorAll',\n            value: function querySelectorAll(selectors) {\n                // https://dom.spec.whatwg.org/#scope-match-a-selectors-string\n                // this is horrible, performance-wise.\n                // it's about 100x slower than native querySelectorAll.\n                // that might not amount to much in practice, though.\n                // after all, this is a polyfill.\n\n                var firstChild = this.firstChild;\n\n                if (!firstChild) {\n                    return null;\n                }\n\n                var stack = [{ node: firstChild, recursed: false }];\n                var results = [];\n\n                while (stack.length) {\n                    var frame = stack.pop();\n\n                    if (frame.recursed) {\n                        if (frame.node.nextSibling) {\n                            stack.push({ node: frame.node.nextSibling, recursed: false });\n                        }\n                    } else {\n                        if (frame.node.nodeType == Node.ELEMENT_NODE && frame.node.matches(selectors)) {\n                            results.push(frame.node);\n                        }\n\n                        stack.push({ node: frame.node, recursed: true });\n\n                        if (firstChild = frame.node.firstChild) {\n                            stack.push({ node: firstChild, recursed: false });\n                        }\n                    }\n                }\n\n                return results;\n            }\n        }, {\n            key: 'children',\n            get: function get() {\n                var childNodes = $.shadow(this).childNodes;\n\n                if (!childNodes) {\n                    if (native.children) {\n                        return native.children.get.call(this);\n                    }\n                    childNodes = this.childNodes;\n                }\n\n                var elements = [];\n\n                for (var i = 0; i < childNodes.length; i++) {\n                    var node = childNodes[i];\n                    if (node.nodeType == Node.ELEMENT_NODE) {\n                        elements.push(node);\n                    }\n                }\n\n                return elements;\n            }\n        }, {\n            key: 'firstElementChild',\n            get: function get() {\n                var childNodes = $.shadow(this).childNodes;\n\n                if (!childNodes) {\n                    if (native.firstElementChild) {\n                        return native.firstElementChild.get.call(this);\n                    }\n                    childNodes = this.childNodes;\n                }\n\n                for (var i = 0; i < childNodes.length; i++) {\n                    var node = childNodes[i];\n                    if (node.nodeType == Node.ELEMENT_NODE) {\n                        return node;\n                    }\n                }\n\n                return null;\n            }\n        }, {\n            key: 'lastElementChild',\n            get: function get() {\n                var childNodes = $.shadow(this).childNodes;\n\n                if (!childNodes) {\n                    if (native.lastElementChild) {\n                        return native.lastElementChild.get.call(this);\n                    }\n                    childNodes = this.childNodes;\n                }\n\n                for (var i = childNodes.length - 1; i >= 0; i--) {\n                    var node = childNodes[i];\n                    if (node.nodeType == Node.ELEMENT_NODE) {\n                        return node;\n                    }\n                }\n\n                return null;\n            }\n        }, {\n            key: 'childElementCount',\n            get: function get() {\n                var childNodes = $.shadow(this).childNodes;\n\n                if (!childNodes) {\n                    if (native.childElementCount) {\n                        return native.childElementCount.get.call(this);\n                    }\n                    childNodes = this.childNodes;\n                }\n\n                var count = 0;\n\n                for (var i = 0; i < childNodes.length; i++) {\n                    var node = childNodes[i];\n                    if (node.nodeType == Node.ELEMENT_NODE) {\n                        count++;\n                    }\n                }\n\n                return count;\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#mixin-slotable\n\nexports.default = function (base) {\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'assignedSlot',\n            get: function get() {\n                // TODO: efficiency (https://github.com/whatwg/dom/issues/369)\n                return $.findASlot(this, true);\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function () {\n\n    // Element.matches(selectors) polyfill from MDN\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/matches#Polyfill\n    // Purposefully chop out the polyfill function that uses querySelectorAll.\n    if (!Element.prototype.matches) {\n        Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.webkitMatchesSelector;\n    }\n\n    // CustomEvent interface\n    $.extend(CustomEvent, _CustomEvent2.default);\n    _CustomEvent2.default.prototype = CustomEvent.prototype;\n    window.CustomEvent = _CustomEvent2.default;\n\n    // Document interface\n    $.extend(Document, _Document2.default);\n\n    // Element interface\n    $.extend(Element, _Element2.default);\n    {\n        // For IE, Edge\n        delete HTMLElement.prototype.children;\n        delete HTMLElement.prototype.parentElement;\n        delete HTMLElement.prototype.innerHTML;\n        delete HTMLElement.prototype.outerHTML;\n        delete HTMLElement.prototype.insertAdjacentText;\n        delete HTMLElement.prototype.insertAdjacentElement;\n        delete HTMLElement.prototype.insertAdjacentHTML;\n    }\n\n    // Event interface\n    $.extend(Event, _Event2.default);\n    $.extend(FocusEvent, _Event.hasRelatedTarget);\n    $.extend(MouseEvent, _Event.hasRelatedTarget);\n    _Event2.default.prototype = Event.prototype;\n    window.Event = _Event2.default;\n\n    // EventTarget\n    if ('EventTarget' in Window) {\n        $.extend(EventTarget, (0, _EventTarget2.default)(EventTarget));\n    } else {\n        // In IE, EventTarget is not exposed and Window's\n        // EventTarget methods are not the same as Node's.\n        $.extend(Window, (0, _EventTarget2.default)(Window));\n        $.extend(Node, (0, _EventTarget2.default)(Node));\n    }\n\n    // HTMLSlotElement interface\n    $.extend(HTMLSlotElement, _HTMLSlotElement2.default);\n\n    // HTMLTableElement interface\n    $.extend(HTMLTableElement, _HTMLTableElement2.default);\n\n    // HTMLTableRowElement interface\n    $.extend(HTMLTableRowElement, _HTMLTableRowElement2.default);\n\n    // HTMLTableSectionElement interface\n    $.extend(HTMLTableSectionElement, _HTMLTableSectionElement2.default);\n\n    // Node interface\n    $.extend(Node, _Node2.default);\n\n    // ChildNode mixin\n    $.extend(DocumentType, (0, _ChildNode2.default)(DocumentType));\n    $.extend(Element, (0, _ChildNode2.default)(Element));\n    $.extend(CharacterData, (0, _ChildNode2.default)(CharacterData));\n\n    // DocumentOrShadowRoot mixin\n    $.extend(Document, _DocumentOrShadowRoot2.default);\n    $.extend(_ShadowRoot2.default, _DocumentOrShadowRoot2.default);\n\n    // NonDocumentTypeChildNode mixin\n    $.extend(Element, (0, _NonDocumentTypeChildNode2.default)(Element));\n    $.extend(CharacterData, (0, _NonDocumentTypeChildNode2.default)(CharacterData));\n\n    // NonElementParentNode mixin\n    $.extend(Document, (0, _NonElementParentNode2.default)(Document));\n    $.extend(DocumentFragment, (0, _NonElementParentNode2.default)(DocumentFragment));\n\n    // ParentNode mixin\n    $.extend(Document, (0, _ParentNode2.default)(Document));\n    $.extend(DocumentFragment, (0, _ParentNode2.default)(DocumentFragment));\n    $.extend(Element, (0, _ParentNode2.default)(Element));\n\n    // Slotable mixin\n    $.extend(Element, (0, _Slotable2.default)(Element));\n    $.extend(Text, (0, _Slotable2.default)(Text));\n};\n\nvar _utils = require('./utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _CustomEvent = require('./interfaces/CustomEvent.js');\n\nvar _CustomEvent2 = _interopRequireDefault(_CustomEvent);\n\nvar _Document = require('./interfaces/Document.js');\n\nvar _Document2 = _interopRequireDefault(_Document);\n\nvar _Element = require('./interfaces/Element.js');\n\nvar _Element2 = _interopRequireDefault(_Element);\n\nvar _Event = require('./interfaces/Event.js');\n\nvar _Event2 = _interopRequireDefault(_Event);\n\nvar _EventTarget = require('./interfaces/EventTarget.js');\n\nvar _EventTarget2 = _interopRequireDefault(_EventTarget);\n\nvar _HTMLSlotElement = require('./interfaces/HTMLSlotElement.js');\n\nvar _HTMLSlotElement2 = _interopRequireDefault(_HTMLSlotElement);\n\nvar _HTMLTableElement = require('./interfaces/HTMLTableElement.js');\n\nvar _HTMLTableElement2 = _interopRequireDefault(_HTMLTableElement);\n\nvar _HTMLTableRowElement = require('./interfaces/HTMLTableRowElement.js');\n\nvar _HTMLTableRowElement2 = _interopRequireDefault(_HTMLTableRowElement);\n\nvar _HTMLTableSectionElement = require('./interfaces/HTMLTableSectionElement.js');\n\nvar _HTMLTableSectionElement2 = _interopRequireDefault(_HTMLTableSectionElement);\n\nvar _Node = require('./interfaces/Node.js');\n\nvar _Node2 = _interopRequireDefault(_Node);\n\nvar _ShadowRoot = require('./interfaces/ShadowRoot.js');\n\nvar _ShadowRoot2 = _interopRequireDefault(_ShadowRoot);\n\nvar _ChildNode = require('./mixins/ChildNode.js');\n\nvar _ChildNode2 = _interopRequireDefault(_ChildNode);\n\nvar _DocumentOrShadowRoot = require('./mixins/DocumentOrShadowRoot.js');\n\nvar _DocumentOrShadowRoot2 = _interopRequireDefault(_DocumentOrShadowRoot);\n\nvar _NonDocumentTypeChildNode = require('./mixins/NonDocumentTypeChildNode.js');\n\nvar _NonDocumentTypeChildNode2 = _interopRequireDefault(_NonDocumentTypeChildNode);\n\nvar _NonElementParentNode = require('./mixins/NonElementParentNode.js');\n\nvar _NonElementParentNode2 = _interopRequireDefault(_NonElementParentNode);\n\nvar _ParentNode = require('./mixins/ParentNode.js');\n\nvar _ParentNode2 = _interopRequireDefault(_ParentNode);\n\nvar _Slotable = require('./mixins/Slotable.js');\n\nvar _Slotable2 = _interopRequireDefault(_Slotable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// In case we would force the polyfill\nvar HTMLSlotElement = window.HTMLSlotElement || window.HTMLUnknownElement;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.makeError = makeError;\nexports.extend = extend;\nexports.shadow = shadow;\nexports.filterByRoot = filterByRoot;\nexports.isShadowRoot = isShadowRoot;\nexports.isValidCustomElementName = isValidCustomElementName;\nexports.parseHTMLFragment = parseHTMLFragment;\nexports.serializeHTMLFragment = serializeHTMLFragment;\nexports.root = root;\nexports.descendant = descendant;\nexports.inclusiveDescendant = inclusiveDescendant;\nexports.ancestor = ancestor;\nexports.inclusiveAncestor = inclusiveAncestor;\nexports.convertNodesIntoANode = convertNodesIntoANode;\nexports.clone = clone;\nexports.adopt = adopt;\nexports.hostIncludingInclusiveAncestor = hostIncludingInclusiveAncestor;\nexports.shadowIncludingRoot = shadowIncludingRoot;\nexports.shadowIncludingDescendant = shadowIncludingDescendant;\nexports.shadowIncludingInclusiveDescendant = shadowIncludingInclusiveDescendant;\nexports.shadowIncludingAncestor = shadowIncludingAncestor;\nexports.shadowIncludingInclusiveAncestor = shadowIncludingInclusiveAncestor;\nexports.closedShadowHidden = closedShadowHidden;\nexports.retarget = retarget;\nexports.insertAdjacent = insertAdjacent;\nexports.findASlot = findASlot;\nexports.findSlotables = findSlotables;\nexports.findFlattenedSlotables = findFlattenedSlotables;\nexports.assignSlotables = assignSlotables;\nexports.assignSlotablesForATree = assignSlotablesForATree;\nexports.assignASlot = assignASlot;\nexports.signalASlotChange = signalASlotChange;\nexports.ensurePreInsertionValidity = ensurePreInsertionValidity;\nexports.preInsert = preInsert;\nexports.insert = insert;\nexports.append = append;\nexports.replace = replace;\nexports.replaceAll = replaceAll;\nexports.preRemove = preRemove;\nexports.remove = remove;\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar slice = exports.slice = function slice(array) {\n    return Array.prototype.slice.call(array);\n};\n\nvar descriptor = exports.descriptor = function descriptor(type, name) {\n    return Object.getOwnPropertyDescriptor(type.prototype, name);\n};\n\nvar descriptors = exports.descriptors = {\n    Document: {\n        activeElement: descriptor(Document, 'activeElement'),\n        getElementsByTagName: descriptor(Document, 'getElementsByTagName'),\n        getElementsByTagNameNS: descriptor(Document, 'getElementsByTagNameNS'),\n        getElementsByClassName: descriptor(Document, 'getElementsByClassName')\n    },\n    Element: {\n        getElementsByTagName: descriptor(Element, 'getElementsByTagName'),\n        getElementsByTagNameNS: descriptor(Element, 'getElementsByTagNameNS'),\n        getElementsByClassName: descriptor(Element, 'getElementsByClassName'),\n        innerHTML: descriptor(Element, 'innerHTML') || descriptor(HTMLElement, 'innerHTML'),\n        setAttribute: descriptor(Element, 'setAttribute')\n    },\n    Event: {\n        currentTarget: descriptor(Event, 'currentTarget'),\n        target: descriptor(Event, 'target')\n    },\n    FocusEvent: {\n        relatedTarget: descriptor(FocusEvent, 'relatedTarget')\n    },\n    MouseEvent: {\n        relatedTarget: descriptor(MouseEvent, 'relatedTarget')\n    },\n    Node: {\n        parentNode: descriptor(Node, 'parentNode'),\n        hasChildNodes: descriptor(Node, 'hasChildNodes'),\n        childNodes: descriptor(Node, 'childNodes'),\n        firstChild: descriptor(Node, 'firstChild'),\n        lastChild: descriptor(Node, 'lastChild'),\n        previousSibling: descriptor(Node, 'previousSibling'),\n        nextSibling: descriptor(Node, 'nextSibling'),\n        textContent: descriptor(Node, 'textContent'),\n        cloneNode: descriptor(Node, 'cloneNode'),\n        insertBefore: descriptor(Node, 'insertBefore'),\n        removeChild: descriptor(Node, 'removeChild'),\n        appendChild: descriptor(Node, 'appendChild')\n    }\n};\n\nfunction makeError(name, message) {\n    var error = new Error(message || name);\n    error.name = name;\n    return error;\n}\n\nfunction extend(object) {\n    for (var _len = arguments.length, mixins = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        mixins[_key - 1] = arguments[_key];\n    }\n\n    for (var i = 0; i < mixins.length; i++) {\n        var mixin = mixins[i].prototype;\n        var names = Object.getOwnPropertyNames(mixin);\n        for (var j = 0; j < names.length; j++) {\n            var name = names[j];\n            if (name === 'constructor') {\n                continue;\n            }\n            var _descriptor = Object.getOwnPropertyDescriptor(mixin, name);\n            Object.defineProperty(object.prototype || object, name, _descriptor);\n        }\n    }\n}\n\nfunction shadow(object) {\n    var shadow = object._shadow || {};\n    return object._shadow = shadow;\n}\n\nfunction filterByRoot(node, descendants) {\n    var contextRoot = root(node);\n    var filtered = [];\n\n    for (var i = 0; i < descendants.length; i++) {\n        var item = descendants[i];\n        if (root(item) === contextRoot) {\n            filtered.push(item);\n        }\n    }\n\n    return filtered;\n}\n\nfunction isShadowRoot(node) {\n    return node.nodeName === '#shadow-root';\n}\n\n// https://html.spec.whatwg.org/multipage/scripting.html#valid-custom-element-name\n\nfunction isValidCustomElementName(localName) {\n    switch (localName) {\n        case \"annotation-xml\":\n        case \"color-profile\":\n        case \"font-face\":\n        case \"font-face-src\":\n        case \"font-face-uri\":\n        case \"font-face-format\":\n        case \"font-face-name\":\n        case \"missing-glyph\":\n            return false;\n    }\n\n    // For now, to reduce complexity, we are leaving the unicode sets out...\n    // TODO: Consider adding 'full' support (for Unicode)\n    var regex = /[a-z](-|\\.|[0-9]|_|[a-z])+-(-|\\.|[0-9]|_|[a-z])+/g;\n\n    return regex.test(localName);\n}\n\n// https://www.w3.org/TR/DOM-Parsing/\n\nfunction parseHTMLFragment(markup, context) {\n    var temp = context.ownerDocument.createElement('body');\n    descriptors.Element.innerHTML.set.call(temp, markup);\n    var childNodes = descriptors.Node.childNodes.get.call(temp);\n    var fragment = context.ownerDocument.createDocumentFragment();\n    for (var i = 0; i < childNodes.length; i++) {\n        descriptors.Node.appendChild.value.call(fragment, childNodes[i]);\n    }\n    return fragment;\n}\n\nfunction serializeHTMLFragment(node) {\n    // https://www.w3.org/TR/html5/single-page.html#html-fragment-serialization-algorithm\n\n    // 1. Let s be a string, and initialize it to the empty string.\n    var s = '';\n\n    // 2. If the node is a template element, then let the node instead be the \n    // template element's template contents (a DocumentFragment node).\n    if (node.localName === 'template') {\n        var content = node.content;\n        if (content) {\n            node = content;\n        }\n    }\n\n    // 3. For each child node of the node, in tree order, run the following steps:\n    var childNodes = node.childNodes;\n    for (var i = 0; i < childNodes.length; i++) {\n        // 1. Let current node be the child node being processed.\n        var currentNode = childNodes[i];\n        // 2. Append the appropriate string from the following list to s:\n        switch (currentNode.nodeType) {\n            case Node.ELEMENT_NODE:\n                var tagName = void 0;\n                switch (currentNode.namespaceURI) {\n                    case 'http://www.w3.org/1999/xhtml':\n                    case 'http://www.w3.org/1998/Math/MathML':\n                    case 'http://www.w3.org/2000/svg':\n                        tagName = currentNode.localName;\n                        break;\n                    default:\n                        tagName = currentNode.qualifiedName;\n                        break;\n                }\n                s += '<' + tagName;\n                var attributes = currentNode.attributes;\n                for (var j = 0; j < attributes.length; j++) {\n                    var attribute = attributes[j];\n                    s += ' ' + serializeAttributeName(attribute);\n                    s += '=\"' + escapeString(attribute.value) + '\"';\n                }\n                s += '>';\n                switch (currentNode.localName) {\n                    case 'area':case 'base':case 'basefont':case 'bgsound':\n                    case 'br':case 'col':case 'embed':case 'frame':case 'hr':\n                    case 'img':case 'input':case 'keygen':case 'link':case 'meta':\n                    case 'param':case 'source':case 'track':case 'wbr':\n                        continue;\n                    case 'pre':case 'textarea':case 'listing':\n                        var firstChild = currentNode.firstChild;\n                        if (firstChild && firstChild.nodeType === Node.TEXT_NODE && firstChild.data[0] === '\\n') {\n                            s += '\\n';\n                        }\n                        break;\n                }\n                s += serializeHTMLFragment(currentNode);\n                s += '</' + tagName + '>';\n                break;\n            case Node.TEXT_NODE:\n                switch (currentNode.parentNode.localName) {\n                    case 'style':case 'script':case 'xmp':case 'iframe':\n                    case 'noembed':case 'noframes':case 'plaintext':case 'noscript':\n                        s += currentNode.data;\n                        break;\n                    default:\n                        s += escapeString(currentNode.data);\n                        break;\n                }\n                break;\n            case Node.COMMENT_NODE:\n                s += '<!--' + currentNode.data + '-->';\n                break;\n            case Node.PROCESSING_INSTRUCTION_NODE:\n                s += '<?' + currentNode.target + ' ' + currentNode.data + '>';\n                break;\n            case Node.DOCUMENT_TYPE_NODE:\n                s += '<!DOCTYPE ' + currentNode.name + '>';\n                break;\n        }\n    }\n\n    // 4. The result of the algorithm is the string s.\n    return s;\n\n    function escapeString(string, attributeMode) {\n        if (!string || !string.length) {\n            return '';\n        }\n\n        string = string.replace('&', '&amp;');\n        string = string.replace('\\xA0', '&nbsp;');\n\n        if (attributeMode) {\n            string = string.replace('\"', '&quot;');\n        } else {\n            string = string.replace('<', '&lt;');\n            string = string.replace('>', '&gt;');\n        }\n\n        return string;\n    }\n\n    function serializeAttributeName(attribute) {\n        var namespaceURI = attribute.namespaceURI;\n        var localName = attribute.localName;\n        if (!namespaceURI) {\n            return localName;\n        }\n        switch (namespaceURI) {\n            case 'http://www.w3.org/XML/1998/namespace':\n                return 'xml:' + localName;\n            case 'http://www.w3.org/2000/xmlns/':\n                if (localName === 'xmlns') {\n                    return localName;\n                }\n                return 'xmlns:' + localName;\n            case 'http://www.w3.org/1999/xlink':\n                return 'xlink:' + localName;\n            default:\n                return attribute.name;\n        }\n    }\n}\n\n// https://dom.spec.whatwg.org/#trees\n\nfunction root(node) {\n    var root = node;\n    var parent = root.parentNode;\n\n    while (parent != null) {\n        root = parent;\n        parent = root.parentNode;\n    }\n\n    return root;\n}\n\nfunction descendant(nodeA, nodeB) {\n    var parent = nodeA.parentNode;\n\n    while (parent != null) {\n        if (nodeB === parent) {\n            return true;\n        }\n        parent = parent.parentNode;\n    }\n\n    return false;\n}\n\nfunction inclusiveDescendant(nodeA, nodeB) {\n    return nodeA === nodeB || descendant(nodeA, nodeB);\n}\n\nfunction ancestor(nodeA, nodeB) {\n    var parent = nodeB.parentNode;\n\n    while (parent != null) {\n        if (nodeA === parent) {\n            return true;\n        }\n        parent = parent.parentNode;\n    }\n\n    return false;\n}\n\nfunction inclusiveAncestor(nodeA, nodeB) {\n    return nodeA === nodeB || ancestor(nodeA, nodeB);\n}\n\n// https://dom.spec.whatwg.org/#interface-parentnode\n\nfunction convertNodesIntoANode(nodes, document) {\n    var node = null;\n\n    for (var i = 0; i < nodes.length; i++) {\n        var item = nodes[i];\n\n        if (typeof item === \"string\") {\n            nodes[i] = document.createTextNode(item);\n        }\n    }\n\n    if (nodes.length === 1) {\n        node = nodes[0];\n    } else {\n        node = document.createDocumentFragment();\n\n        for (var _i = 0; _i < nodes.length; _i++) {\n            node.appendChild(nodes[_i]);\n        }\n    }\n\n    return node;\n}\n\n// https://dom.spec.whatwg.org/#interface-node\n\nfunction clone(node, document, cloneChildren) {\n    // https://dom.spec.whatwg.org/#concept-node-clone\n    // To clone a node, with an optional document and clone children flag, run these steps:\n\n    // 1. If document is not given, let document be nodes node document.\n    document = document || node.ownerDocument;\n\n    // Use a shortcut here\n    // 2. If node is an element, then:\n    // 3. Otherwise, let copy be a node that implements the same interfaces \n    // as node, and fulfills these additional requirements, switching on node:\n    // 4. Set copys node document and document to copy, if copy is a document, \n    // and set copys node document to document otherwise.\n    // 5. Run any cloning steps defined for node in other applicable \n    // specifications and pass copy, node, document and the clone children \n    // flag if set, as parameters.\n    var copy = descriptors.Node.cloneNode.value.call(node, false);\n\n    // 6. If the clone children flag is set, clone all the children of node \n    // and append them to copy, with document as specified and the clone \n    // children flag being set.\n    if (cloneChildren === true) {\n        var childNodes = slice(node.childNodes);\n        for (var i = 0; i < childNodes.length; i++) {\n            append(childNodes[i].cloneNode(true), copy);\n        }\n    }\n\n    return copy;\n}\n\nfunction adopt(node, document) {\n    // https://dom.spec.whatwg.org/#concept-node-adopt\n\n    // 1. Let oldDocument be nodes node document.\n    var oldDocument = node.ownerDocument;\n\n    // 2. If nodes parent is not null, remove node from its parent.\n    var parent = node.parentNode;\n    if (parent != null) {\n        remove(node, parent);\n    }\n\n    // Skip (CustomElements, native)\n    // 3. If document is not the same as oldDocument, run these substeps:\n}\n\n// https://dom.spec.whatwg.org/#interface-documentfragment\n\nfunction hostIncludingInclusiveAncestor(nodeA, nodeB) {\n    if (inclusiveAncestor(nodeA, nodeB)) {\n        return true;\n    }\n\n    var host = root(nodeB).host;\n\n    if (host && hostIncludingInclusiveAncestor(nodeA, host)) {\n        return true;\n    }\n\n    return false;\n}\n\n// https://dom.spec.whatwg.org/#interface-shadowroot\n\nfunction shadowIncludingRoot(node) {\n    var rootNode = root(node);\n    if (isShadowRoot(rootNode)) {\n        rootNode = shadowIncludingRoot(rootNode.host);\n    }\n    return rootNode;\n}\n\nfunction shadowIncludingDescendant(nodeA, nodeB) {\n    do {\n        if (isShadowRoot(nodeA)) {\n            nodeA = nodeA.host;\n        } else {\n            nodeA = nodeA.parentNode;\n        }\n        if (nodeA === nodeB) {\n            return true;\n        }\n    } while (nodeA != null);\n\n    return false;\n}\n\nfunction shadowIncludingInclusiveDescendant(nodeA, nodeB) {\n    return nodeA === nodeB || shadowIncludingDescendant(nodeA, nodeB);\n}\n\nfunction shadowIncludingAncestor(nodeA, nodeB) {\n    return shadowIncludingDescendant(nodeB, nodeA);\n}\n\nfunction shadowIncludingInclusiveAncestor(nodeA, nodeB) {\n    return nodeA === nodeB || shadowIncludingAncestor(nodeA, nodeB);\n}\n\nfunction closedShadowHidden(nodeA, nodeB) {\n    // https://dom.spec.whatwg.org/#concept-closed-shadow-hidden\n    var rootNode = root(nodeA);\n\n    if (!isShadowRoot(rootNode)) {\n        return false;\n    }\n\n    if (shadowIncludingInclusiveAncestor(rootNode, nodeB)) {\n        return false;\n    }\n\n    if (rootNode.mode === 'closed' || closedShadowHidden(rootNode.host, nodeB)) {\n        return true;\n    }\n\n    return false;\n}\n\nfunction retarget(nodeA, nodeB) {\n    // https://dom.spec.whatwg.org/#retarget\n    // To retarget an object A against an object B, repeat these steps \n    // until they return an object:\n\n    var rootNode = void 0;\n    while (rootNode = root(nodeA)) {\n        // 1. If As root is not a shadow root, or As root is a shadow-including \n        // inclusive ancestor of B, then return A.\n        if (!isShadowRoot(rootNode) || shadowIncludingInclusiveAncestor(rootNode, nodeB)) {\n            return nodeA;\n        }\n        // 2. Set A to As roots host.\n        nodeA = rootNode.host;\n    }\n}\n\n// https://dom.spec.whatwg.org/#interface-element\n\nfunction insertAdjacent(element, where, node) {\n    if (!(node instanceof Node)) {\n        throw makeError('TypeError');\n    }\n    var parent = void 0;\n    // https://dom.spec.whatwg.org/#insert-adjacent\n    switch ((where || '').toLowerCase()) {\n        case \"beforebegin\":\n            if (parent = element.parentNode) {\n                return preInsert(node, parent, element);\n            }\n            return null;\n        case \"afterbegin\":\n            return preInsert(node, element, element.firstChild);\n        case \"beforeend\":\n            return preInsert(node, element, null);\n        case \"afterend\":\n            if (parent = element.parentNode) {\n                return preInsert(node, parent, element.nextSibling);\n            }\n            return null;\n        default:\n            throw makeError('SyntaxError');\n    }\n}\n\n// https://dom.spec.whatwg.org/#finding-slots-and-slotables\n\nfunction findASlot(slotable, open) {\n    // https://dom.spec.whatwg.org/#find-a-slot\n    // To find a slot for a given slotable slotable and an optional \n    // open flag (unset unless stated otherwise), run these steps:\n\n    // 1. If slotables parent is null, then return null.\n    var parent = slotable.parentNode;\n    if (!parent) {\n        return null;\n    }\n\n    // 2. Let shadow be slotables parents shadow root.\n    var shadowRoot = shadow(parent).shadowRoot;\n\n    // 3. If shadow is null, then return null.\n    if (!shadowRoot) {\n        return null;\n    }\n\n    // 4. If the open flag is set and shadows mode is not \"open\", then return null.\n    if (open === true && shadowRoot.mode !== 'open') {\n        return null;\n    }\n\n    // 5. Return the first slot in shadows tree whose name is slotables name, if any, and null otherwise.\n    if (!shadowRoot.firstChild) {\n        return null;\n    }\n\n    var name = slotable instanceof Element ? slotable.slot : null;\n    var stack = [{ node: shadowRoot.firstChild, recursed: false }];\n\n    while (stack.length) {\n        var frame = stack.pop();\n        var node = frame.node;\n\n        if (frame.recursed) {\n            if (node.nextSibling) {\n                stack.push({ node: node.nextSibling, recursed: false });\n            }\n        } else {\n            if (node.localName === 'slot' && node.getAttribute('name') === name) {\n                return node;\n            }\n\n            stack.push({ node: frame.node, recursed: true });\n\n            if (node.firstChild) {\n                stack.push({ node: node.firstChild, recursed: false });\n            }\n        }\n    }\n\n    return null;\n}\n\nfunction findSlotables(slot) {\n    // https://dom.spec.whatwg.org/#find-slotables\n    // To find slotables for a given slot slot, run these steps:\n\n    // 1. Let result be an empty list.\n    var result = [];\n\n    // 2. If slots root is not a shadow root, then return result.\n    var slotRoot = root(slot);\n    if (!isShadowRoot(slotRoot)) {\n        return result;\n    }\n\n    // 3. Let host be slots roots host.\n    var host = slotRoot.host;\n\n    // 4. For each slotable child of host, slotable, in tree order, run these substeps:\n    var slotableChildren = slice(host.childNodes);\n    for (var i = 0; i < slotableChildren.length; i++) {\n        var slotable = slotableChildren[i];\n        if (slotable.nodeType === Node.ELEMENT_NODE || slotable.nodeType === Node.TEXT_NODE) {\n            // 1. Let foundSlot be the result of finding a slot given slotable.\n            var foundSlot = findASlot(slotable);\n            // 2. If foundSlot is slot, then append slotable to result.\n            if (foundSlot === slot) {\n                result.push(slotable);\n            }\n        }\n    }\n\n    // 5. Return result.\n    return result;\n}\n\nfunction findFlattenedSlotables(slot) {\n    // https://dom.spec.whatwg.org/#find-flattened-slotables\n    // To find flattened slotables for a given slot slot, run these steps:\n\n    // 1. Let result be an empty list.\n    var result = [];\n\n    // 2. Let slotables be the result of finding slotables given slot.\n    var slotables = findSlotables(slot);\n\n    // 3. If slotables is the empty list, then append each slotable child of slot, in tree order, to slotables.\n    if (slotables.length === 0) {\n        var slotableChildren = slice(slot.childNodes);\n        for (var i = 0; i < slotableChildren.length; i++) {\n            var slotableChild = slotableChildren[i];\n            if (slotableChild.nodeType === Node.ELEMENT_NODE || slotableChild.nodeType === Node.TEXT_NODE) {\n                slotables.push(slotableChild);\n            }\n        }\n    }\n\n    // 4. For each node in slotables, run these substeps:\n    for (var _i2 = 0; _i2 < slotables.length; _i2++) {\n        var node = slotables[_i2];\n        // 1. If node is a slot, run these subsubsteps:\n        if (node.localName === 'slot') {\n            var temporaryResult = findFlattenedSlotables(node);\n            result.splice.apply(result, [result.length, 0].concat(_toConsumableArray(temporaryResult)));\n        } else {\n            result.push(node);\n        }\n    }\n\n    // 5. Return result.\n    return result;\n}\n\n// https://dom.spec.whatwg.org/#assigning-slotables-and-slots\n\nfunction assignSlotables(slot, suppressSignaling) {\n    // https://dom.spec.whatwg.org/#assign-slotables\n    // To assign slotables, for a slot slot with an optional suppress \n    // signaling flag (unset unless stated otherwise), run these steps:\n\n    // 1. Let slotables be the result of finding slotables for slot.\n    var slotables = findSlotables(slot);\n\n    // 2. If suppress signaling flag is unset, and slotables and slots assigned \n    // nodes are not identical, then run signal a slot change for slot.\n    if (!suppressSignaling) {\n        var assignedNodes = slot.assignedNodes();\n        if (slotables.length !== assignedNodes.length) {\n            signalASlotChange(slot);\n        } else {\n            for (var i = 0; i < slotables.length; i++) {\n                if (slotables[i] !== assignedNodes[i]) {\n                    signalASlotChange(slot);\n                    break;\n                }\n            }\n        }\n    }\n\n    // 3. Set slots assigned nodes to slotables.\n    shadow(slot).assignedNodes = slotables;\n\n    // 4. For each slotable in slotables, set slotables assigned slot to slot.\n\n    // 4a. If we haven't tracked them yet, track the slot's logical children\n    if (!shadow(slot).childNodes) {\n        var childNodes = descriptors.Node.childNodes.get.call(slot);\n        shadow(slot).childNodes = slice(childNodes);\n    }\n\n    // 4b. We need to clean out the slot\n    var firstChild = void 0;\n    while (firstChild = descriptors.Node.firstChild.get.call(slot)) {\n        descriptors.Node.removeChild.value.call(slot, firstChild);\n    }\n\n    // 4c. do what the spec said\n    for (var _i3 = 0; _i3 < slotables.length; _i3++) {\n        var slotable = slotables[_i3];\n        shadow(slotable).assignedSlot = slot;\n        descriptors.Node.appendChild.value.call(slot, slotable);\n    }\n\n    // 4d. if there were no slotables we need to insert its fallback content\n    if (!slotables.length) {\n        var _childNodes = shadow(slot).childNodes;\n        for (var _i4 = 0; _i4 < _childNodes.length; _i4++) {\n            descriptors.Node.appendChild.value.call(slot, _childNodes[_i4]);\n        }\n    }\n}\n\nfunction assignSlotablesForATree(tree, noSignalSlots) {\n    // https://dom.spec.whatwg.org/#assign-slotables-for-a-tree\n    // To assign slotables for a tree, given a tree tree and an optional set of slots noSignalSlots\n    // (empty unless stated otherwise), run these steps for each slot slot in tree, in tree order:\n    var slots = [];\n\n    if (tree.localName === 'slot') {\n        slots.push(tree);\n    }\n\n    if (tree.hasChildNodes()) {\n        slots.push.apply(slots, _toConsumableArray(tree.querySelectorAll('slot')));\n    }\n\n    for (var i = 0; i < slots.length; i++) {\n        var slot = slots[i];\n\n        // 1. Let suppress signaling flag be set, if slot is in noSignalSlots, and unset otherwise.\n        var suppressSignaling = noSignalSlots && noSignalSlots.indexOf(slot) !== -1;\n\n        // 2. Run assign slotables for slot with suppress signaling flag.\n        assignSlotables(slot, suppressSignaling);\n    }\n}\n\nfunction assignASlot(slotable) {\n    var slot = findASlot(slotable);\n\n    if (slot != null) {\n        assignSlotables(slot);\n    }\n}\n\n// https://dom.spec.whatwg.org/#signaling-slot-change\n\nfunction signalASlotChange(slot) {}\n// https://dom.spec.whatwg.org/#signal-a-slot-change\n// To signal a slot change, for a slot slot, run these steps:\n\n// Skip (MutationObserver)\n// 1. If slot is not in unit of related similar-origin browsing contexts' \n// signal slot list, append slot to unit of related similar-origin browsing \n// contexts' signal slot list.\n// 2. Queue a mutation observer compound microtask.\n\n\n// https://dom.spec.whatwg.org/#mutation-algorithms\n\nfunction ensurePreInsertionValidity(node, parent, child) {\n    // https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n    // To ensure pre-insertion validity of a node into a parent before a child, run these steps:\n\n    // Skip (native)\n    // 1. If parent is not a Document, DocumentFragment, or Element node, throw a HierarchyRequestError.\n\n    // 2. If node is a host-including inclusive ancestor of parent, throw a HierarchyRequestError.\n    if (hostIncludingInclusiveAncestor(node, parent)) {\n        throw makeError('HierarchyRequestError');\n    }\n\n    // 3. If child is not null and its parent is not parent, then throw a NotFoundError.\n    if (child != null && child.parentNode !== parent) {\n        throw makeError('NotFoundError');\n    }\n\n    // Skip (native)\n    // 4. If node is not a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction, \n    // or Comment node, throw a HierarchyRequestError.\n    // 5. If either node is a Text node and parent is a document, or node is a doctype \n    // and parent is not a document, throw a HierarchyRequestError.\n    // 6. If parent is a document, and any of the statements below, switched on node, \n    // are true, throw a HierarchyRequestError.\n}\n\nfunction preInsert(node, parent, child) {\n    // https://dom.spec.whatwg.org/#concept-node-pre-insert\n    // To pre-insert a node into a parent before a child, run these steps:\n\n    // 1. Ensure pre-insertion validity of node into parent before child.\n    ensurePreInsertionValidity(node, parent, child);\n\n    // 2. Let reference child be child.\n    var referenceChild = child;\n\n    // 3. If reference child is node, set it to nodes next sibling.\n    referenceChild === node && (referenceChild = node.nextSibling);\n\n    // 4. Adopt node into parents node document.\n    // https://dom.spec.whatwg.org/#concept-node-adopt\n    adopt(node, parent.ownerDocument);\n\n    // 5. Insert node into parent before reference child.\n    // https://dom.spec.whatwg.org/#concept-node-insert\n    insert(node, parent, referenceChild);\n\n    // 6. Return node.\n    return node;\n}\n\nfunction insert(node, parent, child, suppressObservers) {\n    // https://dom.spec.whatwg.org/#concept-node-insert\n    // To insert a node into a parent before a child, with an optional suppress observers flag, run these steps:\n\n    // Skip (Range)\n    // 1. Let count be the number of children of node if it is a DocumentFragment node, and one otherwise.\n    // 2. If child is non-null, run these substeps:\n\n    // 3. Let nodes be nodes children if node is a DocumentFragment node, \n    // and a list containing solely node otherwise.\n    var nodes = node.nodeType === Node.DOCUMENT_FRAGMENT_NODE ? slice(node.childNodes) : [node];\n\n    // 4. If node is a DocumentFragment node, remove its children with the suppress observers flag set.\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n        for (var i = 0; i < nodes.length; i++) {\n            remove(nodes[i], node, true);\n        }\n    }\n\n    // Skip (MutationObserver)\n    // 5. If node is a DocumentFragment node, queue a mutation record of \"childList\" for node with removedNodes nodes.\n\n    // 6. For each node in nodes, in tree order, run these substeps:\n    for (var _i5 = 0; _i5 < nodes.length; _i5++) {\n        var _node = nodes[_i5];\n        // 1. Insert node into parent before child or at the end of parent if child is null.\n        var childNodes = shadow(parent).childNodes;\n        if (childNodes) {\n            if (child) {\n                var childIndex = childNodes.indexOf(child);\n                childNodes.splice(childIndex, 0, _node);\n            } else {\n                childNodes.push(_node);\n            }\n            shadow(_node).parentNode = parent;\n            // If it's a shadow root, perform physical insert on the host.\n            var shadowHost = shadow(parent).host;\n            if (shadowHost) {\n                descriptors.Node.insertBefore.value.call(shadowHost, _node, child);\n            }\n        } else {\n            descriptors.Node.insertBefore.value.call(parent, _node, child);\n        }\n\n        // 2. If parent is a shadow host and node is a slotable, then assign a slot for node.\n        if (shadow(parent).shadowRoot && 'assignedSlot' in _node) {\n            assignASlot(_node);\n        }\n\n        // 3. If parent is a slot whose assigned nodes is the empty list, then run signal a slot change for parent.\n        if (parent.localName === 'slot' && parent.assignedNodes().length === 0) {\n            // 3a. Physically append the child into the slot.\n            descriptors.Node.appendChild.value.call(parent, _node);\n            // 3b. Do what the spec said\n            signalASlotChange(parent);\n        }\n\n        // 4. Run assign slotables for a tree with nodes tree and a set containing each inclusive descendant of node that is a slot.\n        var inclusiveSlotDescendants = [];\n        if (_node.localName === 'slot') {\n            inclusiveSlotDescendants.push(_node);\n        }\n        if (_node.hasChildNodes()) {\n            inclusiveSlotDescendants.push.apply(inclusiveSlotDescendants, _toConsumableArray(_node.querySelectorAll('slot')));\n        }\n        assignSlotablesForATree(_node, inclusiveSlotDescendants);\n\n        // Skip (CustomElements)\n        // 5. For each shadow-including inclusive descendant inclusiveDescendant of node, \n        // in shadow-including tree order, run these subsubsteps:\n    }\n\n    // Skip (MutationObserver)\n    // 7. If suppress observers flag is unset, queue a mutation record of \"childList\" for parent \n    // with addedNodes nodes, nextSibling child, and previousSibling childs previous sibling or \n    // parents last child if child is null.\n}\n\nfunction append(node, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-append\n    // To append a node to a parent, pre-insert node into parent before null.\n    preInsert(node, parent, null);\n}\n\nfunction replace(child, node, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-replace\n    // To replace a child with node within a parent, run these steps:\n\n    // Skip (native)\n    // 1. If parent is not a Document, DocumentFragment, or Element node, throw a HierarchyRequestError.\n\n    // 2. If node is a host-including inclusive ancestor of parent, throw a HierarchyRequestError.\n    if (hostIncludingInclusiveAncestor(node, parent)) {\n        throw makeError('HierarchyRequestError');\n    }\n\n    // 3. If childs parent is not parent, then throw a NotFoundError.\n    if (child.parentNode !== parent) {\n        throw makeError('NotFoundError');\n    }\n\n    // Skip (native)\n    // 4. If node is not a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction, or Comment node, throw a HierarchyRequestError.\n    // 5. If either node is a Text node and parent is a document, or node is a doctype and parent is not a document, throw a HierarchyRequestError.\n    // 6. If parent is a document, and any of the statements below, switched on node, are true, throw a HierarchyRequestError.\n\n    // 7. Let reference child be childs next sibling.\n    var referenceChild = child.nextSibling;\n\n    // 8. If reference child is node, set it to nodes next sibling.\n    if (referenceChild === node) {\n        referenceChild = node.nextSibling;\n    }\n\n    // Skip (MutationObserver)\n    // 9. Let previousSibling be childs previous sibling.\n    // const previousSibling = child.previousSibling;\n\n    // 10. Adopt node into parents node document.\n    adopt(node, parent.ownerDocument);\n\n    // Skip (MutationObserver)\n    // 11. Let removedNodes be the empty list.\n    // const removedNodes = [];\n\n    // 12. If childs parent is not null, run these substeps:\n    var childParent = child.parentNode;\n    if (childParent != null) {\n        // Skip (MutationObserver)\n        // 1. Set removedNodes to a list solely containing child.\n        // removedNodes.push(child);\n        // 2. Remove child from its parent with the suppress observers flag set.\n        remove(child, parent, true);\n    }\n\n    // Skip (MutationObserver)\n    // 13. Let nodes be nodes children if node is a DocumentFragment node, and a list containing solely node otherwise.\n\n    // 14. Insert node into parent before reference child with the suppress observers flag set.\n    insert(node, parent, referenceChild, true);\n\n    // Skip (MutationObserver)\n    // 15. Queue a mutation record of \"childList\" for target parent with addedNodes nodes, \n    // removedNodes removedNodes, nextSibling reference child, and previousSibling previousSibling.\n}\n\nfunction replaceAll(node, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-replace-all\n    // To replace all with a node within a parent, run these steps:\n\n    // 1. If node is not null, adopt node into parents node document.\n    if (node != null) {\n        adopt(node, parent.ownerDocument);\n    }\n\n    // 2. Let removedNodes be parents children.\n    var removedNodes = slice(parent.childNodes);\n\n    // 3. Let addedNodes be the empty list if node is null, nodes children if node is a DocumentFragment node, and a list containing node otherwise.\n    var addedNodes = node === null ? [] : node.nodeType === Node.DOCUMENT_FRAGMENT_NODE ? slice(node.childNodes) : [node];\n\n    // 4. Remove all parents children, in tree order, with the suppress observers flag set.\n    for (var i = 0; i < removedNodes.length; i++) {\n        remove(removedNodes[i], parent, true);\n    }\n\n    // 5. If node is not null, insert node into parent before null with the suppress observers flag set.\n    if (node != null) {\n        insert(node, parent, null, true);\n    }\n\n    // Skip (MutationObserver)\n    // 6. Queue a mutation record of \"childList\" for parent with addedNodes addedNodes and removedNodes removedNodes.\n}\n\nfunction preRemove(child, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-pre-remove\n    // To pre-remove a child from a parent, run these steps:\n\n    // 1. If childs parent is not parent, then throw a NotFoundError.\n    if (child.parentNode !== parent) {\n        throw makeError('NotFoundError');\n    }\n\n    // 2. Remove child from parent.\n    remove(child, parent);\n\n    // 3. Return child.\n    return child;\n}\n\nfunction remove(node, parent, suppessObservers) {\n    // https://dom.spec.whatwg.org/#concept-node-remove\n    // To remove a node from a parent, with an optional suppress observers flag, run these steps:\n\n    // Skip (Range)\n    // 1. Let index be nodes index.\n    // 2. For each range whose start node is an inclusive descendant of node, set its start to (parent, index).\n    // 3. For each range whose end node is an inclusive descendant of node, set its end to (parent, index).\n    // 4. For each range whose start node is parent and start offset is greater than index, decrease its start offset by one.\n    // 5. For each range whose end node is parent and end offset is greater than index, decrease its end offset by one.\n\n    // Skip (NodeIterator)\n    // 6. For each NodeIterator object iterator whose roots node document is nodes node document, \n    // run the NodeIterator pre-removing steps given node and iterator.\n\n    // Skip (MutationObserver)\n    // 7. Let oldPreviousSibling be nodes previous sibling.\n    // 8. Let oldNextSibling be nodes next sibling.\n\n    // 9. Remove node from its parent.\n    var childNodes = shadow(parent).childNodes;\n    if (childNodes) {\n        var nodeIndex = childNodes.indexOf(node);\n        childNodes.splice(nodeIndex, 1);\n    }\n    delete shadow(node).parentNode;\n    descriptors.Node.removeChild.value.call(descriptors.Node.parentNode.get.call(node), node);\n\n    // 10. If node is assigned, then run assign slotables for nodes assigned slot.\n    var assignedSlot = shadow(node).assignedSlot;\n    if (assignedSlot) {\n        assignSlotables(assignedSlot);\n        shadow(node).assignedSlot = null;\n    }\n\n    // 11. If parent is a slot whose assigned nodes is the empty list, then run signal a slot change for parent.\n    if (parent.localName === 'slot' && parent.assignedNodes().length === 0) {\n        signalASlotChange(parent);\n    }\n\n    // 12. If node has an inclusive descendant that is a slot, then:\n    var inclusiveSlotDescendants = [];\n    if (node.localName === 'slot') {\n        inclusiveSlotDescendants.push(node);\n    }\n    if (node.hasChildNodes()) {\n        inclusiveSlotDescendants.push.apply(inclusiveSlotDescendants, _toConsumableArray(node.querySelectorAll('slot')));\n    }\n    if (inclusiveSlotDescendants.length) {\n        // 1. Run assign slotables for a tree with parents tree.\n        assignSlotablesForATree(parent);\n        // 2. Run assign slotables for a tree with nodes tree and a \n        // set containing each inclusive descendant of node that is a slot.\n        assignSlotablesForATree(node, inclusiveSlotDescendants);\n    }\n\n    // Skip (other)\n    // 13. Run the removing steps with node and parent.\n\n    // Skip (CustomElements)\n    // 14. If node is custom, then enqueue a custom element callback reaction \n    // with node, callback name \"disconnectedCallback\", and an empty argument list.\n    // 15. For each shadow-including descendant descendant of node, in \n    // shadow-including tree order, run these substeps:\n\n    // Skip (MutationObserver)\n    // 16. For each inclusive ancestor inclusiveAncestor of parent, if inclusiveAncestor \n    // has any registered observers whose options' subtree is true, then for each such registered \n    // observer registered, append a transient registered observer whose observer and options are \n    // identical to those of registered and source which is registered to nodes list of registered observers.\n    // 17. If suppress observers flag is unset, queue a mutation record of \"childList\" for parent \n    // with removedNodes a list solely containing node, nextSibling oldNextSibling, and previousSibling \n    // oldPreviousSibling.\n}"]}