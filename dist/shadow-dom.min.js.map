{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src\\interfaces\\Attr.js","src\\interfaces\\CharacterData.js","src\\interfaces\\CustomEvent.js","src\\interfaces\\Document.js","src\\interfaces\\Element.js","src\\interfaces\\Event.js","src\\interfaces\\EventTarget.js","src\\interfaces\\HTMLSlotElement.js","src\\interfaces\\HTMLTableElement.js","src\\interfaces\\HTMLTableRowElement.js","src\\interfaces\\HTMLTableSectionElement.js","src\\interfaces\\MutationObserver.js","src\\interfaces\\NamedNodeMap.js","src\\interfaces\\Node.js","src\\interfaces\\ShadowRoot.js","src\\interfaces\\Text.js","src\\main.js","src\\mixins\\ChildNode.js","src\\mixins\\DocumentOrShadowRoot.js","src\\mixins\\NonDocumentTypeChildNode.js","src\\mixins\\NonElementParentNode.js","src\\mixins\\ParentNode.js","src\\mixins\\Slotable.js","src\\patch.js","src\\utils.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","b","call","exports","length","1","module","_interopRequireWildcard","__esModule","Object","prototype","hasOwnProperty","default","_classCallCheck","TypeError","defineProperty","_createClass","enumerable","configurable","writable","key","_utils","$","_class","this","j","descriptors","Attr","value","get","m","setExistingAttributeValue","getData","CharacterData","data","replaceData","bubbles","cancelable","composed","detail","document","createEvent","initCustomEvent","shadow","Document","getElementsByTagName","filterByRoot","getElementsByTagNameNS","getElementsByClassName","name","nodeType","Node","DOCUMENT_NODE","isShadowRoot","makeError","clone","_interopRequireDefault","d","_ShadowRoot","_ShadowRoot2","Element","attributes","getNamedItem","changeAttribute","ownerDocument","createAttribute","set","appendAttribute","createAttributeNS","setAttributeValue","localName","prefix","namespaceURI","removeAttributeByName","removeAttributeByNamespace","setAttribute","ownerElement","removeAttribute","mode","isValidCustomElementName","shadowRoot","createDocumentFragment","extend","host","childNodes","slice","removeChild","parentNode","matches","parentElement","insertAdjacent","createTextNode","parseHTMLFragment","getAttribute","element","serializeHTMLFragment","replaceAll","fa","DOCUMENT_FRAGMENT_NODE","createElement","replace","hasRelatedTarget","initEvent","stopPropagation","stopImmediatePropagationFlag","currentTarget","path","Window","closedShadowHidden","shadowIncludingRoot","push","target","builtInComposedEvents","indexOf","type","relatedTarget","calculatePath","Event","FocusEvent","MouseEvent","retarget","getTheParent","shadowIncludingInclusiveAncestor","root","defaultView","_slicedToArray","assignedSlot","calculateRelatedTarget","calculateTarget","Symbol","iterator","next","done","return","Array","isArray","_typeof","constructor","Sa","addEventListener","Ta","removeEventListener","Ua","dispatchEvent","Va","capture","once","passive","EventListenerCollection","create","addListener","attach","removeListener","empty","detach","hostListeners","shadowListeners","callback","eventPhase","CAPTURING_PHASE","invokeListeners","AT_TARGET","getListeners","BUBBLING_PHASE","listeners","splice","calculatedPath","c","stopImmediatePropagation","flatten","findFlattenedSlotables","assignedNodes","caption","remove","tHead","tFoot","rows","cells","createMutationObserver","observer","interface","observe","disconnect","queue","ancestorOf","preceding","reverse","Math","abs","min","elementTextContent","ELEMENT_NODE","TEXT_NODE","hasChildNodes","nextSibling","normalize","DOCUMENT_TYPE_NODE","publicId","systemId","ATTRIBUTE_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","isEqualNode","atttributes","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_DISCONNECTED","preInsert","append","preRemove","firstChild","lastChild","previousSibling","nodeValue","insert","_patch","_patch2","nativeShadowDom","window","forceShadowDomPolyfill","arguments","convertNodesIntoANode","native","activeElement","dc","descriptor","fc","previousElementSibling","nextElementSibling","gc","test","serializeIdentifier","querySelectorAll","CSS","escape","charCodeAt","toString","charAt","jc","kc","lc","mc","nc","oc","pop","recursed","node","children","firstElementChild","lastElementChild","childElementCount","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","_Attr2","_CharacterData2","CustomEvent","_CustomEvent2","_Document2","_Element2","_Event2","_Event","EventTarget","_EventTarget2","HTMLSlotElement","HTMLUnknownElement","_HTMLSlotElement2","HTMLTableElement","_HTMLTableElement2","HTMLTableRowElement","_HTMLTableRowElement2","HTMLTableSectionElement","_HTMLTableSectionElement2","MutationObserver","_MutationObserver2","NamedNodeMap","_NamedNodeMap2","_Node2","Text","_Text2","DocumentType","_ChildNode2","_DocumentOrShadowRoot2","_NonDocumentTypeChildNode2","_NonElementParentNode2","DocumentFragment","_ParentNode2","_Slotable2","HTMLElement","innerHTML","outerHTML","insertAdjacentText","insertAdjacentElement","insertAdjacentHTML","_Attr","_CharacterData","_CustomEvent","_Document","_Element","_EventTarget","_HTMLSlotElement","_HTMLTableElement","_HTMLTableRowElement","_HTMLTableSectionElement","_MutationObserver","_NamedNodeMap","_Node","_Text","_ChildNode","_DocumentOrShadowRoot","_NonDocumentTypeChildNode","_NonElementParentNode","_ParentNode","_Slotable","_toConsumableArray","from","reportError","console","error","getOwnPropertyNames","getOwnPropertyDescriptor","_shadow","nodeName","appendChild","content","qualifiedName","p","descendant","inclusiveDescendant","ancestor","inclusiveAncestor","cloneNode","adopt","hostIncludingInclusiveAncestor","shadowIncludingDescendant","shadowIncludingInclusiveDescendant","shadowIncludingAncestor","updateSlotName","assignSlotablesForATree","updateSlotableName","assignSlotables","assignASlot","attributeChangeSteps","queueMutationRecord","ed","fd","setAttributeNodeNS","removeAttributeNode","replaceAttribute","attribute","getNamedItemNS","toLowerCase","findASlot","slot","findSlotables","apply","concat","signalASlotChange","setImmediate","signalSlotList","queueMutationObserverCompoundMicrotask","ensurePreInsertionValidity","kd","insertBefore","md","Fb","Yb","observers","options","subtree","v","createTransientObserver","mutationObservers","getOrCreateNodeObservers","Bb","qd","zb","nodes","rd","pd","Ab","instance","xb","attributeFilter","namespace","characterData","childList","attributeOldValue","characterDataOldValue","oldValue","h","g","Ea","Da","xd","yd","theEmptyList","attributeName","attributeNamespace","addedNodes","freeze","removedNodes","N","mutationObserverCompoundMicrotaskQueuedFlag","notifyMutationObservers","k","q","A","cc","z","C","D","M","L","wc","Y","gd","hd","Ga","za","Ha","Fa","Ia","ga","ia","Eb","Wb","Xb","Zb","Rd","dd","ld","ha","ad","setTimeout"],"mappings":"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","file":"./dist/shadow-dom.min.js.map","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-attr\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'value',\n        get: function get() {\n            return $.descriptors.Attr.value.get.call(this);\n        }\n\n        // TODO: MutationObserver tests\n        ,\n        set: function set(value) {\n            $.setExistingAttributeValue(this, value);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-characterdata\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar getData = $.descriptors.CharacterData.data.get;\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'appendData',\n\n\n        // TODO: MutationObserver tests\n        value: function appendData(data) {\n            var length = getData.call(this).length;\n            $.replaceData(this, length, 0, data);\n        }\n\n        // TODO: MutationObserver tests\n\n    }, {\n        key: 'insertData',\n        value: function insertData(offset, data) {\n            $.replaceData(this, offset, 0, data);\n        }\n\n        // TODO: MutationObserver tests\n\n    }, {\n        key: 'deleteData',\n        value: function deleteData(offset, count) {\n            $.replaceData(this, offset, count, '');\n        }\n\n        // TODO: MutationObserver tests\n\n    }, {\n        key: 'replaceData',\n        value: function replaceData(offset, count, data) {\n            $.replaceData(this, offset, count, data);\n        }\n    }, {\n        key: 'data',\n        get: function get() {\n            return getData.call(this);\n        },\n        set: function set(value) {\n            var length = getData.call(this).length;\n            $.replaceData(this, 0, length, value);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } // https://dom.spec.whatwg.org/#interface-customevent\n\nvar _class = function _class(type, init) {\n    _classCallCheck(this, _class);\n\n    var bubbles = false;\n    var cancelable = false;\n    var composed = false;\n    var detail = null;\n    if (init) {\n        bubbles = init.bubbles === true;\n        cancelable = init.cancelable === true;\n        composed = init.composed === true;\n        detail = init.detail || null;\n    }\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, bubbles, cancelable, detail);\n    $.shadow(event).composed = composed;\n    return event;\n};\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-document\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'getElementsByTagName',\n\n\n        // TODO: tests\n        value: function getElementsByTagName(qualifiedName) {\n            var results = $.descriptors.Document.getElementsByTagName.value.call(this, qualifiedName);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByTagNameNS',\n        value: function getElementsByTagNameNS(ns, localName) {\n            var results = $.descriptors.Document.getElementsByTagNameNS.value.call(this, ns, localName);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByClassName',\n        value: function getElementsByClassName(names) {\n            var results = $.descriptors.Document.getElementsByClassName.value.call(this, name);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'importNode',\n        value: function importNode(node, deep) {\n            if (node.nodeType === Node.DOCUMENT_NODE || $.isShadowRoot(node)) {\n                throw $.makeError('NotSupportedError');\n            }\n\n            return $.clone(node, this, deep);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _ShadowRoot = require('../interfaces/ShadowRoot.js');\n\nvar _ShadowRoot2 = _interopRequireDefault(_ShadowRoot);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'setAttribute',\n\n\n        // TODO: tests\n        value: function setAttribute(qualifiedName, value) {\n            var attribute = $.descriptors.Element.attributes.get.call(this).getNamedItem(qualifiedName);\n            if (!attribute) {\n                attribute = this.ownerDocument.createAttribute(qualifiedName);\n                $.descriptors.Attr.value.set.call(attribute, value);\n                $.appendAttribute(attribute, this);\n                return;\n            }\n            $.changeAttribute(attribute, this, value);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'setAttributeNS',\n        value: function setAttributeNS(namespace, qualifiedName, value) {\n            var dummy = document.createAttributeNS(namespace, qualifiedName);\n            $.setAttributeValue(this, dummy.localName, value, dummy.prefix, dummy.namespaceURI);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'removeAttribute',\n        value: function removeAttribute(qualifiedName) {\n            $.removeAttributeByName(qualifiedName, this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'removeAttributeNS',\n        value: function removeAttributeNS(namespace, localName) {\n            $.removeAttributeByNamespace(namespace, localName, this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'setAttributeNode',\n        value: function setAttributeNode(attr) {\n            return $.setAttribute(attr, this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'setAttributeNodeNS',\n        value: function setAttributeNodeNS(attr) {\n            return $.setAttribute(attr, this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'removeAttributeNode',\n        value: function removeAttributeNode(attr) {\n            if (attr.ownerElement !== this) {\n                throw $.makeError('NotFoundError');\n            }\n            $.removeAttribute(attr, this);\n            return attr;\n        }\n    }, {\n        key: 'attachShadow',\n        value: function attachShadow(init) {\n            // https://dom.spec.whatwg.org/#dom-element-attachshadow\n            if (!init || init.mode !== 'open' && init.mode !== 'closed') {\n                throw $.makeError('TypeError');\n            }\n\n            if (this.namespaceURI !== 'http://www.w3.org/1999/xhtml') {\n                throw $.makeError('NotSupportedError');\n            }\n\n            switch (this.localName) {\n                case \"article\":case \"aside\":case \"blockquote\":case \"body\":\n                case \"div\":case \"footer\":case \"h1\":case \"h2\":case \"h3\":\n                case \"h4\":case \"h5\":case \"h6\":case \"header\":case \"main\":\n                case \"nav\":case \"p\":case \"section\":case \"span\":\n                    break;\n                default:\n                    if ($.isValidCustomElementName(this.localName)) {\n                        break;\n                    }\n                    throw $.makeError('NotSupportedError');\n            }\n\n            if (this.shadowRoot) {\n                throw $.makeError('InvalidStateError');\n            }\n\n            var shadow = this.ownerDocument.createDocumentFragment();\n\n            $.extend(shadow, _ShadowRoot2.default);\n\n            var shadowState = $.shadow(shadow);\n\n            shadowState.host = this;\n            shadowState.mode = init.mode;\n            shadowState.childNodes = [];\n\n            var childNodes = $.descriptors.Node.childNodes.get.call(this);\n            var hostState = $.shadow(this);\n\n            hostState.shadowRoot = shadow;\n            hostState.childNodes = $.slice(this.childNodes);\n\n            var removeChild = $.descriptors.Node.removeChild.value;\n            for (var i = 0; i < childNodes.length; i++) {\n                var childNode = childNodes[i];\n                $.shadow(childNode).parentNode = this;\n                removeChild.call(this, childNode);\n            }\n\n            return shadow;\n        }\n    }, {\n        key: 'closest',\n\n\n        // TODO: tests\n        value: function closest(selectors) {\n            var element = this;\n\n            do {\n                if (element.matches(selectors)) {\n                    return element;\n                }\n            } while (element = element.parentElement);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByTagName',\n        value: function getElementsByTagName(qualifiedName) {\n            var results = $.descriptors.Element.getElementsByTagName.value.call(this, qualifiedName);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByTagNameNS',\n        value: function getElementsByTagNameNS(ns, localName) {\n            var results = $.descriptors.Element.getElementsByTagNameNS.value.call(this, ns, localName);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByClassName',\n        value: function getElementsByClassName(names) {\n            var results = $.descriptors.Element.getElementsByClassName.value.call(this, name);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'insertAdjacentElement',\n        value: function insertAdjacentElement(where, element) {\n            // https://dom.spec.whatwg.org/#dom-element-insertadjacentelement\n            return $.insertAdjacent(this, where, element);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'insertAdjacentText',\n        value: function insertAdjacentText(where, data) {\n            // https://dom.spec.whatwg.org/#dom-element-insertadjacenttext\n            var text = this.ownerDocument.createTextNode(data);\n            $.insertAdjacent(this, where, text);\n            return;\n        }\n\n        // https://w3c.github.io/DOM-Parsing/#extensions-to-the-element-interface\n\n        // TODO: more thorough tests of the serialization\n\n    }, {\n        key: 'insertAdjacentHTML',\n\n\n        // TODO: tests\n        value: function insertAdjacentHTML(position, text) {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-insertadjacenthtml\n            // We aren't going to go exactly by the books for this one.\n            var fragment = $.parseHTMLFragment(text, this);\n            $.insertAdjacent(this, position, fragment);\n        }\n    }, {\n        key: 'slot',\n        get: function get() {\n            // The slot attribute must reflect the \"slot\" content attribute.\n            return this.getAttribute('slot');\n        }\n\n        // TODO: tests\n        ,\n        set: function set(value) {\n            $.setAttributeValue(this, 'slot', value);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'attributes',\n        get: function get() {\n            var attributes = $.descriptors.Element.attributes.get.call(this);\n            $.shadow(attributes).element = this;\n            return attributes;\n        }\n    }, {\n        key: 'shadowRoot',\n        get: function get() {\n            // https://dom.spec.whatwg.org/#dom-element-shadowroot\n\n            var shadowRoot = $.shadow(this).shadowRoot;\n\n            if (!shadowRoot || shadowRoot.mode === 'closed') {\n                return null;\n            }\n\n            return shadowRoot;\n        }\n    }, {\n        key: 'innerHTML',\n        get: function get() {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-innerhtml\n            return $.serializeHTMLFragment(this);\n        }\n\n        // TODO: MutationObserver tests\n        ,\n        set: function set(value) {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-innerhtml\n            var fragment = $.parseHTMLFragment(value, this);\n            $.replaceAll(fragment, this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'outerHTML',\n        get: function get() {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-outerhtml\n            return $.serializeHTMLFragment({ childNodes: [this] });\n        }\n\n        // TODO: tests\n        ,\n        set: function set(value) {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-outerhtml\n            var parent = this.parentNode;\n            if (parent === null) {\n                return;\n            }\n            if (parent.nodeType === Node.DOCUMENT_NODE) {\n                throw $.makeError('NoModificationAllowedError');\n            }\n            if (parent.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n                parent = this.ownerDocument.createElement('body');\n            }\n            var fragment = $.parseHTMLFragment(value, parent);\n            $.replace(this, fragment, this.parentNode);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.hasRelatedTarget = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-event\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class(type, init) {\n        _classCallCheck(this, _class);\n\n        var bubbles = false;\n        var cancelable = false;\n        var composed = false;\n        if (init) {\n            bubbles = init.bubbles === true;\n            cancelable = init.cancelable === true;\n            composed = init.composed === true;\n        }\n        var event = document.createEvent('event');\n        event.initEvent(type, bubbles, cancelable);\n        $.shadow(event).composed = composed;\n        return event;\n    }\n\n    _createClass(_class, [{\n        key: 'stopImmediatePropagation',\n        value: function stopImmediatePropagation() {\n            this.stopPropagation();\n            $.shadow(this).stopImmediatePropagationFlag = true;\n        }\n    }, {\n        key: 'composedPath',\n        value: function composedPath() {\n            // https://dom.spec.whatwg.org/#dom-event-composedpath\n\n            // 1. Let composedPath be a new empty list.\n            var composedPath = [];\n\n            // 2. Let currentTarget be context objects currentTarget attribute value.\n            var currentTarget = this.currentTarget;\n\n            // 3. For each tuple in context objects path:\n            var path = $.shadow(this).path || [];\n\n            for (var i = 0; i < path.length; i++) {\n                var item = path[i][0];\n                if (currentTarget instanceof Window) {\n                    if (!(item instanceof Node) || !$.closedShadowHidden(item, $.shadowIncludingRoot(item))) {\n                        composedPath.push(item);\n                    }\n                } else if (currentTarget instanceof Node) {\n                    if (!$.closedShadowHidden(item, currentTarget)) {\n                        composedPath.push(item);\n                    }\n                } else {\n                    composedPath.push(item);\n                }\n            }\n\n            // 4. return composedPath.\n            return composedPath.slice();\n        }\n    }, {\n        key: 'currentTarget',\n        get: function get() {\n            return $.shadow(this).currentTarget;\n        }\n    }, {\n        key: 'target',\n        get: function get() {\n            return $.shadow(this).target;\n        }\n    }, {\n        key: 'composed',\n        get: function get() {\n            // TODO: Compare against the actual prototype instead of just the type strings\n            return $.shadow(this).composed || builtInComposedEvents.indexOf(this.type) !== -1;\n        }\n    }]);\n\n    return _class;\n}();\n\n// FocusEvent:\n// relatedTarget will be the element losing or gaining focus\n// MouseEvent:\n// relatedTarget will be the element being moved into or out of\n\n\nexports.default = _class;\n\nvar hasRelatedTarget = exports.hasRelatedTarget = function () {\n    function hasRelatedTarget() {\n        _classCallCheck(this, hasRelatedTarget);\n    }\n\n    _createClass(hasRelatedTarget, [{\n        key: 'relatedTarget',\n        get: function get() {\n            return $.shadow(this).relatedTarget;\n        }\n    }]);\n\n    return hasRelatedTarget;\n}();\n\n;\n\nvar builtInComposedEvents = [\n// FocusEvent\n'blur', 'focus', 'focusin', 'focusout',\n// MouseEvent\n'click', 'dblclick', 'mousedown', 'mouseenter', 'mouseleave', 'mousemove', 'mouseout', 'mouseover', 'mouseup',\n// WheelEvent\n'wheel',\n// InputEvent\n'beforeinput', 'input',\n// KeyboardEvent\n'keydown', 'keyup',\n// CompositionEvent\n'compositionstart', 'compositionupdate', 'compositionend',\n// Legacy UIEvent\n'DOMActivate',\n// Legacy FocusEvent\n'DOMFocusIn', 'DOMFocusOut',\n// Legacy KeyboardEvent\n'keypress'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-eventtarget\n\nexports.default = function (base) {\n\n    var native = {\n        addEventListener: base.prototype.addEventListener,\n        removeEventListener: base.prototype.removeEventListener,\n        dispatchEvent: base.prototype.dispatchEvent\n    };\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'addEventListener',\n            value: function addEventListener(type, callback, options) {\n                if (typeof callback !== 'function') {\n                    return;\n                }\n\n                var listener = { callback: callback };\n                var capture = false;\n\n                if (typeof options === 'boolean') {\n                    capture = options;\n                } else if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n                    capture = options.capture === true;\n                    listener.once = options.once === true;\n                    // we don't do anything with passive.\n                    listener.passive = options.passive === true;\n                }\n\n                var collection = EventListenerCollection.get(this, type, capture) || EventListenerCollection.create(this, type, capture);\n\n                collection.addListener(this, listener);\n                collection.attach(native.addEventListener);\n            }\n        }, {\n            key: 'removeEventListener',\n            value: function removeEventListener(type, callback, options) {\n                if (typeof callback !== 'function') {\n                    return;\n                }\n\n                var listener = { callback: callback };\n                var capture = false;\n\n                if (typeof options === 'boolean') {\n                    capture = options;\n                } else if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n                    capture = options.capture === true;\n                }\n\n                var collection = EventListenerCollection.get(this, type, capture);\n\n                if (!collection) {\n                    return;\n                }\n\n                collection.removeListener(this, listener);\n\n                if (collection.empty) {\n                    collection.detach(native.removeEventListener);\n                }\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar EventListenerCollection = function () {\n    _createClass(EventListenerCollection, null, [{\n        key: 'get',\n        value: function get(target, type, capture) {\n            var nativeTarget = $.shadow(target).host || target;\n            var collections = $.shadow(nativeTarget).listeners;\n            if (!(collections instanceof Array)) {\n                return null;\n            }\n            for (var i = 0; i < collections.length; i++) {\n                var collection = collections[i];\n                if (collection.target === nativeTarget && collection.type === type && collection.capture === capture) {\n                    return collection;\n                }\n            }\n            return null;\n        }\n    }, {\n        key: 'create',\n        value: function create(target, type, capture) {\n            var nativeTarget = $.shadow(target).host || target;\n            var nativeTargetState = $.shadow(nativeTarget);\n            var collections = nativeTargetState.listeners;\n            if (!(collections instanceof Array)) {\n                collections = nativeTargetState.listeners = [];\n            }\n            var collection = new EventListenerCollection(nativeTarget, type, capture);\n            collections.push(collection);\n            return collection;\n        }\n    }]);\n\n    function EventListenerCollection(target, type, capture) {\n        var _this = this;\n\n        _classCallCheck(this, EventListenerCollection);\n\n        this.target = $.shadow(target).host || target;\n        this.type = type;\n        this.capture = capture;\n\n        this.hostListeners = [];\n        this.shadowListeners = [];\n\n        this.callback = function (event) {\n            var shadowRoot = $.shadow(_this.target).shadowRoot;\n            switch (event.eventPhase) {\n                case Event.prototype.CAPTURING_PHASE:\n                    _this.invokeListeners(event, _this.target, _this.hostListeners);\n                    if (shadowRoot) {\n                        _this.invokeListeners(event, shadowRoot, _this.shadowListeners);\n                    }\n                    break;\n                case Event.prototype.AT_TARGET:\n                    var nativeTarget = $.descriptors.Event.target.get.call(event);\n                    _this.invokeListeners(event, nativeTarget, _this.getListeners(nativeTarget));\n                    break;\n                case Event.prototype.BUBBLING_PHASE:\n                    if (shadowRoot) {\n                        _this.invokeListeners(event, shadowRoot, _this.shadowListeners);\n                    }\n                    _this.invokeListeners(event, _this.target, _this.hostListeners);\n                    break;\n            }\n        };\n    }\n\n    _createClass(EventListenerCollection, [{\n        key: 'getListeners',\n        value: function getListeners(target) {\n            return $.shadow(target).host ? this.shadowListeners : this.hostListeners;\n        }\n    }, {\n        key: 'addListener',\n        value: function addListener(target, listener) {\n            var listeners = this.getListeners(target);\n\n            for (var i = 0; i < listeners.length; i++) {\n                if (listener.callback === listeners[i].callback) {\n                    return;\n                }\n            }\n\n            listeners.push(listener);\n        }\n    }, {\n        key: 'removeListener',\n        value: function removeListener(target, listener) {\n            var listeners = this.getListeners(target);\n\n            for (var i = 0; i < listeners.length; i++) {\n                var other = listeners[i];\n                if (listener.callback === other.callback) {\n                    listeners.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    }, {\n        key: 'invokeListeners',\n        value: function invokeListeners(event, currentTarget, listeners) {\n            var eventState = $.shadow(event);\n            var path = eventState.calculatedPath;\n\n            if (!path) {\n                path = eventState.calculatedPath = calculatePath(event);\n            }\n\n            var target = calculateTarget(currentTarget, path);\n\n            // if there is no target, the event is not composed and should be stopped\n            if (!target) {\n                event.stopImmediatePropagation();\n            } else {\n                var relatedTarget = calculateRelatedTarget(currentTarget, path);\n                var remove = [];\n\n                eventState.path = path;\n                eventState.currentTarget = currentTarget;\n                eventState.target = target;\n                eventState.relatedTarget = relatedTarget;\n\n                for (var i = 0; i < listeners.length; i++) {\n                    var listener = listeners[i];\n                    var result = listener.callback.call(currentTarget, event);\n                    if (listener.once) {\n                        remove.push(listener);\n                    }\n                    if (eventState.stopImmediatePropagationFlag) {\n                        break;\n                    }\n                }\n\n                eventState.path = null;\n                eventState.currentTarget = null;\n\n                for (var _i = 0; _i < remove.length; _i++) {\n                    var index = listeners.indexOf(remove[_i]);\n                    listeners.splice(index, 1);\n                }\n            }\n        }\n    }, {\n        key: 'attach',\n        value: function attach(descriptor) {\n            descriptor.call(this.target, this.type, this.callback, this.capture);\n        }\n    }, {\n        key: 'detach',\n        value: function detach(descriptor) {\n            descriptor.call(this.target, this.type, this.callback, this.capture);\n        }\n    }, {\n        key: 'empty',\n        get: function get() {\n            return this.hostListeners.length === 0 && this.shadowListeners.length === 0;\n        }\n    }]);\n\n    return EventListenerCollection;\n}();\n\nfunction calculatePath(event) {\n    // https://dom.spec.whatwg.org/#concept-event-dispatch\n\n    var path = [];\n\n    var target = $.descriptors.Event.target.get.call(event);\n\n    var relatedTargetDescriptor = null;\n\n    if (event instanceof FocusEvent) {\n        relatedTargetDescriptor = $.descriptors.FocusEvent.relatedTarget;\n    } else if (event instanceof MouseEvent) {\n        relatedTargetDescriptor = $.descriptors.MouseEvent.relatedTarget;\n    }\n\n    // Skip (native)\n    // 1. Set events dispatch flag.\n\n    // 2. Let targetOverride be target, if legacy target override flag is \n    // not given, and targets associated Document otherwise. \n    var targetOverride = target;\n\n    // 3. Let relatedTarget be the result of retargeting events relatedTarget \n    // against target if events relatedTarget is non-null, and null otherwise.\n    var originalRelatedTarget = null;\n    var relatedTarget = null;\n    if (relatedTargetDescriptor) {\n        originalRelatedTarget = relatedTargetDescriptor.get.call(event);\n        if (originalRelatedTarget) {\n            relatedTarget = $.retarget(originalRelatedTarget, target);\n        }\n    }\n\n    // Skip (native)\n    // 4. If target is relatedTarget and target is not events relatedTarget, then return true.\n\n    // 5. Append (target, targetOverride, relatedTarget) to events path.\n    path.push([target, targetOverride, relatedTarget]);\n\n    // Skip (native)\n    // 6. Let isActivationEvent be true, if event is a MouseEvent object and \n    // events type attribute is \"click\", and false otherwise.\n    // 7. Let activationTarget be target, if isActivationEvent is true and \n    //target has activation behavior, and null otherwise.\n\n    // 8. Let parent be the result of invoking targets get the parent with event.\n    var parent = getTheParent(target, event);\n\n    // 9. While parent is non-null:\n    while (parent != null) {\n        // 1. Let relatedTarget be the result of retargeting events relatedTarget\n        // against parent if events relatedTarget is non-null, and null otherwise.\n        if (originalRelatedTarget) {\n            relatedTarget = $.retarget(originalRelatedTarget, parent);\n        }\n        // 2. If targets root is a shadow-including inclusive ancestor of parent, then... \n        // append (parent, null, relatedTarget) to events path.\n        if ($.shadowIncludingInclusiveAncestor($.root(target), parent)) {\n            path.push([parent, null, relatedTarget]);\n        }\n        // 3. Otherwise, if parent and relatedTarget are identical, then set parent to null.\n        else if (parent === relatedTarget) {\n                parent = null;\n            }\n            // 4. Otherwise, set target to parent and then... \n            // append (parent, target, relatedTarget) to events path.\n            else {\n                    target = parent;\n                    path.push([parent, target, relatedTarget]);\n                }\n        // 5. If parent is non-null, then set parent to the result of \n        // invoking parents get the parent with event.\n        if (parent != null) {\n            parent = getTheParent(parent, event);\n        }\n    }\n\n    return path;\n}\n\nfunction getTheParent(node, event) {\n    // https://dom.spec.whatwg.org/#get-the-parent\n    // Each EventTarget object also has an associated get the parent \n    // algorithm, which takes an event event, and returns an EventTarget \n    // object. Unless specified otherwise it returns null.\n\n    // A nodes get the parent algorithm, given an event, \n    // returns the nodes assigned slot, if node is assigned, \n    // and nodes parent otherwise.\n\n    // A documents get the parent algorithm, given an event, returns null if events \n    // type attribute value is \"load\" or document does not have a browsing context, \n    // and the documents associated Window object otherwise.\n\n    // A shadow roots get the parent algorithm, given an event, returns null if \n    // events composed flag is unset and shadow root is the root of events \n    // paths first tuples item, and shadow roots host otherwise.\n\n    if (node instanceof Node) {\n        if (node.nodeType === Node.DOCUMENT_NODE) {\n            if (event.type === 'load') {\n                // or browsing context?\n                return null;\n            }\n            return node.defaultView;\n        } else if ($.isShadowRoot(node)) {\n            if (!event.composed) {\n                var _$$shadow$path$ = _slicedToArray($.shadow(event).path[0], 1),\n                    item = _$$shadow$path$[0];\n\n                if ($.root(item) === node) {\n                    return null;\n                }\n            }\n            return node.host;\n        }\n        return node.assignedSlot || node.parentNode;\n    }\n\n    return null;\n}\n\nfunction calculateRelatedTarget(currentTarget, path) {\n    for (var i = 0; i < path.length; i++) {\n        var _path$i = _slicedToArray(path[i], 3),\n            item = _path$i[0],\n            relatedTarget = _path$i[2];\n\n        if (item === currentTarget) {\n            return relatedTarget;\n        }\n    }\n    return null;\n}\n\nfunction calculateTarget(currentTarget, path) {\n    for (var i = 0; i < path.length; i++) {\n        var _path$i2 = _slicedToArray(path[i], 1),\n            item = _path$i2[0];\n\n        if (item === currentTarget) {\n            for (var j = i; j >= 0; j--) {\n                var _path$j = _slicedToArray(path[j], 2),\n                    target = _path$j[1];\n\n                if (target != null) {\n                    return target;\n                }\n            }\n            return null;\n        }\n    }\n    return null;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://html.spec.whatwg.org/multipage/scripting.html#the-slot-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'assignedNodes',\n\n\n        // TODO: tests\n        value: function assignedNodes(options) {\n            if (this.localName !== 'slot') {\n                return;\n            }\n\n            // https://html.spec.whatwg.org/multipage/scripting.html#dom-slot-assignednodes\n            // The assignedNodes(options) method, when invoked, must run these steps:\n\n            // 1. If the value of options's flatten member is false, then return this element's assigned nodes.\n            if (!options || options.flatten !== true) {\n                return $.shadow(this).assignedNodes || [];\n            }\n\n            // 2. Return the result of finding flattened slotables with this element.\n            return $.findFlattenedSlotables(this);\n        }\n    }, {\n        key: 'name',\n\n\n        // TODO: tests\n        get: function get() {\n            if (this.localName !== 'slot') {\n                return;\n            }\n\n            return this.getAttribute('name');\n        }\n\n        // TODO: tests\n        ,\n        set: function set(value) {\n            if (this.localName !== 'slot') {\n                return;\n            }\n\n            $.setAttributeValue(this, 'name', value);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://www.w3.org/TR/html5/single-page.html#the-table-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'deleteCaption',\n\n\n        // TODO: tests\n        value: function deleteCaption() {\n            var caption = this.caption;\n            if (caption) {\n                $.remove(caption, this);\n            }\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'deleteTHead',\n        value: function deleteTHead() {\n            var tHead = this.tHead;\n            if (tHead) {\n                $.remove(tHead, this);\n            }\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'deleteTFoot',\n        value: function deleteTFoot() {\n            var tFoot = this.tFoot;\n            if (tFoot) {\n                $.remove(tFoot, this);\n            }\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'deleteRow',\n        value: function deleteRow(index) {\n            // https://www.w3.org/TR/html5/single-page.html#dom-table-deleterow\n            if (index === -1) {\n                index = this.rows.length - 1;\n            }\n            if (index < 0 || index >= this.rows.length) {\n                throw $.makeError('IndexSizeError');\n            }\n            this.rows[index].remove();\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://www.w3.org/TR/html5/single-page.html#the-tr-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'deleteCell',\n\n\n        // TODO: tests\n        value: function deleteCell(index) {\n            // https://www.w3.org/TR/html5/single-page.html#dom-tr-deletecell\n            if (index === -1) {\n                index = this.cells.length - 1;\n            }\n            if (index < 0 || index >= this.cells.length) {\n                throw $.makeError('IndexSizeError');\n            }\n            this.cells[index].remove();\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://www.w3.org/TR/html5/single-page.html#the-tbody-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'deleteRow',\n\n\n        // TODO: tests\n        value: function deleteRow(index) {\n            // https://www.w3.org/TR/html5/single-page.html#dom-tbody-deleterow\n            if (index < 0 || index >= this.rows.length) {\n                throw $.makeError('IndexSizeError');\n            }\n            this.rows[index].remove();\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-mutationobserver\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class(callback) {\n        _classCallCheck(this, _class);\n\n        var observer = $.createMutationObserver(callback);\n        $.shadow(this).observer = observer;\n        observer.interface = this;\n    }\n\n    _createClass(_class, [{\n        key: 'observe',\n        value: function observe(target, options) {\n            $.shadow(this).observer.observe(target, options);\n        }\n    }, {\n        key: 'disconnect',\n        value: function disconnect() {\n            $.shadow(this).observer.disconnect();\n        }\n    }, {\n        key: 'takeRecords',\n        value: function takeRecords() {\n            var records = $.shadow(this).observer.queue;\n            return records.splice(0, records.length);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-namednodemap\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'setNamedItem',\n\n\n        // todo: tests\n        value: function setNamedItem(attr) {\n            return $.setAttribute(attr, $.shadow(this).element);\n        }\n\n        // todo: tests\n\n    }, {\n        key: 'setNamedItemNS',\n        value: function setNamedItemNS(attr) {\n            return $.setAttribute(attr, $.shadow(this).element);\n        }\n\n        // todo: tests\n\n    }, {\n        key: 'removeNamedItem',\n        value: function removeNamedItem(qualifiedName) {\n            var attr = $.removeAttributeByName(qualifiedName, $.shadow(this).element);\n            if (!attr) {\n                throw $.makeError('NotFoundError');\n            }\n            return attr;\n        }\n\n        // todo: tests\n\n    }, {\n        key: 'removeNamedItemNS',\n        value: function removeNamedItemNS(namespace, localName) {\n            var attr = $.removeAttributeByNamespace(namespace, localName, $.shadow(this).element);\n            if (!attr) {\n                throw $.makeError('NotFoundError');\n            }\n            return attr;\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-node\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'getRootNode',\n        value: function getRootNode(options) {\n            var composed = options && options.composed === true;\n            return composed ? $.shadowIncludingRoot(this) : $.root(this);\n        }\n    }, {\n        key: 'hasChildNodes',\n\n\n        // TODO: tests\n        value: function hasChildNodes() {\n            var childNodes = $.shadow(this).childNodes;\n            if (childNodes) {\n                return childNodes.length > 0;\n            }\n\n            return $.descriptors.Node.hasChildNodes.value.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'normalize',\n\n\n        // TODO: tests\n        value: function normalize() {\n            // https://dom.spec.whatwg.org/#dom-node-normalize\n            // The normalize() method, when invoked, must run these steps \n            // for each descendant exclusive Text node node of context object:\n            var childNodes = this.childNodes;\n            var dataDescriptor = $.descriptors.CharacterData.data;\n            for (var i = 0; i < childNodes.length; i++) {\n                var childNode = childNodes[i];\n                if (childNode.nodeType === Node.TEXT_NODE) {\n                    var length = dataDescriptor.get.call(childNode).length;\n                    if (length === 0) {\n                        $.remove(childNode, this);\n                        continue;\n                    }\n                    var data = '';\n                    var contiguousTextNodes = [];\n                    var next = childNode;\n                    while (next = next.nextSibling && next.nodeType === Node.TEXT_NODE) {\n                        data += dataDescriptor.get.call(next);\n                        contiguousTextNodes.push(next);\n                    }\n                    $.replaceData(childNode, length, 0, data);\n                    // TODO: (Range)\n                    for (var j = 0; j < contiguousTextNodes.length; j++) {\n                        $.remove(contiguousTextNodes[j], this);\n                    }\n                } else {\n                    childNode.normalize();\n                }\n            }\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'cloneNode',\n        value: function cloneNode(deep) {\n            // https://dom.spec.whatwg.org/#dom-node-clonenode\n            // The cloneNode(deep) method, when invoked, must run these steps:\n\n            // 1. If context object is a shadow root, then throw a NotSupportedError.\n            if ($.isShadowRoot(this)) {\n                throw $.makeError('NotSupportedError');\n            }\n\n            // 2. Return a clone of the context object, with the clone children flag set if deep is true.\n            return $.clone(this, undefined, deep);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'isEqualNode',\n        value: function isEqualNode(other) {\n            // https://dom.spec.whatwg.org/#dom-node-isequalnode\n            // https://dom.spec.whatwg.org/#concept-node-equals\n            if (!other) {\n                return false;\n            }\n\n            if (this.nodeType !== other.nodeType) {\n                return false;\n            }\n\n            var thisAttributes = void 0;\n            var otherAttributes = void 0;\n\n            switch (this.nodeType) {\n                case Node.DOCUMENT_TYPE_NODE:\n                    if (this.name !== other.name || this.publicId !== other.publicId || this.systemId !== other.systemId) {\n                        return false;\n                    }\n                    break;\n                case Node.ELEMENT_NODE:\n                    if (this.namespaceURI !== other.namespaceURI || this.prefix !== other.prefix || this.localName !== other.localName) {\n                        return false;\n                    }\n                    thisAttributes = $.descriptors.Element.attributes.get.call(this);\n                    otherAttributes = $.descriptors.Element.attributes.get.call(other);\n                    if (thisAttributes.length != otherAttributes.length) {\n                        return false;\n                    }\n                    break;\n                case Node.ATTRIBUTE_NODE:\n                    if (this.namespaceURI !== other.namespaceURI || this.localName !== other.localName || this.value !== other.value) {\n                        return false;\n                    }\n                    break;\n                case Node.PROCESSING_INSTRUCTION_NODE:\n                    if (this.target !== other.target || this.data !== other.data) {\n                        return false;\n                    }\n                    break;\n                case Node.TEXT_NODE:\n                case Node.COMMENT_NODE:\n                    if (this.data !== other.data) {\n                        return false;\n                    }\n                    break;\n            }\n\n            if (this.nodeType == Node.ELEMENT_NODE) {\n                for (var i = 0; i < thisAttributes.length; i++) {\n                    var attr1 = thisAttributes[i];\n                    var attr2 = otherAttributes[attr1.name];\n                    if (attr1.value !== attr2.value) {\n                        return false;\n                    }\n                }\n            }\n\n            var childNodes1 = this.childNodes;\n            var childNodes2 = other.childNodes;\n            if (childNodes1.length !== other.childNodes.length) {\n                return false;\n            }\n\n            for (var _i = 0; _i < childNodes1.length; _i++) {\n                if (!childNodes1[_i].isEqualNode(childNodes2[_i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'compareDocumentPosition',\n        value: function compareDocumentPosition(other) {\n            // https://dom.spec.whatwg.org/#dom-node-comparedocumentposition\n\n            if (this === other) {\n                return 0;\n            }\n\n            var node1 = other;\n            var node2 = this;\n            var attr1 = null;\n            var attr2 = null;\n\n            if (node1.nodeType == Document.prototype.ATTRIBUTE_NODE) {\n                attr1 = node1;\n                node1 = attr1.ownerElement;\n            }\n\n            if (node2.nodeType == Document.prototype.ATTRIBUTE_NODE) {\n                attr2 = node2;\n                node2 = attr2.ownerElement;\n\n                if (attr1 && node1 && node2 === node1) {\n                    var attrs = node2.atttributes;\n                    for (var i = 0; i < attrs.length; i++) {\n                        var attr = attrs[i];\n                        if (attr.isEqualNode(attr1)) {\n                            return Document.prototype.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + Document.prototype.DOCUMENT_POSITION_PRECEDING;\n                        } else if (attr.isEqualNode(attr2)) {\n                            return Document.prototype.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + Document.prototype.DOCUMENT_POSITION_FOLLOWING;\n                        }\n                    }\n                }\n            }\n\n            if (!node1 || !node2 || $.root(node1) !== $.root(node2)) {\n                return Document.prototype.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + Document.prototype.DOCUMENT_POSITION_FOLLOWING + Document.prototype.DOCUMENT_POSITION_DISCONNECTED;\n            }\n\n            if (ancestorOf(node2, node1) || node1 === node2 && attr2) {\n                return Document.prototype.DOCUMENT_POSITION_CONTAINS + Document.prototype.DOCUMENT_POSITION_PRECEDING;\n            }\n\n            if (ancestorOf(node1, node2) || node1 === node2 && attr1) {\n                return Document.prototype.DOCUMENT_POSITION_CONTAINS + Document.prototype.DOCUMENT_POSITION_FOLLOWING;\n            }\n\n            if (preceding(node1, node2)) {\n                return Document.prototype.DOCUMENT_POSITION_PRECEDING;\n            }\n\n            return Document.prototype.DOCUMENT_POSITION_FOLLOWING;\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'contains',\n        value: function contains(node) {\n            // https://dom.spec.whatwg.org/#dom-node-contains\n\n            var parent = node.parentNode;\n\n            if (!parent) {\n                return false;\n            }\n\n            do {\n                if (parent === this) {\n                    return true;\n                }\n            } while (parent = parent.parentNode);\n\n            return false;\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'insertBefore',\n        value: function insertBefore(node, child) {\n            // https://dom.spec.whatwg.org/#dom-node-insertbefore\n            // The insertBefore(node, child) method, when invoked, must return the result \n            // of pre-inserting node into context object before child.\n            return $.preInsert(node, this, child);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'appendChild',\n        value: function appendChild(node) {\n            // https://dom.spec.whatwg.org/#dom-node-appendchild\n            // The appendChild(node) method, when invoked, must return the result of \n            // appending node to context object.\n            return $.append(node, this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'replaceChild',\n        value: function replaceChild(node, child) {\n            // https://dom.spec.whatwg.org/#dom-node-replacechild\n            // The replaceChild(node, child) method, when invoked, must return the \n            // result of replacing child with node within context object.\n            return $.replace(child, node, this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'removeChild',\n        value: function removeChild(child) {\n            // https://dom.spec.whatwg.org/#dom-node-removechild\n            // The removeChild(child) method, when invoked, must return the result of \n            // pre-removing child from context object.\n            return $.preRemove(child, this);\n        }\n    }, {\n        key: 'parentNode',\n        get: function get() {\n            var parentNode = $.shadow(this).parentNode;\n            if (parentNode) {\n                return parentNode;\n            }\n\n            return $.descriptors.Node.parentNode.get.call(this);\n        }\n    }, {\n        key: 'parentElement',\n        get: function get() {\n            var parentNode = this.parentNode;\n            if (parentNode && parentNode.nodeType === Node.ELEMENT_NODE) {\n                return parentNode;\n            }\n\n            return null;\n        }\n    }, {\n        key: 'childNodes',\n        get: function get() {\n            var childNodes = $.shadow(this).childNodes;\n            if (childNodes) {\n                return childNodes.slice();\n            }\n\n            return $.descriptors.Node.childNodes.get.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'firstChild',\n        get: function get() {\n            var childNodes = $.shadow(this).childNodes;\n            if (childNodes) {\n                if (childNodes.length) {\n                    return childNodes[0];\n                }\n                return null;\n            }\n\n            return $.descriptors.Node.firstChild.get.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'lastChild',\n        get: function get() {\n            var childNodes = $.shadow(this).childNodes;\n            if (childNodes) {\n                if (childNodes.length) {\n                    return childNodes[childNodes.length - 1];\n                }\n                return null;\n            }\n\n            return $.descriptors.Node.lastChild.get.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'previousSibling',\n        get: function get() {\n            var parentNode = $.shadow(this).parentNode;\n            if (parentNode) {\n                var childNodes = $.shadow(parentNode).childNodes;\n                var siblingIndex = childNodes.indexOf(this) - 1;\n                return siblingIndex < 0 ? null : childNodes[siblingIndex];\n            }\n\n            return $.descriptors.Node.previousSibling.get.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'nextSibling',\n        get: function get() {\n            var parentNode = $.shadow(this).parentNode;\n            if (parentNode) {\n                var childNodes = $.shadow(parentNode).childNodes;\n                var siblingIndex = childNodes.indexOf(this) + 1;\n                return siblingIndex === childNodes.length ? null : childNodes[siblingIndex];\n            }\n\n            return $.descriptors.Node.nextSibling.get.call(this);\n        }\n\n        // TODO: consider creating a raw property descriptor\n        // that uses the native get instead of a pass-through function\n\n    }, {\n        key: 'nodeValue',\n        get: function get() {\n            return $.descriptors.Node.nodeValue.get.call(this);\n        }\n\n        // TODO: MutationObserver tests\n        ,\n        set: function set(value) {\n            switch (this.nodeType) {\n                case Node.ATTRIBUTE_NODE:\n                    $.setExistingAttributeValue(this, value);\n                    break;\n                case Node.TEXT_NODE:\n                case Node.PROCESSING_INSTRUCTION_NODE:\n                case Node.COMMENT_NODE:\n                    var length = $.descriptors.CharacterData.data.get.call(this).length;\n                    $.replaceData(this, 0, length, value);\n                    break;\n            }\n        }\n    }, {\n        key: 'textContent',\n        get: function get() {\n            switch (this.nodeType) {\n                case Node.DOCUMENT_FRAGMENT_NODE:\n                case Node.ELEMENT_NODE:\n                    return elementTextContent(this);\n                case Node.ATTRIBUTE_NODE:\n                    return $.descriptors.Attr.value.get.call(this);\n                case Node.TEXT_NODE:\n                case Node.PROCESSING_INSTRUCTION_NODE:\n                case Node.COMMENT_NODE:\n                    return $.descriptors.CharacterData.data.get.call(this);\n                default:\n                    return null;\n            }\n        }\n\n        // TODO: MutationObserver tests\n        ,\n        set: function set(value) {\n            switch (this.nodeType) {\n                case Node.DOCUMENT_FRAGMENT_NODE:\n                case Node.ELEMENT_NODE:\n                    var node = null;\n                    if (value !== '') {\n                        node = this.ownerDocument.createTextNode(value);\n                    }\n                    $.replaceAll(node, this);\n                    break;\n                case Node.ATTRIBUTE_NODE:\n                    $.setExistingAttributeValue(this, value);\n                    break;\n                case Node.TEXT_NODE:\n                case Node.PROCESSING_INSTRUCTION_NODE:\n                case Node.COMMENT_NODE:\n                    $.replaceData(this, 0, this.data.length, value);\n                    break;\n            }\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;\n\n\nfunction ancestorOf(node, ancestor) {\n    var parent = node.parentNode;\n\n    do {\n        if (parent === ancestor) {\n            return true;\n        }\n    } while (parent = parent.parentNode);\n\n    return false;\n}\n\nfunction preceding(element1, element2) {\n    function precedingSiblings(parent, sibling1, sibling2) {\n        var siblings = parent.childNodes;\n        for (var _i2 = 0; _i2 < siblings.length; _i2++) {\n            var sibling = siblings[_i2];\n            if (sibling === sibling1) {\n                return true;\n            } else if (sibling === sibling2) {\n                return false;\n            }\n        }\n    }\n\n    // Check if they're already siblings.\n    var ancestor1 = element1.parentNode;\n    var ancestor2 = element2.parentNode;\n\n    if (ancestor1 === ancestor2) {\n        return precedingSiblings(element1, element2);\n    }\n\n    // Find the closest common ancestor.\n    var ancestors1 = [ancestor1];\n    var ancestors2 = [ancestor2];\n\n    while (ancestor1 = ancestor1.parentNode) {\n        ancestors1.push(ancestor1);\n    }\n\n    while (ancestor2 = ancestor2.parentNode) {\n        ancestors2.push(ancestor2);\n    }\n\n    ancestors1.reverse();\n    ancestors2.reverse();\n\n    var diff = Math.abs(ancestors1.length - ancestors2.length);\n    var min = Math.min(ancestors1.length, ancestors2.length);\n\n    var i = 0;\n    while (ancestors1[i] === ancestors2[i]) {\n        i++;\n    }\n\n    return precedingSiblings(ancestors1[i - 1], ancestors1[i], ancestors2[i]);\n}\n\nfunction elementTextContent(element) {\n    var result = '';\n    var childNodes = element.childNodes;\n    for (var i = 0; i < childNodes.length; i++) {\n        var childNode = childNodes[i];\n        switch (childNode.nodeType) {\n            case Node.ELEMENT_NODE:\n                result += elementTextContent(childNode);\n                break;\n            case Node.TEXT_NODE:\n                result += $.descriptors.CharacterData.data.get.call(childNode);\n                break;\n        }\n    }\n    return result;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-shadowroot\n// https://www.w3.org/TR/shadow-dom/#the-shadowroot-interface\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'nodeName',\n        get: function get() {\n            return '#shadow-root';\n        }\n    }, {\n        key: 'mode',\n        get: function get() {\n            return $.shadow(this).mode;\n        }\n    }, {\n        key: 'host',\n        get: function get() {\n            return $.shadow(this).host;\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'innerHTML',\n        get: function get() {\n            return $.serializeHTMLFragment(this);\n        }\n\n        // TODO: tests\n        ,\n        set: function set(value) {\n            var fragment = $.parseHTMLFragment(value, this);\n            $.replaceAll(fragment, this);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-text\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'splitText',\n\n\n        // TODO: tests\n        value: function splitText(offset) {\n            var length = this.length;\n            if (offset > length) {\n                throw $.makeError('IndexSizeError');\n            }\n            var count = length - offset;\n            var newData = this.data.slice(offset, count);\n            var newNode = this.ownerDocument.createTextNode(newData);\n            var parent = this.parentNode;\n            if (parent) {\n                $.insert(newNode, parent, this.nextSibling);\n                // TODO: (Range)\n            }\n            $.replaceData(this, offset, count, '');\n            if (!parent) {\n                // TODO: (Range)\n            }\n            return newNode;\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nvar _patch = require('./patch.js');\n\nvar _patch2 = _interopRequireDefault(_patch);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar nativeShadowDom = 'attachShadow' in Element.prototype;\n\nif (!nativeShadowDom || window.forceShadowDomPolyfill) {\n    (0, _patch2.default)();\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n            value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-childnode\n\nexports.default = function (base) {\n\n            return function () {\n                        function _class() {\n                                    _classCallCheck(this, _class);\n                        }\n\n                        _createClass(_class, [{\n                                    key: 'before',\n\n\n                                    // TODO: tests\n                                    value: function before() {\n                                                // https://dom.spec.whatwg.org/#dom-childnode-before\n                                                // The before(nodes) method, when invoked, must run these steps:\n\n                                                // 1. Let parent be context objects parent.\n                                                var parent = this.parentNode;\n\n                                                // 2. If parent is null, terminate these steps.\n                                                if (!parent) {\n                                                            return;\n                                                }\n\n                                                // 3. Let viablePreviousSibling be context objects first preceding \n                                                // sibling not in nodes, and null otherwise.\n                                                var viablePreviousSibling = this.previousSibling;\n\n                                                for (var _len = arguments.length, nodes = Array(_len), _key = 0; _key < _len; _key++) {\n                                                            nodes[_key] = arguments[_key];\n                                                }\n\n                                                while (viablePreviousSibling && nodes.indexOf(viablePreviousSibling) !== -1) {\n                                                            viablePreviousSibling = viablePreviousSibling.previousSibling;\n                                                }\n\n                                                // 4. Let node be the result of converting nodes into a node, given \n                                                // nodes and context objects node document. Rethrow any exceptions.\n                                                var node = $.convertNodesIntoANode(nodes, this.ownerDocument);\n\n                                                // 5. If viablePreviousSibling is null, set it to parents first child, \n                                                // and to viablePreviousSiblings next sibling otherwise.\n                                                if (viablePreviousSibling === null) {\n                                                            viablePreviousSibling = parent.firstChild;\n                                                } else {\n                                                            viablePreviousSibling = viablePreviousSibling.nextSibling;\n                                                }\n\n                                                // 6. Pre-insert node into parent before viablePreviousSibling. \n                                                // Rethrow any exceptions.\n                                                $.preInsert(node, parent, viablePreviousSibling);\n                                    }\n\n                                    // TODO: tests\n\n                        }, {\n                                    key: 'after',\n                                    value: function after() {\n                                                // https://dom.spec.whatwg.org/#dom-childnode-after\n                                                // The after(nodes) method, when invoked, must run these steps:\n\n                                                // 1. Let parent be context objects parent.\n                                                var parent = this.parentNode;\n\n                                                // 2. If parent is null, terminate these steps.\n                                                if (!parent) {\n                                                            return;\n                                                }\n\n                                                // 3. Let viableNextSibling be context objects first following \n                                                // sibling not in nodes, and null otherwise.\n                                                var viableNextSibling = this.nextSibling;\n\n                                                for (var _len2 = arguments.length, nodes = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                                                            nodes[_key2] = arguments[_key2];\n                                                }\n\n                                                while (viableNextSibling && nodes.indexOf(viableNextSibling) !== -1) {\n                                                            viableNextSibling = viableNextSibling.nextSibling;\n                                                }\n\n                                                // 4. Let node be the result of converting nodes into a node, given \n                                                // nodes and context objects node document. Rethrow any exceptions.\n                                                var node = $.convertNodesIntoANode(nodes, this.ownerDocument);\n\n                                                // 5. Pre-insert node into parent before viableNextSibling. Rethrow \n                                                // any exceptions.\n                                                $.preInsert(node, parent, viableNextSibling);\n                                    }\n\n                                    // TODO: tests\n\n                        }, {\n                                    key: 'replaceWith',\n                                    value: function replaceWith() {\n                                                // https://dom.spec.whatwg.org/#dom-childnode-replacewith\n                                                // The replaceWith(nodes) method, when invoked, must run these steps:\n\n                                                // 1. Let parent be context objects parent.\n                                                var parent = this.parentNode;\n\n                                                // 2. If parent is null, terminate these steps.\n                                                if (!parent) {\n                                                            return;\n                                                }\n\n                                                // 3. Let viableNextSibling be context objects first following \n                                                // sibling not in nodes, and null otherwise.\n                                                var viableNextSibling = this.nextSibling;\n\n                                                for (var _len3 = arguments.length, nodes = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n                                                            nodes[_key3] = arguments[_key3];\n                                                }\n\n                                                while (viableNextSibling && nodes.indexOf(viableNextSibling) !== -1) {\n                                                            viableNextSibling = viableNextSibling.nextSibling;\n                                                }\n\n                                                // 4. Let node be the result of converting nodes into a node, given \n                                                // nodes and context objects node document. Rethrow any exceptions.\n                                                var node = $.convertNodesIntoANode(nodes, this.ownerDocument);\n\n                                                // 5. If context objects parent is parent, replace the context object \n                                                // with node within parent. Rethrow any exceptions.\n                                                if (this.parentNode == parent) {\n                                                            $.replace(this, node, parent);\n                                                }\n                                                // 6. Otherwise, pre-insert node into parent before viableNextSibling. \n                                                // Rethrow any exceptions.\n                                                else {\n                                                                        $.preInsert(node, parent, viableNextSibling);\n                                                            }\n                                    }\n\n                                    // TODO: tests\n\n                        }, {\n                                    key: 'remove',\n                                    value: function remove() {\n                                                // https://dom.spec.whatwg.org/#dom-childnode-remove\n                                                // The remove() method, when invoked, must run these steps:\n\n                                                // 1. If context objects parent is null, terminate these steps.\n                                                var parent = this.parentNode;\n\n                                                if (!parent) {\n                                                            return;\n                                                }\n\n                                                // 2. Remove the context object from context objects parent.\n                                                $.remove(this, parent);\n                                    }\n                        }]);\n\n                        return _class;\n            }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#mixin-documentorshadowroot\n// https://www.w3.org/TR/shadow-dom/#extensions-to-the-documentorshadowroot-mixin\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'activeElement',\n\n\n        // TODO: consider getSelection()\n        // TODO: consider elementFromPoint(double x, double y)\n        // TODO: consider elementsFromPoint(double x, double y)\n        // TODO: consider get styleSheets()\n\n        // TODO: tests\n        get: function get() {\n            var document = this.ownerDocument || this;\n            var nativeActiveElement = native.activeElement.get.call(document);\n\n            if (!nativeActiveElement || document != $.shadowIncludingRoot(this)) {\n                return null;\n            }\n\n            return $.retarget(nativeActiveElement, this);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-nondocumenttypechildnode\n\nexports.default = function (base) {\n\n    var native = {\n        previousElementSibling: $.descriptor(base, 'previousElementSibling'),\n        nextElementSibling: $.descriptor(base, 'nextElementSibling')\n    };\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'previousElementSibling',\n\n\n            // TODO: tests\n            get: function get() {\n                var parentNode = $.shadow(this).parentNode;\n\n                if (!parentNode) {\n                    if (native.previousElementSibling) {\n                        return native.previousElementSibling.get(this);\n                    }\n                    parentNode = this.parentNode;\n                }\n\n                var childNodes = $.shadow(parentNode).childNodes;\n                var index = childNodes.indexOf(this);\n\n                if (index === 0) {\n                    return null;\n                }\n\n                do {\n                    var previous = childNodes[--index];\n\n                    if (previous.nodeType === Node.ELEMENT_NODE) {\n                        return previous;\n                    }\n                } while (index > 0);\n\n                return null;\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'nextElementSibling',\n            get: function get() {\n                var parentNode = $.shadow(this).parentNode;\n\n                if (!parentNode) {\n                    if (native.nextElementSibling) {\n                        return native.nextElementSibling.get(this);\n                    }\n                    parentNode = this.parentNode;\n                }\n\n                var childNodes = $.shadow(parentNode).childNodes;\n                var index = childNodes.indexOf(this);\n\n                if (index === childNodes.length - 1) {\n                    return null;\n                }\n\n                do {\n                    var previous = childNodes[++index];\n\n                    if (previous.nodeType === Node.ELEMENT_NODE) {\n                        return previous;\n                    }\n                } while (index < childNodes.length);\n\n                return null;\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-nonelementparentnode\n\nexports.default = function (base) {\n\n    var native = {\n        querySelectorAll: $.descriptor(base, 'querySelectorAll')\n    };\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'getElementById',\n            value: function getElementById(id) {\n                // https://dom.spec.whatwg.org/#dom-nonelementparentnode-getelementbyid\n\n                if (id === '' || /\\s/.test(id)) {\n                    return null;\n                }\n\n                var selector = '#' + serializeIdentifier(id);\n                var results = void 0;\n\n                if ($.isShadowRoot(this)) {\n                    results = $.descriptors.Element.querySelectorAll.value.call($.shadow(this).host, selector);\n                } else {\n                    results = native.querySelectorAll.value.call(this, selector);\n                }\n\n                if (results.length) {\n                    for (var i = 0; i < results.length; i++) {\n                        var item = results[i];\n                        if ($.root(item) === this) {\n                            return item;\n                        }\n                    }\n                }\n\n                return null;\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar serializeIdentifier = 'CSS' in window && 'escape' in window.CSS ? window.CSS.escape : function (string) {\n    // https://drafts.csswg.org/cssom/#serialize-an-identifier\n    var result = '';\n    for (var i = 0; i < string.length; i++) {\n        var charCode = string.charCodeAt(i);\n        if (charCode === 0x0000) {\n            result += '\\uFFFD';\n            continue;\n        }\n        if (charCode >= 0x0001 && charCode <= 0x001F || charCode === 0x007F || i === 0 && charCode >= 0x0030 && charCode <= 0x00039 || i === 1 && string[0] === '-' && charCode >= 0x0030 && charCode <= 0x00039) {\n            result += '\\\\' + charCode.toString(16) + ' ';\n            continue;\n        }\n        if (i === 0 && charCode === 0x002D && string.length === 1) {\n            result += '\\\\' + string.charAt(i);\n            continue;\n        }\n        if (charCode >= 0x0080 || charCode === 0x002D || charCode === 0x005F || charCode >= 0x0030 && charCode <= 0x0039 || charCode >= 0x0041 && charCode <= 0x005A || charCode >= 0x0061 && charCode <= 0x007A) {\n            result += string.charAt(i);\n            continue;\n        }\n        result += '\\\\' + string.charAt(i);\n        continue;\n    }\n    return result;\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-parentnode\n\nexports.default = function (base) {\n\n    var native = {\n        children: $.descriptor(base, 'children'),\n        firstElementChild: $.descriptor(base, 'firstElementChild'),\n        lastElementChild: $.descriptor(base, 'lastElementChild'),\n        childElementCount: $.descriptor(base, 'childElementCount')\n    };\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'prepend',\n\n\n            // TODO: tests\n            value: function prepend() {\n                for (var _len = arguments.length, nodes = Array(_len), _key = 0; _key < _len; _key++) {\n                    nodes[_key] = arguments[_key];\n                }\n\n                // https://dom.spec.whatwg.org/#dom-parentnode-prepend\n                // The prepend(nodes) method, when invoked, must run these steps:\n\n                // 1. Let node be the result of converting nodes into a node given \n                // nodes and context objects node document. Rethrow any exceptions.\n                var node = $.convertNodesIntoANode(nodes, this.ownerDocument || this);\n\n                // 2. Pre-insert node into context object before the context objects \n                // first child. Rethrow any exceptions.\n                $.preInsert(node, this, this.firstChild);\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'append',\n            value: function append() {\n                for (var _len2 = arguments.length, nodes = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                    nodes[_key2] = arguments[_key2];\n                }\n\n                // https://dom.spec.whatwg.org/#dom-parentnode-append\n                // The append(nodes) method, when invoked, must run these steps:\n\n                // 1. Let node be the result of converting nodes into a node given \n                // nodes and context objects node document. Rethrow any exceptions.\n                var node = $.convertNodesIntoANode(nodes, this.ownerDocument || this);\n\n                // 2. Append node to context object. Rethrow any exceptions.\n                $.append(node, this);\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'querySelector',\n            value: function querySelector(selectors) {\n                var results = this.querySelectorAll(selectors);\n\n                if (results.length) {\n                    return results[0];\n                }\n\n                return null;\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'querySelectorAll',\n            value: function querySelectorAll(selectors) {\n                // https://dom.spec.whatwg.org/#scope-match-a-selectors-string\n                // this is horrible, performance-wise.\n                // it's about 100x slower than native querySelectorAll.\n                // that might not amount to much in practice, though.\n                // after all, this is a polyfill.\n\n                var firstChild = this.firstChild;\n\n                if (!firstChild) {\n                    return null;\n                }\n\n                var stack = [{ node: firstChild, recursed: false }];\n                var results = [];\n\n                while (stack.length) {\n                    var frame = stack.pop();\n\n                    if (frame.recursed) {\n                        if (frame.node.nextSibling) {\n                            stack.push({ node: frame.node.nextSibling, recursed: false });\n                        }\n                    } else {\n                        if (frame.node.nodeType == Node.ELEMENT_NODE && frame.node.matches(selectors)) {\n                            results.push(frame.node);\n                        }\n\n                        stack.push({ node: frame.node, recursed: true });\n\n                        if (firstChild = frame.node.firstChild) {\n                            stack.push({ node: firstChild, recursed: false });\n                        }\n                    }\n                }\n\n                return results;\n            }\n        }, {\n            key: 'children',\n            get: function get() {\n                var childNodes = $.shadow(this).childNodes;\n\n                if (!childNodes) {\n                    if (native.children) {\n                        return native.children.get.call(this);\n                    }\n                    childNodes = this.childNodes;\n                }\n\n                var elements = [];\n\n                for (var i = 0; i < childNodes.length; i++) {\n                    var node = childNodes[i];\n                    if (node.nodeType == Node.ELEMENT_NODE) {\n                        elements.push(node);\n                    }\n                }\n\n                return elements;\n            }\n        }, {\n            key: 'firstElementChild',\n            get: function get() {\n                var childNodes = $.shadow(this).childNodes;\n\n                if (!childNodes) {\n                    if (native.firstElementChild) {\n                        return native.firstElementChild.get.call(this);\n                    }\n                    childNodes = this.childNodes;\n                }\n\n                for (var i = 0; i < childNodes.length; i++) {\n                    var node = childNodes[i];\n                    if (node.nodeType == Node.ELEMENT_NODE) {\n                        return node;\n                    }\n                }\n\n                return null;\n            }\n        }, {\n            key: 'lastElementChild',\n            get: function get() {\n                var childNodes = $.shadow(this).childNodes;\n\n                if (!childNodes) {\n                    if (native.lastElementChild) {\n                        return native.lastElementChild.get.call(this);\n                    }\n                    childNodes = this.childNodes;\n                }\n\n                for (var i = childNodes.length - 1; i >= 0; i--) {\n                    var node = childNodes[i];\n                    if (node.nodeType == Node.ELEMENT_NODE) {\n                        return node;\n                    }\n                }\n\n                return null;\n            }\n        }, {\n            key: 'childElementCount',\n            get: function get() {\n                var childNodes = $.shadow(this).childNodes;\n\n                if (!childNodes) {\n                    if (native.childElementCount) {\n                        return native.childElementCount.get.call(this);\n                    }\n                    childNodes = this.childNodes;\n                }\n\n                var count = 0;\n\n                for (var i = 0; i < childNodes.length; i++) {\n                    var node = childNodes[i];\n                    if (node.nodeType == Node.ELEMENT_NODE) {\n                        count++;\n                    }\n                }\n\n                return count;\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#mixin-slotable\n\nexports.default = function (base) {\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'assignedSlot',\n            get: function get() {\n                // spec implementation is:\n                // return $.findASlot(this, true);\n                // this uses an alternative (see https://github.com/whatwg/dom/issues/369)\n                var slot = $.shadow(this).assignedSlot;\n                if (slot && $.closedShadowHidden(slot, this)) {\n                    slot = null;\n                }\n                return slot;\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function () {\n\n    // Element.matches(selectors) polyfill from MDN\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/matches#Polyfill\n    // Purposefully chop out the polyfill function that uses querySelectorAll.\n    if (!Element.prototype.matches) {\n        Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.webkitMatchesSelector;\n    }\n\n    // Attr interface\n    $.extend(Attr, _Attr2.default);\n\n    // CharacterData interface\n    $.extend(CharacterData, _CharacterData2.default);\n\n    // CustomEvent interface\n    $.extend(CustomEvent, _CustomEvent2.default);\n    _CustomEvent2.default.prototype = CustomEvent.prototype;\n    window.CustomEvent = _CustomEvent2.default;\n\n    // Document interface\n    $.extend(Document, _Document2.default);\n\n    // TODO: implement DOMTokenList\n\n    // Element interface\n    $.extend(Element, _Element2.default);\n\n    // Event interface\n    $.extend(Event, _Event2.default);\n    $.extend(FocusEvent, _Event.hasRelatedTarget);\n    $.extend(MouseEvent, _Event.hasRelatedTarget);\n    _Event2.default.prototype = Event.prototype;\n    window.Event = _Event2.default;\n\n    // EventTarget\n    if ('EventTarget' in Window) {\n        $.extend(EventTarget, (0, _EventTarget2.default)(EventTarget));\n    } else {\n        // In IE, EventTarget is not exposed and Window's\n        // EventTarget methods are not the same as Node's.\n        $.extend(Window, (0, _EventTarget2.default)(Window));\n        $.extend(Node, (0, _EventTarget2.default)(Node));\n    }\n\n    // HTMLSlotElement interface\n    $.extend('HTMLSlotElement' in window ? HTMLSlotElement : HTMLUnknownElement, _HTMLSlotElement2.default);\n\n    // HTMLTableElement interface\n    $.extend(HTMLTableElement, _HTMLTableElement2.default);\n\n    // HTMLTableRowElement interface\n    $.extend(HTMLTableRowElement, _HTMLTableRowElement2.default);\n\n    // HTMLTableSectionElement interface\n    $.extend(HTMLTableSectionElement, _HTMLTableSectionElement2.default);\n\n    // MutationObserver interface\n    window.MutationObserver = _MutationObserver2.default;\n\n    // NamedNodeMap interface\n    $.extend(NamedNodeMap, _NamedNodeMap2.default);\n\n    // Node interface\n    $.extend(Node, _Node2.default);\n\n    // TODO: implement Range interface\n\n    // Text interface\n    $.extend(Text, _Text2.default);\n\n    // ChildNode mixin\n    $.extend(DocumentType, (0, _ChildNode2.default)(DocumentType));\n    $.extend(Element, (0, _ChildNode2.default)(Element));\n    $.extend(CharacterData, (0, _ChildNode2.default)(CharacterData));\n\n    // DocumentOrShadowRoot mixin\n    $.extend(Document, _DocumentOrShadowRoot2.default);\n    $.extend(_ShadowRoot2.default, _DocumentOrShadowRoot2.default);\n\n    // NonDocumentTypeChildNode mixin\n    $.extend(Element, (0, _NonDocumentTypeChildNode2.default)(Element));\n    $.extend(CharacterData, (0, _NonDocumentTypeChildNode2.default)(CharacterData));\n\n    // NonElementParentNode mixin\n    $.extend(Document, (0, _NonElementParentNode2.default)(Document));\n    $.extend(DocumentFragment, (0, _NonElementParentNode2.default)(DocumentFragment));\n\n    // ParentNode mixin\n    $.extend(Document, (0, _ParentNode2.default)(Document));\n    $.extend(DocumentFragment, (0, _ParentNode2.default)(DocumentFragment));\n    $.extend(Element, (0, _ParentNode2.default)(Element));\n\n    // Slotable mixin\n    $.extend(Element, (0, _Slotable2.default)(Element));\n    $.extend(Text, (0, _Slotable2.default)(Text));\n\n    // Cleanup for IE, Edge\n    delete Node.prototype.attributes;\n    delete HTMLElement.prototype.children;\n    delete HTMLElement.prototype.parentElement;\n    delete HTMLElement.prototype.innerHTML;\n    delete HTMLElement.prototype.outerHTML;\n    delete HTMLElement.prototype.insertAdjacentText;\n    delete HTMLElement.prototype.insertAdjacentElement;\n    delete HTMLElement.prototype.insertAdjacentHTML;\n};\n\nvar _utils = require('./utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _Attr = require('./interfaces/Attr.js');\n\nvar _Attr2 = _interopRequireDefault(_Attr);\n\nvar _CharacterData = require('./interfaces/CharacterData.js');\n\nvar _CharacterData2 = _interopRequireDefault(_CharacterData);\n\nvar _CustomEvent = require('./interfaces/CustomEvent.js');\n\nvar _CustomEvent2 = _interopRequireDefault(_CustomEvent);\n\nvar _Document = require('./interfaces/Document.js');\n\nvar _Document2 = _interopRequireDefault(_Document);\n\nvar _Element = require('./interfaces/Element.js');\n\nvar _Element2 = _interopRequireDefault(_Element);\n\nvar _Event = require('./interfaces/Event.js');\n\nvar _Event2 = _interopRequireDefault(_Event);\n\nvar _EventTarget = require('./interfaces/EventTarget.js');\n\nvar _EventTarget2 = _interopRequireDefault(_EventTarget);\n\nvar _HTMLSlotElement = require('./interfaces/HTMLSlotElement.js');\n\nvar _HTMLSlotElement2 = _interopRequireDefault(_HTMLSlotElement);\n\nvar _HTMLTableElement = require('./interfaces/HTMLTableElement.js');\n\nvar _HTMLTableElement2 = _interopRequireDefault(_HTMLTableElement);\n\nvar _HTMLTableRowElement = require('./interfaces/HTMLTableRowElement.js');\n\nvar _HTMLTableRowElement2 = _interopRequireDefault(_HTMLTableRowElement);\n\nvar _HTMLTableSectionElement = require('./interfaces/HTMLTableSectionElement.js');\n\nvar _HTMLTableSectionElement2 = _interopRequireDefault(_HTMLTableSectionElement);\n\nvar _MutationObserver = require('./interfaces/MutationObserver.js');\n\nvar _MutationObserver2 = _interopRequireDefault(_MutationObserver);\n\nvar _NamedNodeMap = require('./interfaces/NamedNodeMap.js');\n\nvar _NamedNodeMap2 = _interopRequireDefault(_NamedNodeMap);\n\nvar _Node = require('./interfaces/Node.js');\n\nvar _Node2 = _interopRequireDefault(_Node);\n\nvar _ShadowRoot = require('./interfaces/ShadowRoot.js');\n\nvar _ShadowRoot2 = _interopRequireDefault(_ShadowRoot);\n\nvar _Text = require('./interfaces/Text.js');\n\nvar _Text2 = _interopRequireDefault(_Text);\n\nvar _ChildNode = require('./mixins/ChildNode.js');\n\nvar _ChildNode2 = _interopRequireDefault(_ChildNode);\n\nvar _DocumentOrShadowRoot = require('./mixins/DocumentOrShadowRoot.js');\n\nvar _DocumentOrShadowRoot2 = _interopRequireDefault(_DocumentOrShadowRoot);\n\nvar _NonDocumentTypeChildNode = require('./mixins/NonDocumentTypeChildNode.js');\n\nvar _NonDocumentTypeChildNode2 = _interopRequireDefault(_NonDocumentTypeChildNode);\n\nvar _NonElementParentNode = require('./mixins/NonElementParentNode.js');\n\nvar _NonElementParentNode2 = _interopRequireDefault(_NonElementParentNode);\n\nvar _ParentNode = require('./mixins/ParentNode.js');\n\nvar _ParentNode2 = _interopRequireDefault(_ParentNode);\n\nvar _Slotable = require('./mixins/Slotable.js');\n\nvar _Slotable2 = _interopRequireDefault(_Slotable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.makeError = makeError;\nexports.reportError = reportError;\nexports.extend = extend;\nexports.shadow = shadow;\nexports.filterByRoot = filterByRoot;\nexports.isShadowRoot = isShadowRoot;\nexports.isValidCustomElementName = isValidCustomElementName;\nexports.parseHTMLFragment = parseHTMLFragment;\nexports.serializeHTMLFragment = serializeHTMLFragment;\nexports.root = root;\nexports.descendant = descendant;\nexports.inclusiveDescendant = inclusiveDescendant;\nexports.ancestor = ancestor;\nexports.inclusiveAncestor = inclusiveAncestor;\nexports.convertNodesIntoANode = convertNodesIntoANode;\nexports.clone = clone;\nexports.adopt = adopt;\nexports.hostIncludingInclusiveAncestor = hostIncludingInclusiveAncestor;\nexports.shadowIncludingRoot = shadowIncludingRoot;\nexports.shadowIncludingDescendant = shadowIncludingDescendant;\nexports.shadowIncludingInclusiveDescendant = shadowIncludingInclusiveDescendant;\nexports.shadowIncludingAncestor = shadowIncludingAncestor;\nexports.shadowIncludingInclusiveAncestor = shadowIncludingInclusiveAncestor;\nexports.closedShadowHidden = closedShadowHidden;\nexports.retarget = retarget;\nexports.changeAttribute = changeAttribute;\nexports.appendAttribute = appendAttribute;\nexports.removeAttribute = removeAttribute;\nexports.replaceAttribute = replaceAttribute;\nexports.setAttribute = setAttribute;\nexports.setAttributeValue = setAttributeValue;\nexports.removeAttributeByName = removeAttributeByName;\nexports.removeAttributeByNamespace = removeAttributeByNamespace;\nexports.insertAdjacent = insertAdjacent;\nexports.setExistingAttributeValue = setExistingAttributeValue;\nexports.replaceData = replaceData;\nexports.findASlot = findASlot;\nexports.findSlotables = findSlotables;\nexports.findFlattenedSlotables = findFlattenedSlotables;\nexports.assignSlotables = assignSlotables;\nexports.assignSlotablesForATree = assignSlotablesForATree;\nexports.assignASlot = assignASlot;\nexports.signalASlotChange = signalASlotChange;\nexports.ensurePreInsertionValidity = ensurePreInsertionValidity;\nexports.preInsert = preInsert;\nexports.insert = insert;\nexports.append = append;\nexports.replace = replace;\nexports.replaceAll = replaceAll;\nexports.preRemove = preRemove;\nexports.remove = remove;\nexports.createMutationObserver = createMutationObserver;\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar slice = exports.slice = function slice(array) {\n    return Array.prototype.slice.call(array);\n};\n\nvar descriptor = exports.descriptor = function descriptor(type, name) {\n    return Object.getOwnPropertyDescriptor(type.prototype, name);\n};\n\nvar descriptors = exports.descriptors = {\n    Attr: {\n        value: descriptor(Attr, 'value')\n    },\n    CharacterData: {\n        data: descriptor(CharacterData, 'data')\n    },\n    Document: {\n        activeElement: descriptor(Document, 'activeElement'),\n        getElementsByTagName: descriptor(Document, 'getElementsByTagName'),\n        getElementsByTagNameNS: descriptor(Document, 'getElementsByTagNameNS'),\n        getElementsByClassName: descriptor(Document, 'getElementsByClassName')\n    },\n    Element: {\n        attributes: descriptor(Element, 'attributes') || descriptor(Node, 'attributes'),\n        getElementsByTagName: descriptor(Element, 'getElementsByTagName'),\n        getElementsByTagNameNS: descriptor(Element, 'getElementsByTagNameNS'),\n        getElementsByClassName: descriptor(Element, 'getElementsByClassName'),\n        innerHTML: descriptor(Element, 'innerHTML') || descriptor(HTMLElement, 'innerHTML'),\n        querySelectorAll: descriptor(Element, 'querySelectorAll'),\n        setAttribute: descriptor(Element, 'setAttribute'),\n        setAttributeNodeNS: descriptor(Element, 'setAttributeNodeNS'),\n        removeAttributeNode: descriptor(Element, 'removeAttributeNode')\n    },\n    Event: {\n        currentTarget: descriptor(Event, 'currentTarget'),\n        target: descriptor(Event, 'target')\n    },\n    FocusEvent: {\n        relatedTarget: descriptor(FocusEvent, 'relatedTarget')\n    },\n    MouseEvent: {\n        relatedTarget: descriptor(MouseEvent, 'relatedTarget')\n    },\n    Node: {\n        parentNode: descriptor(Node, 'parentNode'),\n        hasChildNodes: descriptor(Node, 'hasChildNodes'),\n        childNodes: descriptor(Node, 'childNodes'),\n        firstChild: descriptor(Node, 'firstChild'),\n        lastChild: descriptor(Node, 'lastChild'),\n        previousSibling: descriptor(Node, 'previousSibling'),\n        nextSibling: descriptor(Node, 'nextSibling'),\n        nodeValue: descriptor(Node, 'nodeValue'),\n        textContent: descriptor(Node, 'textContent'),\n        cloneNode: descriptor(Node, 'cloneNode'),\n        insertBefore: descriptor(Node, 'insertBefore'),\n        removeChild: descriptor(Node, 'removeChild'),\n        appendChild: descriptor(Node, 'appendChild')\n    }\n};\n\n// TODO: add a note about importing YuzuJS/setImmediate before \n// this polyfill if better performance is desired.\nvar setImmediate = exports.setImmediate = 'setImmediate' in window ? window.setImmediate : function (callback) {\n    return setTimeout(callback, 0);\n};\n\n// TODO: analyze usages and provide brief but descriptive messages\nfunction makeError(name, message) {\n    var error = new Error(message || name);\n    error.name = name;\n    return error;\n}\n\nfunction reportError(error) {\n    if ('console' in window && 'error' in window.console) {\n        window.console.error(error);\n    }\n}\n\nfunction extend(object) {\n    for (var _len = arguments.length, mixins = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        mixins[_key - 1] = arguments[_key];\n    }\n\n    for (var i = 0; i < mixins.length; i++) {\n        var mixin = mixins[i].prototype;\n        var names = Object.getOwnPropertyNames(mixin);\n        for (var j = 0; j < names.length; j++) {\n            var name = names[j];\n            if (name === 'constructor') {\n                continue;\n            }\n            var _descriptor = Object.getOwnPropertyDescriptor(mixin, name);\n            Object.defineProperty(object.prototype || object, name, _descriptor);\n        }\n    }\n}\n\nfunction shadow(object) {\n    var shadow = object._shadow || {};\n    return object._shadow = shadow;\n}\n\nfunction filterByRoot(node, descendants) {\n    var contextRoot = root(node);\n    var filtered = [];\n\n    for (var i = 0; i < descendants.length; i++) {\n        var item = descendants[i];\n        if (root(item) === contextRoot) {\n            filtered.push(item);\n        }\n    }\n\n    return filtered;\n}\n\nfunction isShadowRoot(node) {\n    return node.nodeName === '#shadow-root';\n}\n\n// https://html.spec.whatwg.org/multipage/scripting.html#valid-custom-element-name\n\nfunction isValidCustomElementName(localName) {\n    switch (localName) {\n        case \"annotation-xml\":\n        case \"color-profile\":\n        case \"font-face\":\n        case \"font-face-src\":\n        case \"font-face-uri\":\n        case \"font-face-format\":\n        case \"font-face-name\":\n        case \"missing-glyph\":\n            return false;\n    }\n\n    // For now, to reduce complexity, we are leaving the unicode sets out...\n    // TODO: Consider adding 'full' support (for Unicode)\n    var regex = /[a-z](-|\\.|[0-9]|_|[a-z])+-(-|\\.|[0-9]|_|[a-z])+/g;\n\n    return regex.test(localName);\n}\n\n// https://www.w3.org/TR/DOM-Parsing/\n\nfunction parseHTMLFragment(markup, context) {\n    var temp = context.ownerDocument.createElement('div');\n    descriptors.Element.innerHTML.set.call(temp, markup);\n    var childNodes = descriptors.Node.childNodes.get.call(temp);\n    var fragment = context.ownerDocument.createDocumentFragment();\n    var getFirstChild = descriptors.Node.firstChild.get;\n    var appendChild = descriptors.Node.appendChild.value;\n    var firstChild = void 0;\n    while (firstChild = getFirstChild.call(temp)) {\n        appendChild.call(fragment, firstChild);\n    }\n    return fragment;\n}\n\nfunction serializeHTMLFragment(node) {\n    // https://www.w3.org/TR/html5/single-page.html#html-fragment-serialization-algorithm\n\n    // 1. Let s be a string, and initialize it to the empty string.\n    var s = '';\n\n    // 2. If the node is a template element, then let the node instead be the \n    // template element's template contents (a DocumentFragment node).\n    if (node.localName === 'template') {\n        var content = node.content;\n        if (content) {\n            node = content;\n        }\n    }\n\n    // 3. For each child node of the node, in tree order, run the following steps:\n    var childNodes = node.childNodes;\n    for (var i = 0; i < childNodes.length; i++) {\n        // 1. Let current node be the child node being processed.\n        var currentNode = childNodes[i];\n        // 2. Append the appropriate string from the following list to s:\n        switch (currentNode.nodeType) {\n            case Node.ELEMENT_NODE:\n                var tagName = void 0;\n                switch (currentNode.namespaceURI) {\n                    case 'http://www.w3.org/1999/xhtml':\n                    case 'http://www.w3.org/1998/Math/MathML':\n                    case 'http://www.w3.org/2000/svg':\n                        tagName = currentNode.localName;\n                        break;\n                    default:\n                        tagName = currentNode.qualifiedName;\n                        break;\n                }\n                s += '<' + tagName;\n                var attributes = descriptors.Element.attributes.get.call(currentNode);\n                for (var j = 0; j < attributes.length; j++) {\n                    var _attribute = attributes[j];\n                    s += ' ' + serializeAttributeName(_attribute);\n                    s += '=\"' + escapeString(_attribute.value) + '\"';\n                }\n                s += '>';\n                switch (currentNode.localName) {\n                    case 'area':case 'base':case 'basefont':case 'bgsound':\n                    case 'br':case 'col':case 'embed':case 'frame':case 'hr':\n                    case 'img':case 'input':case 'keygen':case 'link':case 'meta':\n                    case 'param':case 'source':case 'track':case 'wbr':\n                        continue;\n                    case 'pre':case 'textarea':case 'listing':\n                        var firstChild = currentNode.firstChild;\n                        if (firstChild && firstChild.nodeType === Node.TEXT_NODE && firstChild.data[0] === '\\n') {\n                            s += '\\n';\n                        }\n                        break;\n                }\n                s += serializeHTMLFragment(currentNode);\n                s += '</' + tagName + '>';\n                break;\n            case Node.TEXT_NODE:\n                switch (currentNode.parentNode.localName) {\n                    case 'style':case 'script':case 'xmp':case 'iframe':\n                    case 'noembed':case 'noframes':case 'plaintext':case 'noscript':\n                        s += currentNode.data;\n                        break;\n                    default:\n                        s += escapeString(currentNode.data);\n                        break;\n                }\n                break;\n            case Node.COMMENT_NODE:\n                s += '<!--' + currentNode.data + '-->';\n                break;\n            case Node.PROCESSING_INSTRUCTION_NODE:\n                s += '<?' + currentNode.target + ' ' + currentNode.data + '>';\n                break;\n            case Node.DOCUMENT_TYPE_NODE:\n                s += '<!DOCTYPE ' + currentNode.name + '>';\n                break;\n        }\n    }\n\n    // 4. The result of the algorithm is the string s.\n    return s;\n\n    function escapeString(string, attributeMode) {\n        if (!string || !string.length) {\n            return '';\n        }\n\n        string = string.replace('&', '&amp;');\n        string = string.replace('\\xA0', '&nbsp;');\n\n        if (attributeMode) {\n            string = string.replace('\"', '&quot;');\n        } else {\n            string = string.replace('<', '&lt;');\n            string = string.replace('>', '&gt;');\n        }\n\n        return string;\n    }\n\n    function serializeAttributeName(attribute) {\n        var namespaceURI = attribute.namespaceURI;\n        var localName = attribute.localName;\n        if (!namespaceURI) {\n            return localName;\n        }\n        switch (namespaceURI) {\n            case 'http://www.w3.org/XML/1998/namespace':\n                return 'xml:' + localName;\n            case 'http://www.w3.org/2000/xmlns/':\n                if (localName === 'xmlns') {\n                    return localName;\n                }\n                return 'xmlns:' + localName;\n            case 'http://www.w3.org/1999/xlink':\n                return 'xlink:' + localName;\n            default:\n                return attribute.name;\n        }\n    }\n}\n\n// https://dom.spec.whatwg.org/#trees\n\nfunction root(node) {\n    var root = node;\n    var parent = root.parentNode;\n\n    while (parent != null) {\n        root = parent;\n        parent = root.parentNode;\n    }\n\n    return root;\n}\n\nfunction descendant(nodeA, nodeB) {\n    var parent = nodeA.parentNode;\n\n    while (parent != null) {\n        if (nodeB === parent) {\n            return true;\n        }\n        parent = parent.parentNode;\n    }\n\n    return false;\n}\n\nfunction inclusiveDescendant(nodeA, nodeB) {\n    return nodeA === nodeB || descendant(nodeA, nodeB);\n}\n\nfunction ancestor(nodeA, nodeB) {\n    var parent = nodeB.parentNode;\n\n    while (parent != null) {\n        if (nodeA === parent) {\n            return true;\n        }\n        parent = parent.parentNode;\n    }\n\n    return false;\n}\n\nfunction inclusiveAncestor(nodeA, nodeB) {\n    return nodeA === nodeB || ancestor(nodeA, nodeB);\n}\n\n// https://dom.spec.whatwg.org/#interface-parentnode\n\nfunction convertNodesIntoANode(nodes, document) {\n    var node = null;\n\n    for (var i = 0; i < nodes.length; i++) {\n        var item = nodes[i];\n\n        if (typeof item === \"string\") {\n            nodes[i] = document.createTextNode(item);\n        }\n    }\n\n    if (nodes.length === 1) {\n        node = nodes[0];\n    } else {\n        node = document.createDocumentFragment();\n\n        for (var _i = 0; _i < nodes.length; _i++) {\n            node.appendChild(nodes[_i]);\n        }\n    }\n\n    return node;\n}\n\n// https://dom.spec.whatwg.org/#interface-node\n\nfunction clone(node, document, cloneChildren) {\n    // https://dom.spec.whatwg.org/#concept-node-clone\n    // To clone a node, with an optional document and clone children flag, run these steps:\n\n    // 1. If document is not given, let document be nodes node document.\n    document = document || node.ownerDocument;\n\n    // Use a shortcut here\n    // 2. If node is an element, then:\n    // 3. Otherwise, let copy be a node that implements the same interfaces \n    // as node, and fulfills these additional requirements, switching on node:\n    // 4. Set copys node document and document to copy, if copy is a document, \n    // and set copys node document to document otherwise.\n    // 5. Run any cloning steps defined for node in other applicable \n    // specifications and pass copy, node, document and the clone children \n    // flag if set, as parameters.\n    var copy = descriptors.Node.cloneNode.value.call(node, false);\n\n    // 6. If the clone children flag is set, clone all the children of node \n    // and append them to copy, with document as specified and the clone \n    // children flag being set.\n    if (cloneChildren === true) {\n        var childNodes = slice(node.childNodes);\n        for (var i = 0; i < childNodes.length; i++) {\n            append(childNodes[i].cloneNode(true), copy);\n        }\n    }\n\n    return copy;\n}\n\nfunction adopt(node, document) {\n    // https://dom.spec.whatwg.org/#concept-node-adopt\n\n    // 1. Let oldDocument be nodes node document.\n    var oldDocument = node.ownerDocument;\n\n    // 2. If nodes parent is not null, remove node from its parent.\n    var parent = node.parentNode;\n    if (parent != null) {\n        remove(node, parent);\n    }\n\n    // Skip (CustomElements, native)\n    // 3. If document is not the same as oldDocument, run these substeps:\n}\n\n// https://dom.spec.whatwg.org/#interface-documentfragment\n\nfunction hostIncludingInclusiveAncestor(nodeA, nodeB) {\n    if (inclusiveAncestor(nodeA, nodeB)) {\n        return true;\n    }\n\n    var host = root(nodeB).host;\n\n    if (host && hostIncludingInclusiveAncestor(nodeA, host)) {\n        return true;\n    }\n\n    return false;\n}\n\n// https://dom.spec.whatwg.org/#interface-shadowroot\n\nfunction shadowIncludingRoot(node) {\n    var rootNode = root(node);\n    if (isShadowRoot(rootNode)) {\n        rootNode = shadowIncludingRoot(rootNode.host);\n    }\n    return rootNode;\n}\n\nfunction shadowIncludingDescendant(nodeA, nodeB) {\n    do {\n        if (isShadowRoot(nodeA)) {\n            nodeA = nodeA.host;\n        } else {\n            nodeA = nodeA.parentNode;\n        }\n        if (nodeA === nodeB) {\n            return true;\n        }\n    } while (nodeA != null);\n\n    return false;\n}\n\nfunction shadowIncludingInclusiveDescendant(nodeA, nodeB) {\n    return nodeA === nodeB || shadowIncludingDescendant(nodeA, nodeB);\n}\n\nfunction shadowIncludingAncestor(nodeA, nodeB) {\n    return shadowIncludingDescendant(nodeB, nodeA);\n}\n\nfunction shadowIncludingInclusiveAncestor(nodeA, nodeB) {\n    return nodeA === nodeB || shadowIncludingAncestor(nodeA, nodeB);\n}\n\nfunction closedShadowHidden(nodeA, nodeB) {\n    // https://dom.spec.whatwg.org/#concept-closed-shadow-hidden\n    var rootNode = root(nodeA);\n\n    if (!isShadowRoot(rootNode)) {\n        return false;\n    }\n\n    if (shadowIncludingInclusiveAncestor(rootNode, nodeB)) {\n        return false;\n    }\n\n    if (rootNode.mode === 'closed' || closedShadowHidden(rootNode.host, nodeB)) {\n        return true;\n    }\n\n    return false;\n}\n\nfunction retarget(nodeA, nodeB) {\n    // https://dom.spec.whatwg.org/#retarget\n    // To retarget an object A against an object B, repeat these steps \n    // until they return an object:\n\n    var rootNode = void 0;\n    while (rootNode = root(nodeA)) {\n        // 1. If As root is not a shadow root, or As root is a shadow-including \n        // inclusive ancestor of B, then return A.\n        if (!isShadowRoot(rootNode) || shadowIncludingInclusiveAncestor(rootNode, nodeB)) {\n            return nodeA;\n        }\n        // 2. Set A to As roots host.\n        nodeA = rootNode.host;\n    }\n}\n\n// https://dom.spec.whatwg.org/#interface-element\n\nfunction updateSlotName(element, localName, oldValue, value, namespace) {\n    // https://dom.spec.whatwg.org/#slot-name\n    if (element.localName === 'slot') {\n        if (localName === 'name' && namespace == null) {\n            if (value === oldValue) {\n                return;\n            }\n            if (value == null && oldValue === '') {\n                return;\n            }\n            if (value === '' && oldValue == null) {\n                return;\n            }\n            if (value == null || value === '') {\n                descriptors.Element.setAttribute.value.call(element, 'name', '');\n            } else {\n                descriptors.Element.setAttribute.value.call(element, 'name', value);\n            }\n            assignSlotablesForATree(element);\n        }\n    }\n}\n\nfunction updateSlotableName(element, localName, oldValue, value, namespace) {\n    // https://dom.spec.whatwg.org/#slotable-name\n    if (localName === 'slot' && namespace == null) {\n        if (value === oldValue) {\n            return;\n        }\n        if (value == null && oldValue === '') {\n            return;\n        }\n        if (value === '' && oldValue == null) {\n            return;\n        }\n        if (value == null || value === '') {\n            descriptors.Element.setAttribute.value.call(element, 'slot', '');\n        } else {\n            descriptors.Element.setAttribute.value.call(element, 'slot', value);\n        }\n        var assignedSlot = shadow(element).assignedSlot;\n        if (assignedSlot) {\n            assignSlotables(assignedSlot);\n        }\n        assignASlot(element);\n    }\n}\n\nfunction attributeChangeSteps(element, localName, oldValue, value, namespace) {\n    updateSlotName(element, localName, oldValue, value, namespace);\n    updateSlotableName(element, localName, oldValue, value, namespace);\n}\n\nfunction changeAttribute(attribute, element, value) {\n    // https://dom.spec.whatwg.org/#concept-element-attributes-change\n\n    var name = attribute.localName;\n    var namespace = attribute.namespaceURI;\n    var oldValue = descriptors.Attr.value.get.call(attribute);\n\n    // 1. Queue a mutation record...\n    queueMutationRecord('attributes', element, { name: name, namespace: namespace, oldValue: oldValue });\n\n    // Skip (CustomElements)\n    // 2. If element is custom...\n\n    // 3. Run the attribute change steps...\n    attributeChangeSteps(element, name, oldValue, value, namespace);\n\n    // 4. Set attribute's value...\n    descriptors.Attr.value.set.call(attribute, value);\n}\n\nfunction appendAttribute(attribute, element) {\n    // https://dom.spec.whatwg.org/#concept-element-attributes-append\n\n    var name = attribute.localName;\n    var namespace = attribute.namespaceURI;\n    var oldValue = null;\n\n    // 1. Queue a mutation record...\n    queueMutationRecord('attributes', element, { name: name, namespace: namespace, oldValue: oldValue });\n\n    // Skip (CustomElements)\n    // 2. If element is custom...\n\n    // 3. Run the attribute change steps...\n    attributeChangeSteps(element, name, oldValue, attribute.value, namespace);\n\n    // 4. Append the attribute to the elements attribute list.\n    descriptors.Element.setAttributeNodeNS.value.call(element, attribute);\n\n    // Skip (native)\n    // 5. Set attributes element to element.\n}\n\nfunction removeAttribute(attribute, element) {\n    // https://dom.spec.whatwg.org/#concept-element-attributes-remove\n\n    var name = attribute.localName;\n    var namespace = attribute.namespaceURI;\n    var oldValue = descriptors.Attr.value.get.call(attribute);\n\n    // 1. Queue a mutation record...\n    queueMutationRecord('attributes', element, { name: name, namespace: namespace, oldValue: oldValue });\n\n    // Skip (CustomElements)\n    // 2. If element is custom...\n\n    // 3. Run the attribute change steps...\n    attributeChangeSteps(element, name, oldValue, value, namespace);\n\n    // 4. Remove attribute from the elements attribute list.\n    descriptors.Element.removeAttributeNode.value.call(element, attribute);\n\n    // Skip (native)\n    // 5. Set attributes element to null.\n}\n\nfunction replaceAttribute(oldAttr, newAttr, element) {\n    // Used by 'set an attribute'\n    // https://dom.spec.whatwg.org/#concept-element-attributes-replace\n\n    var name = attribute.localName;\n    var namespace = attribute.namespaceURI;\n    var oldValue = descriptors.Attr.value.get.call(attribute);\n\n    // 1. Queue a mutation record...\n    queueMutationRecord('attributes', element, { name: name, namespace: namespace, oldValue: oldValue });\n\n    // Skip (CustomElements)\n    // 2. If element is custom...\n\n    // 3. Run the attribute change steps...\n    attributeChangeSteps(element, name, oldValue, value, namespace);\n\n    // 4. Replace oldAttr by newAttr in the elements attribute list.\n    descriptors.Element.setAttributeNodeNS.value.call(element, newAttr);\n\n    // Skip (native)\n    // 5. Set oldAttrs element to null.\n    // 6. Set newAttrs element to element.\n}\n\nfunction setAttribute(attr, element) {\n    if (attr.ownerElement != null || attr.ownerElement !== element) {\n        throw makeError('InUseAttributeError');\n    }\n    var attributes = descriptors.Element.attributes.get.call(element);\n    var oldAttr = attributes.getNamedItemNS(attr.namespaceURI, attr.localName);\n    if (oldAttr === attr) {\n        return attr;\n    }\n    if (oldAttr) {\n        replaceAttribute(oldAttr, attr, element);\n    } else {\n        appendAttribute(attr, element);\n    }\n    return oldAttr;\n}\n\nfunction setAttributeValue(element, localName, value, prefix, ns) {\n    prefix = prefix || null;\n    ns = ns || null;\n    var attributes = descriptors.Element.attributes.get.call(element);\n    var attribute = attributes.getNamedItemNS(ns, localName);\n    if (!attribute) {\n        attribute = element.ownerDocument.createAttributeNS(ns, localName);\n        descriptors.Attr.value.set.call(attribute, value);\n        appendAttribute(attribute, element);\n        return;\n    }\n    changeAttribute(attribute, element, value);\n}\n\nfunction removeAttributeByName(qualifiedName, element) {\n    var attributes = descriptors.Element.attributes.get.call(element);\n    var attr = attributes.getNamedItem(qualifiedName);\n    if (attr) {\n        removeAttribute(attr, element);\n    }\n    return attr;\n}\n\nfunction removeAttributeByNamespace(namespace, localName, element) {\n    var attributes = descriptors.Element.attributes.get.call(element);\n    var attr = attributes.getNamedItemNS(namespace, localName);\n    if (attr) {\n        removeAttribute(attr, element);\n    }\n    return attr;\n}\n\nfunction insertAdjacent(element, where, node) {\n    if (!(node instanceof Node)) {\n        throw makeError('TypeError');\n    }\n    var parent = void 0;\n    // https://dom.spec.whatwg.org/#insert-adjacent\n    switch ((where || '').toLowerCase()) {\n        case \"beforebegin\":\n            if (parent = element.parentNode) {\n                return preInsert(node, parent, element);\n            }\n            return null;\n        case \"afterbegin\":\n            return preInsert(node, element, element.firstChild);\n        case \"beforeend\":\n            return preInsert(node, element, null);\n        case \"afterend\":\n            if (parent = element.parentNode) {\n                return preInsert(node, parent, element.nextSibling);\n            }\n            return null;\n        default:\n            throw makeError('SyntaxError');\n    }\n}\n\n// https://dom.spec.whatwg.org/#attr\n\nfunction setExistingAttributeValue(attribute, value) {\n    if (attribute.ownerElement == null) {\n        descriptors.Attr.value.set.call(attribute, value);\n    } else {\n        changeAttribute(attribute, attribute.ownerElement, value);\n    }\n}\n\n// https://dom.spec.whatwg.org/#interface-characterdata\n\nfunction replaceData(node, offset, count, data) {\n    // https://dom.spec.whatwg.org/#concept-cd-replace\n    if (data == null) {\n        data = '';\n    }\n    var dataDescriptor = descriptors.CharacterData.data;\n    var oldValue = dataDescriptor.get.call(node);\n    var length = oldValue.length;\n    if (offset > length) {\n        throw makeError('IndexSizeError');\n    }\n    if (offset + count > length) {\n        count = length - offset;\n    }\n    queueMutationRecord('characterData', node, { oldValue: oldValue });\n    dataDescriptor.set.call(node, oldValue.slice(0, offset) + data + oldValue.slice(offset + count));\n    // TODO: (Range)\n}\n\n// https://dom.spec.whatwg.org/#finding-slots-and-slotables\n\nfunction findASlot(slotable, open) {\n    // https://dom.spec.whatwg.org/#find-a-slot\n    // To find a slot for a given slotable slotable and an optional \n    // open flag (unset unless stated otherwise), run these steps:\n\n    // 1. If slotables parent is null, then return null.\n    var parent = slotable.parentNode;\n    if (!parent) {\n        return null;\n    }\n\n    // 2. Let shadow be slotables parents shadow root.\n    var shadowRoot = shadow(parent).shadowRoot;\n\n    // 3. If shadow is null, then return null.\n    if (!shadowRoot) {\n        return null;\n    }\n\n    // 4. If the open flag is set and shadows mode is not \"open\", then return null.\n    if (open === true && shadowRoot.mode !== 'open') {\n        return null;\n    }\n\n    // 5. Return the first slot in shadows tree whose name is slotables name, if any, and null otherwise.\n    if (!shadowRoot.firstChild) {\n        return null;\n    }\n\n    var name = slotable instanceof Element ? slotable.slot : null;\n    var stack = [{ node: shadowRoot.firstChild, recursed: false }];\n\n    while (stack.length) {\n        var frame = stack.pop();\n        var node = frame.node;\n\n        if (frame.recursed) {\n            if (node.nextSibling) {\n                stack.push({ node: node.nextSibling, recursed: false });\n            }\n        } else {\n            if (node.localName === 'slot' && node.getAttribute('name') === name) {\n                return node;\n            }\n\n            stack.push({ node: frame.node, recursed: true });\n\n            if (node.firstChild) {\n                stack.push({ node: node.firstChild, recursed: false });\n            }\n        }\n    }\n\n    return null;\n}\n\nfunction findSlotables(slot) {\n    // https://dom.spec.whatwg.org/#find-slotables\n    // To find slotables for a given slot slot, run these steps:\n\n    // 1. Let result be an empty list.\n    var result = [];\n\n    // 2. If slots root is not a shadow root, then return result.\n    var slotRoot = root(slot);\n    if (!isShadowRoot(slotRoot)) {\n        return result;\n    }\n\n    // 3. Let host be slots roots host.\n    var host = slotRoot.host;\n\n    // 4. For each slotable child of host, slotable, in tree order, run these substeps:\n    var slotableChildren = slice(host.childNodes);\n    for (var i = 0; i < slotableChildren.length; i++) {\n        var slotable = slotableChildren[i];\n        if (slotable.nodeType === Node.ELEMENT_NODE || slotable.nodeType === Node.TEXT_NODE) {\n            // 1. Let foundSlot be the result of finding a slot given slotable.\n            var foundSlot = findASlot(slotable);\n            // 2. If foundSlot is slot, then append slotable to result.\n            if (foundSlot === slot) {\n                result.push(slotable);\n            }\n        }\n    }\n\n    // 5. Return result.\n    return result;\n}\n\nfunction findFlattenedSlotables(slot) {\n    // https://dom.spec.whatwg.org/#find-flattened-slotables\n    // To find flattened slotables for a given slot slot, run these steps:\n\n    // 1. Let result be an empty list.\n    var result = [];\n\n    // 2. Let slotables be the result of finding slotables given slot.\n    var slotables = findSlotables(slot);\n\n    // 3. If slotables is the empty list, then append each slotable child of slot, in tree order, to slotables.\n    if (slotables.length === 0) {\n        var slotableChildren = slice(slot.childNodes);\n        for (var i = 0; i < slotableChildren.length; i++) {\n            var slotableChild = slotableChildren[i];\n            if (slotableChild.nodeType === Node.ELEMENT_NODE || slotableChild.nodeType === Node.TEXT_NODE) {\n                slotables.push(slotableChild);\n            }\n        }\n    }\n\n    // 4. For each node in slotables, run these substeps:\n    for (var _i2 = 0; _i2 < slotables.length; _i2++) {\n        var node = slotables[_i2];\n        // 1. If node is a slot, run these subsubsteps:\n        if (node.localName === 'slot') {\n            var temporaryResult = findFlattenedSlotables(node);\n            result.splice.apply(result, [result.length, 0].concat(_toConsumableArray(temporaryResult)));\n        } else {\n            result.push(node);\n        }\n    }\n\n    // 5. Return result.\n    return result;\n}\n\n// https://dom.spec.whatwg.org/#assigning-slotables-and-slots\n\nfunction assignSlotables(slot, suppressSignaling) {\n    // https://dom.spec.whatwg.org/#assign-slotables\n    // To assign slotables, for a slot slot with an optional suppress \n    // signaling flag (unset unless stated otherwise), run these steps:\n\n    // 1. Let slotables be the result of finding slotables for slot.\n    var slotables = findSlotables(slot);\n\n    // 2. If suppress signaling flag is unset, and slotables and slots assigned \n    // nodes are not identical, then run signal a slot change for slot.\n    var identical = true;\n    var slotState = shadow(slot);\n    var assignedNodes = slotState.assignedNodes || [];\n    for (var i = 0; i < slotables.length; i++) {\n        if (slotables[i] !== assignedNodes[i]) {\n            identical = false;\n            break;\n        }\n    }\n    if (!suppressSignaling && !identical) {\n        signalASlotChange(slot);\n    }\n\n    // 3. Set slots assigned nodes to slotables.\n    slotState.assignedNodes = slotables;\n\n    // 4. For each slotable in slotables, set slotables assigned slot to slot.\n    for (var _i3 = 0; _i3 < slotables.length; _i3++) {\n        var slotable = slotables[_i3];\n        shadow(slotable).assignedSlot = slot;\n    }\n\n    !identical && setImmediate(function () {\n        // 4a. If we haven't tracked them yet, track the slot's logical children\n        if (!slotState.childNodes) {\n            var childNodes = descriptors.Node.childNodes.get.call(slot);\n            slotState.childNodes = slice(childNodes);\n        }\n\n        // 4b. Clean out the slot\n        var firstChild = void 0;\n        while (firstChild = descriptors.Node.firstChild.get.call(slot)) {\n            descriptors.Node.removeChild.value.call(slot, firstChild);\n        }\n\n        // 4c. Append the slotables, if any\n        for (var _i4 = 0; _i4 < slotables.length; _i4++) {\n            var _slotable = slotables[_i4];\n            slotState.assignedSlot = slot;\n            // if we break out the physical portion to go async, we still\n            // need to set the assignedSlot property sync\n            descriptors.Node.appendChild.value.call(slot, _slotable);\n        }\n\n        // 4d. Append the fallback content, if no slots\n        if (!slotables.length) {\n            var _childNodes = slotState.childNodes;\n            for (var _i5 = 0; _i5 < _childNodes.length; _i5++) {\n                descriptors.Node.appendChild.value.call(slot, _childNodes[_i5]);\n            }\n        }\n    });\n}\n\nfunction assignSlotablesForATree(tree, noSignalSlots) {\n    // https://dom.spec.whatwg.org/#assign-slotables-for-a-tree\n    // To assign slotables for a tree, given a tree tree and an optional set of slots noSignalSlots\n    // (empty unless stated otherwise), run these steps for each slot slot in tree, in tree order:\n    var slots = [];\n\n    if (tree.localName === 'slot') {\n        slots.push(tree);\n    }\n\n    if (tree.hasChildNodes()) {\n        slots.push.apply(slots, _toConsumableArray(tree.querySelectorAll('slot')));\n    }\n\n    for (var i = 0; i < slots.length; i++) {\n        var slot = slots[i];\n\n        // 1. Let suppress signaling flag be set, if slot is in noSignalSlots, and unset otherwise.\n        var suppressSignaling = noSignalSlots && noSignalSlots.indexOf(slot) !== -1;\n\n        // 2. Run assign slotables for slot with suppress signaling flag.\n        assignSlotables(slot, suppressSignaling);\n    }\n}\n\nfunction assignASlot(slotable) {\n    var slot = findASlot(slotable);\n\n    if (slot != null) {\n        assignSlotables(slot);\n    }\n}\n\n// https://dom.spec.whatwg.org/#signaling-slot-change\n\nfunction signalASlotChange(slot) {\n    // https://dom.spec.whatwg.org/#signal-a-slot-change\n    // To signal a slot change, for a slot slot, run these steps:\n\n    // 1. If slot is not in unit of related similar-origin browsing contexts' \n    // signal slot list, append slot to unit of related similar-origin browsing \n    // contexts' signal slot list.\n    if (signalSlotList.indexOf(slot) === -1) {\n        signalSlotList.push(slot);\n    }\n\n    // 2. Queue a mutation observer compound microtask.\n    queueMutationObserverCompoundMicrotask();\n}\n\n// https://dom.spec.whatwg.org/#mutation-algorithms\n\nfunction ensurePreInsertionValidity(node, parent, child) {\n    // https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n    // To ensure pre-insertion validity of a node into a parent before a child, run these steps:\n\n    // Skip (native)\n    // 1. If parent is not a Document, DocumentFragment, or Element node, throw a HierarchyRequestError.\n\n    // 2. If node is a host-including inclusive ancestor of parent, throw a HierarchyRequestError.\n    if (hostIncludingInclusiveAncestor(node, parent)) {\n        throw makeError('HierarchyRequestError');\n    }\n\n    // 3. If child is not null and its parent is not parent, then throw a NotFoundError.\n    if (child != null && child.parentNode !== parent) {\n        throw makeError('NotFoundError');\n    }\n\n    // Skip (native)\n    // 4. If node is not a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction, \n    // or Comment node, throw a HierarchyRequestError.\n    // 5. If either node is a Text node and parent is a document, or node is a doctype \n    // and parent is not a document, throw a HierarchyRequestError.\n    // 6. If parent is a document, and any of the statements below, switched on node, \n    // are true, throw a HierarchyRequestError.\n}\n\nfunction preInsert(node, parent, child) {\n    // https://dom.spec.whatwg.org/#concept-node-pre-insert\n    // To pre-insert a node into a parent before a child, run these steps:\n\n    // 1. Ensure pre-insertion validity of node into parent before child.\n    ensurePreInsertionValidity(node, parent, child);\n\n    // 2. Let reference child be child.\n    var referenceChild = child;\n\n    // 3. If reference child is node, set it to nodes next sibling.\n    referenceChild === node && (referenceChild = node.nextSibling);\n\n    // 4. Adopt node into parents node document.\n    // https://dom.spec.whatwg.org/#concept-node-adopt\n    adopt(node, parent.ownerDocument);\n\n    // 5. Insert node into parent before reference child.\n    // https://dom.spec.whatwg.org/#concept-node-insert\n    insert(node, parent, referenceChild);\n\n    // 6. Return node.\n    return node;\n}\n\nfunction insert(node, parent, child, suppressObservers) {\n    // https://dom.spec.whatwg.org/#concept-node-insert\n    // To insert a node into a parent before a child, with an optional suppress observers flag, run these steps:\n\n    // Skip (Range)\n    // 1. Let count be the number of children of node if it is a DocumentFragment node, and one otherwise.\n    // 2. If child is non-null, run these substeps:\n\n    // 3. Let nodes be nodes children if node is a DocumentFragment node, \n    // and a list containing solely node otherwise.\n    var nodes = void 0;\n\n    // 4. If node is a DocumentFragment node, remove its children with the suppress observers flag set.\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n        nodes = slice(node.childNodes);\n        for (var i = 0; i < nodes.length; i++) {\n            remove(nodes[i], node, true);\n        }\n        // 5. If node is a DocumentFragment node, queue a mutation record of \"childList\" for node with removedNodes nodes.\n        queueMutationRecord('childList', node, { removedNodes: nodes });\n    } else {\n        nodes = [node];\n    }\n\n    // 6. For each node in nodes, in tree order, run these substeps:\n    var parentState = shadow(parent);\n    var parentIsShadow = isShadowRoot(parent);\n    for (var _i6 = 0; _i6 < nodes.length; _i6++) {\n        var _node = nodes[_i6];\n        // 1. Insert node into parent before child or at the end of parent if child is null.\n        var childNodes = parentState.childNodes;\n        if (childNodes) {\n            if (child) {\n                var childIndex = childNodes.indexOf(child);\n                childNodes.splice(childIndex, 0, _node);\n            } else {\n                childNodes.push(_node);\n            }\n            shadow(_node).parentNode = parent;\n            // If it's a shadow root, perform physical insert on the host.\n            if (parentIsShadow) {\n                descriptors.Node.insertBefore.value.call(parentState.host, _node, child);\n            }\n        } else {\n            descriptors.Node.insertBefore.value.call(parent, _node, child);\n        }\n\n        // 2. If parent is a shadow host and node is a slotable, then assign a slot for node.\n        if (parentState.shadowRoot && 'assignedSlot' in _node) {\n            assignASlot(_node);\n        }\n\n        // 3. If parent is a slot whose assigned nodes is the empty list, \n        // then run signal a slot change for parent.\n        if (parent.localName === 'slot' && parent.assignedNodes().length === 0) {\n            // 3a. Physically append the child into the slot.\n            descriptors.Node.appendChild.value.call(parent, _node);\n            // 3b. Do what the spec said\n            signalASlotChange(parent);\n        }\n\n        // 4. Run assign slotables for a tree with nodes tree and a set containing \n        // each inclusive descendant of node that is a slot.\n        var inclusiveSlotDescendants = [];\n        if (_node.localName === 'slot') {\n            inclusiveSlotDescendants.push(_node);\n        }\n        if (_node.hasChildNodes()) {\n            inclusiveSlotDescendants.push.apply(inclusiveSlotDescendants, _toConsumableArray(_node.querySelectorAll('slot')));\n        }\n        assignSlotablesForATree(_node, inclusiveSlotDescendants);\n\n        // Skip (CustomElements)\n        // 5. For each shadow-including inclusive descendant inclusiveDescendant of node, \n        // in shadow-including tree order, run these subsubsteps:\n    }\n\n    // 7. If suppress observers flag is unset, queue a mutation record of \"childList\" for parent \n    // with addedNodes nodes, nextSibling child, and previousSibling childs previous sibling or \n    // parents last child if child is null.\n    if (!suppressObservers) {\n        queueMutationRecord('childList', parent, {\n            addedNodes: nodes,\n            nextSibling: child,\n            previousSibling: child ? child.previousSibling : parent.lastChild\n        });\n    }\n}\n\nfunction append(node, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-append\n    // To append a node to a parent, pre-insert node into parent before null.\n    preInsert(node, parent, null);\n}\n\nfunction replace(child, node, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-replace\n    // To replace a child with node within a parent, run these steps:\n\n    // Skip (native)\n    // 1. If parent is not a Document, DocumentFragment, or Element node, throw a HierarchyRequestError.\n\n    // 2. If node is a host-including inclusive ancestor of parent, throw a HierarchyRequestError.\n    if (hostIncludingInclusiveAncestor(node, parent)) {\n        throw makeError('HierarchyRequestError');\n    }\n\n    // 3. If childs parent is not parent, then throw a NotFoundError.\n    if (child.parentNode !== parent) {\n        throw makeError('NotFoundError');\n    }\n\n    // Skip (native)\n    // 4. If node is not a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction, or Comment node, throw a HierarchyRequestError.\n    // 5. If either node is a Text node and parent is a document, or node is a doctype and parent is not a document, throw a HierarchyRequestError.\n    // 6. If parent is a document, and any of the statements below, switched on node, are true, throw a HierarchyRequestError.\n\n    // 7. Let reference child be childs next sibling.\n    var referenceChild = child.nextSibling;\n\n    // 8. If reference child is node, set it to nodes next sibling.\n    if (referenceChild === node) {\n        referenceChild = node.nextSibling;\n    }\n\n    // 9. Let previousSibling be childs previous sibling.\n    var previousSibling = child.previousSibling;\n\n    // 10. Adopt node into parents node document.\n    adopt(node, parent.ownerDocument);\n\n    // 11. Let removedNodes be the empty list.\n    var removedNodes = [];\n\n    // 12. If childs parent is not null, run these substeps:\n    var childParent = child.parentNode;\n    if (childParent != null) {\n        // 1. Set removedNodes to a list solely containing child.\n        removedNodes.push(child);\n        // 2. Remove child from its parent with the suppress observers flag set.\n        remove(child, parent, true);\n    }\n\n    // 13. Let nodes be nodes children if node is a DocumentFragment node, and a list containing solely node otherwise.\n    var nodes = node instanceof DocumentFragment ? node.childNodes : [node];\n\n    // 14. Insert node into parent before reference child with the suppress observers flag set.\n    insert(node, parent, referenceChild, true);\n\n    // 15. Queue a mutation record of \"childList\" for target parent with addedNodes nodes, \n    // removedNodes removedNodes, nextSibling reference child, and previousSibling previousSibling.\n    queueMutationRecord('childList', parent, {\n        addedNodes: nodes,\n        removedNodes: removedNodes,\n        nextSibling: referenceChild,\n        previousSibling: previousSibling\n    });\n}\n\nfunction replaceAll(node, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-replace-all\n    // To replace all with a node within a parent, run these steps:\n\n    // 1. If node is not null, adopt node into parents node document.\n    if (node != null) {\n        adopt(node, parent.ownerDocument);\n    }\n\n    // 2. Let removedNodes be parents children.\n    var removedNodes = slice(parent.childNodes);\n\n    // 3. Let addedNodes be the empty list if node is null, nodes children if node is a DocumentFragment node, and a list containing node otherwise.\n    var addedNodes = node === null ? [] : node.nodeType === Node.DOCUMENT_FRAGMENT_NODE ? slice(node.childNodes) : [node];\n\n    // 4. Remove all parents children, in tree order, with the suppress observers flag set.\n    for (var i = 0; i < removedNodes.length; i++) {\n        remove(removedNodes[i], parent, true);\n    }\n\n    // 5. If node is not null, insert node into parent before null with the suppress observers flag set.\n    if (node != null) {\n        insert(node, parent, null, true);\n    }\n\n    // 6. Queue a mutation record of \"childList\" for parent with addedNodes addedNodes and removedNodes removedNodes.\n    queueMutationRecord('childList', parent, { addedNodes: addedNodes, removedNodes: removedNodes });\n}\n\nfunction preRemove(child, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-pre-remove\n    // To pre-remove a child from a parent, run these steps:\n\n    // 1. If childs parent is not parent, then throw a NotFoundError.\n    if (child.parentNode !== parent) {\n        throw makeError('NotFoundError');\n    }\n\n    // 2. Remove child from parent.\n    remove(child, parent);\n\n    // 3. Return child.\n    return child;\n}\n\nfunction remove(node, parent, suppressObservers) {\n    // https://dom.spec.whatwg.org/#concept-node-remove\n    // To remove a node from a parent, with an optional suppress observers flag, run these steps:\n\n    // Skip (Range)\n    // 1. Let index be nodes index.\n    // 2. For each range whose start node is an inclusive descendant of node, set its start to (parent, index).\n    // 3. For each range whose end node is an inclusive descendant of node, set its end to (parent, index).\n    // 4. For each range whose start node is parent and start offset is greater than index, decrease its start offset by one.\n    // 5. For each range whose end node is parent and end offset is greater than index, decrease its end offset by one.\n\n    // Skip (NodeIterator)\n    // 6. For each NodeIterator object iterator whose roots node document is nodes node document, \n    // run the NodeIterator pre-removing steps given node and iterator.\n\n    // 7. Let oldPreviousSibling be nodes previous sibling.\n    var oldPreviousSibling = node.previousSibling;\n\n    // 8. Let oldNextSibling be nodes next sibling.\n    var oldNextSibling = node.nextSibling;\n\n    // 9. Remove node from its parent.\n    var nodeState = shadow(node);\n    var childNodes = shadow(parent).childNodes;\n    if (childNodes) {\n        var nodeIndex = childNodes.indexOf(node);\n        childNodes.splice(nodeIndex, 1);\n        delete nodeState.parentNode;\n        var parentNode = descriptors.Node.parentNode.get.call(node);\n        descriptors.Node.removeChild.value.call(parentNode, node);\n    } else {\n        descriptors.Node.removeChild.value.call(parent, node);\n    }\n\n    // 10. If node is assigned, then run assign slotables for nodes assigned slot.\n    if (nodeState.assignedSlot) {\n        assignSlotables(nodeState.assignedSlot);\n        nodeState.assignedSlot = null;\n    }\n\n    // 11. If parent is a slot whose assigned nodes is the empty list,\n    // then run signal a slot change for parent.\n    if (parent.localName === 'slot' && parent.assignedNodes().length === 0) {\n        signalASlotChange(parent);\n    }\n\n    // 12. If node has an inclusive descendant that is a slot, then:\n    var inclusiveSlotDescendants = [];\n    if (node.localName === 'slot') {\n        inclusiveSlotDescendants.push(node);\n    }\n    if (node.hasChildNodes()) {\n        inclusiveSlotDescendants.push.apply(inclusiveSlotDescendants, _toConsumableArray(node.querySelectorAll('slot')));\n    }\n    if (inclusiveSlotDescendants.length) {\n        // 1. Run assign slotables for a tree with parents tree.\n        assignSlotablesForATree(parent);\n        // 2. Run assign slotables for a tree with nodes tree and a \n        // set containing each inclusive descendant of node that is a slot.\n        assignSlotablesForATree(node, inclusiveSlotDescendants);\n    }\n\n    // Skip (other)\n    // 13. Run the removing steps with node and parent.\n\n    // Skip (CustomElements)\n    // 14. If node is custom, then enqueue a custom element callback reaction \n    // with node, callback name \"disconnectedCallback\", and an empty argument list.\n\n    // Skip (CustomElements)\n    // 15. For each shadow-including descendant descendant of node, in \n    // shadow-including tree order, run these substeps:\n\n    // 16. For each inclusive ancestor inclusiveAncestor of parent...\n    var inclusiveAncestor = parent;\n    while (inclusiveAncestor) {\n        // ...if inclusiveAncestor has any registered observers whose options' \n        // subtree is true, then for each such registered observer registered... \n        var ancestorObservers = shadow(inclusiveAncestor).observers;\n        if (ancestorObservers) {\n            for (var i = 0; i < ancestorObservers.length; i++) {\n                var ancestorObserver = ancestorObservers[i];\n                if (ancestorObserver.options.subtree) {\n                    // ..append a transient registered observer whose observer and options are \n                    // identical to those of registered and source which is registered to nodes \n                    // list of registered observers.\n                    var transientObserver = createTransientObserver(ancestorObserver, node);\n                    mutationObservers.push(transientObserver);\n                }\n            }\n        }\n        inclusiveAncestor = inclusiveAncestor.parentNode;\n    }\n\n    // 17. If suppress observers flag is unset, queue a mutation record of \"childList\" \n    // for parent with removedNodes a list solely containing node, nextSibling \n    // oldNextSibling, and previousSibling oldPreviousSibling.\n    if (!suppressObservers) {\n        queueMutationRecord('childList', parent, {\n            removedNodes: [node],\n            nextSibling: oldNextSibling,\n            previousSibling: oldPreviousSibling\n        });\n    }\n}\n\n// https://dom.spec.whatwg.org/#mutation-observers\n\n// TODO: test everything that queues mutation records\n\nfunction getOrCreateNodeObservers(node) {\n    var nodeState = shadow(node);\n    var observers = nodeState.observers;\n    return observers ? observers : nodeState.observers = [];\n}\n\nfunction createMutationObserver(callback) {\n    return {\n        callback: callback,\n        queue: [],\n        nodes: [],\n        observe: function observe(node, options) {\n            if (this.nodes.length === 0) {\n                mutationObservers.push(this);\n            }\n            var nodeObservers = getOrCreateNodeObservers(node);\n            nodeObservers.push({ instance: this, options: options });\n            this.nodes.push(node);\n        },\n        disconnect: function disconnect() {\n            var index = mutationObservers.indexOf(this);\n            mutationObservers.splice(index, 1);\n            for (var i = 0; i < this.nodes.length; i++) {\n                var nodeObservers = getOrCreateNodeObservers(this.nodes[i]);\n                for (var j = 0; j < nodeObservers.length; j++) {\n                    if (nodeObservers[j].instance === this) {\n                        nodeObservers.splice(j, 1);\n                        break;\n                    }\n                }\n            }\n            this.nodes = [];\n        }\n    };\n}\n\nfunction createTransientObserver(observer, options, node) {\n    var transientObserver = {\n        observer: observer,\n        callback: observer.callback,\n        options: observer.options,\n        queue: [],\n        node: node,\n        disconnect: function disconnect() {\n            var nodeObservers = getOrCreateNodeObservers(this.node);\n            for (var j = 0; j < nodeObservers.length; j++) {\n                if (nodeObservers[j].instance === this) {\n                    nodeObservers.splice(j, 1);\n                    break;\n                }\n            }\n        }\n    };\n\n    var nodeObservers = getOrCreateNodeObservers(node);\n    nodeObservers.append({ instance: transientObserver, options: options });\n\n    return transientObserver;\n}\n\nvar mutationObserverCompoundMicrotaskQueuedFlag = false;\n\nvar mutationObservers = [];\nvar signalSlotList = [];\nvar theEmptyList = Object.freeze([]);\n\nfunction queueMutationRecord(type, target, details) {\n    // https://dom.spec.whatwg.org/#queueing-a-mutation-record\n    // 1. Let interested observers be an initially empty set of \n    // MutationObserver objects optionally paired with a string.\n    var interestedObservers = [];\n    var pairedStrings = [];\n    // 2. Let nodes be the inclusive ancestors of target.\n    var nodes = [target];\n    var ancestor = target;\n    while (ancestor = ancestor.parentNode) {\n        nodes.push(ancestor);\n    }\n    // 3. Then, for each node in nodes... \n    for (var i = 0; i < nodes.length; i++) {\n        var node = nodes[i];\n        var observers = shadow(node).observers;\n        if (!observers) {\n            continue;\n        }\n        // ...and then for each registered observer (with registered \n        // observers options as options) in nodes list of registered \n        // observers...\n        for (var j = 0; j < observers.length; j++) {\n            var registeredObserver = observers[i];\n            var options = registeredObserver.options;\n            // ...run these substeps:\n            // 1. If none of the following are true:\n            if (node != target && !options.subtree) {\n                continue;\n            }\n            if (type === 'attributes') {\n                if (!options.attributes) {\n                    continue;\n                }\n                // if options' attributeFilter is present, and options' attributeFilter\n                // does not contain name or namespace is non-null\n                if (options.attributeFilter && (options.attributeFilter.indexOf(details.name) === -1 || details.namespace != null)) {\n                    continue;\n                }\n            }\n            if (type === 'characterData' && !options.characterData) {\n                continue;\n            }\n            if (type === 'childList' && !options.childList) {\n                continue;\n            }\n            // ...then run the subsubsteps:\n            // 1. If registered observers observer is not in interested observers, \n            // append registered observers observer to interested observers.\n            var observer = registeredObserver.instance;\n            var index = interestedObservers.indexOf(observer);\n            if (index === -1) {\n                index = interestedObservers.length;\n                interestedObservers[index] = observer;\n            }\n            // 2. If either type is \"attributes\" and options attributeOldValue is true, \n            // or type is \"characterData\" and options characterDataOldValue is true, \n            // set the paired string of registered observers observer in interested observers to oldValue.\n            if (type === 'attributes' && options.attributeOldValue || type === 'characterData' && options.characterDataOldValue) {\n                pairedStrings[index] = details.oldValue;\n            }\n        }\n    }\n\n    // 4. Then, for each observer in interested observers, run these substeps:\n    for (var _i7 = 0; _i7 < interestedObservers.length; _i7++) {\n        var _observer = interestedObservers[_i7];\n        // 1. Let record be a new MutationRecord object with its type set to type and target set to target.\n        var record = {\n            type: type,\n            target: target,\n            attributeName: null,\n            attributeNamespace: null,\n            addedNodes: theEmptyList,\n            removedNodes: theEmptyList,\n            previousSibling: null,\n            nextSibling: null,\n            oldValue: null\n        };\n        // 2. If name and namespace are given, set records attributeName to name, and records attributeNamespace to namespace.\n        if ('name' in details) {\n            record.attributeName = details.name;\n            record.attributeNamespace = details.namespace;\n        }\n        // 3. If addedNodes is given, set records addedNodes to addedNodes.\n        if ('addedNodes' in details) {\n            record.addedNodes = Object.freeze(details.addedNodes);\n        }\n        // 4. If removedNodes is given, set records removedNodes to removedNodes.\n        if ('removedNodes' in details) {\n            record.removedNodes = Object.freeze(details.removedNodes);\n        }\n        // 5. If previousSibling is given, set records previousSibling to previousSibling.\n        if ('previousSibling' in details) {\n            record.previousSibling = details.previousSibling;\n        }\n        // 6. If nextSibling is given, set records nextSibling to nextSibling.\n        if ('nextSibling' in details) {\n            record.nextSibling = details.nextSibling;\n        }\n        // 7. If observer has a paired string, set records oldValue to observers paired string.\n        var pairedString = pairedStrings[_i7];\n        if (pairedString != null) {\n            record.oldValue = pairedString;\n        }\n        // 8. Append record to observers record queue.\n        Object.freeze(record);\n        _observer.queue.push(record);\n\n        // TODO: consider setting prototype to MutationRecord.prototype\n    }\n\n    // 5. Queue a mutation observer compound microtask.\n    queueMutationObserverCompoundMicrotask();\n}\n\nfunction queueMutationObserverCompoundMicrotask() {\n    if (mutationObserverCompoundMicrotaskQueuedFlag) {\n        return;\n    }\n    mutationObserverCompoundMicrotaskQueuedFlag = true;\n    setImmediate(notifyMutationObservers);\n}\n\nfunction notifyMutationObservers() {\n    mutationObserverCompoundMicrotaskQueuedFlag = false;\n    var notifyList = mutationObservers.slice();\n    var signalList = signalSlotList.splice(0, signalSlotList.length);\n    for (var i = 0; i < notifyList.length; i++) {\n        var observer = notifyList[i];\n        var queue = observer.queue.splice(0, observer.queue.length);\n        for (var j = mutationObservers.length - 1; j >= 0; j--) {\n            var transientObserver = mutationObservers[j];\n            if (transientObserver.observer === observer) {\n                mutationObservers.splice(j, 1);\n                transientObserver.disconnect();\n            }\n        }\n        if (queue.length) {\n            try {\n                observer.callback.call(observer.interface, queue, observer.interface);\n            } catch (error) {\n                reportError(error);\n            }\n        }\n    }\n    for (var _i8 = 0; _i8 < signalList.length; _i8++) {\n        var slot = signalList[_i8];\n        var event = slot.ownerDocument.createEvent('event');\n        event.initEvent('slotchange', true, false);\n        try {\n            slot.dispatchEvent(event);\n        } catch (error) {\n            reportError(error);\n        }\n    }\n}"]}