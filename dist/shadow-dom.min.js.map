{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src\\interfaces\\Attr.js","src\\interfaces\\CharacterData.js","src\\interfaces\\CustomEvent.js","src\\interfaces\\DOMTokenList.js","src\\interfaces\\Document.js","src\\interfaces\\Element.js","src\\interfaces\\Event.js","src\\interfaces\\EventTarget.js","src\\interfaces\\HTMLSlotElement.js","src\\interfaces\\HTMLTableElement.js","src\\interfaces\\HTMLTableRowElement.js","src\\interfaces\\HTMLTableSectionElement.js","src\\interfaces\\MutationObserver.js","src\\interfaces\\NamedNodeMap.js","src\\interfaces\\Node.js","src\\interfaces\\ShadowRoot.js","src\\interfaces\\Text.js","src\\main.js","src\\mixins\\ChildNode.js","src\\mixins\\DocumentOrShadowRoot.js","src\\mixins\\NonDocumentTypeChildNode.js","src\\mixins\\NonElementParentNode.js","src\\mixins\\ParentNode.js","src\\mixins\\Slotable.js","src\\patch.js","src\\reflect.js","src\\utils.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireWildcard","__esModule","Object","prototype","hasOwnProperty","default","_classCallCheck","TypeError","defineProperty","value","_createClass","enumerable","configurable","writable","key","_utils","$","_class","this","get","descriptors","Attr","set","setExistingAttributeValue","getData","CharacterData","data","replaceData","bubbles","cancelable","composed","detail","document","createEvent","initCustomEvent","setShadowState","validateTokens","validateToken","makeError","test","createDOMTokenList","getAttribute","split","sort","create","DOMTokenList","element","localName","tokens","getOrCreateDOMTokenList","getShadowState","tokenLists","indexOf","arguments","Array","push","setAttributeValue","join","splice","slice","Document","getElementsByTagName","filterByRoot","getElementsByTagNameNS","getElementsByClassName","name","nodeType","Node","DOCUMENT_NODE","isShadowRoot","clone","_interopRequireDefault","_ShadowRoot","_ShadowRoot2","Element","attributes","getNamedItem","changeAttribute","ownerDocument","createAttribute","appendAttribute","createAttributeNS","prefix","namespaceURI","removeAttributeByName","removeAttributeByNamespace","setAttribute","ownerElement","removeAttribute","mode","isValidCustomElementName","shadowRoot","createDocumentFragment","extend","host","childNodes","removeChild","parentNode","matches","parentElement","insertAdjacent","createTextNode","parseHTMLFragment","serializeHTMLFragment","replaceAll","DOCUMENT_FRAGMENT_NODE","createElement","replace","hasRelatedTarget","initEvent","stopPropagation","stopImmediatePropagationFlag","currentTarget","path","Window","closedShadowHidden","shadowIncludingRoot","target","builtInComposedEvents","type","relatedTarget","calculatePath","Event","FocusEvent","MouseEvent","retarget","getTheParent","shadowIncludingInclusiveAncestor","root","defaultView","_slicedToArray","assignedSlot","calculateRelatedTarget","calculateTarget","Symbol","iterator","next","done","isArray","_typeof","constructor","addEventListener","removeEventListener","dispatchEvent","callback","capture","once","passive","EventListenerCollection","addListener","attach","removeListener","empty","detach","hostListeners","shadowListeners","eventPhase","CAPTURING_PHASE","invokeListeners","AT_TARGET","getListeners","BUBBLING_PHASE","listeners","calculatedPath","c","stopImmediatePropagation","flatten","assignedNodes","findFlattenedSlotables","caption","remove","tHead","tFoot","rows","cells","createMutationObserver","observer","interface","observe","disconnect","queue","ancestorOf","preceding","reverse","Math","abs","min","elementTextContent","ELEMENT_NODE","TEXT_NODE","hasChildNodes","nextSibling","N","normalize","DOCUMENT_TYPE_NODE","publicId","systemId","ATTRIBUTE_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","isEqualNode","atttributes","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_DISCONNECTED","preInsert","append","preRemove","firstChild","lastChild","previousSibling","nodeValue","insert","_patch","_patch2","nativeShadowDom","window","convertNodesIntoANode","native","activeElement","previousElementSibling","descriptor","nextElementSibling","querySelectorAll","treeOrderRecursiveSelectFirst","id","children","firstElementChild","lastElementChild","childElementCount","treeOrderRecursiveSelectAll","reflect","patchAll","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","_Attr2","_CharacterData2","CustomEvent","_CustomEvent2","_Document2","_DOMTokenList2","_Element2","_Event2","_Event","EventTarget","_EventTarget2","HTMLSlotElement","HTMLUnknownElement","_HTMLSlotElement2","HTMLTableElement","_HTMLTableElement2","HTMLTableRowElement","_HTMLTableRowElement2","HTMLTableSectionElement","_HTMLTableSectionElement2","MutationObserver","_MutationObserver2","NamedNodeMap","_NamedNodeMap2","_Node2","Text","_Text2","DocumentType","_ChildNode2","_DocumentOrShadowRoot2","_NonDocumentTypeChildNode2","_NonElementParentNode2","DocumentFragment","_ParentNode2","_Slotable2","HTMLElement","classList","innerHTML","outerHTML","insertAdjacentText","insertAdjacentElement","insertAdjacentHTML","_reflect","_Attr","_CharacterData","_CustomEvent","_Document","_DOMTokenList","_Element","_EventTarget","_HTMLSlotElement","_HTMLTableElement","_HTMLTableRowElement","_HTMLTableSectionElement","_MutationObserver","_NamedNodeMap","_Node","_Text","_ChildNode","_DocumentOrShadowRoot","_NonDocumentTypeChildNode","_NonElementParentNode","_ParentNode","_Slotable","reflectString","toLowerCase","reflectBoolean","hasAttribute","reflectInteger","parseInt","toString","reflectFloat","parseFloat","reflectDOMTokenList","reflectHTMLElement","getElementById","reflectTextContent","textContent","getOwnPropertyNames","interfaces","className","slot","title","lang","translate","dir","hidden","tabIndex","accessKey","draggable","contextMenu","HTMLMenuElement","spellcheck","contentEditable","HTMLAnchorElement","download","rel","rev","relList","hreflang","text","HTMLAreaElement","alt","coords","shape","HTMLBaseElement","href","HTMLButtonElement","autofocus","disabled","form","HTMLFormElement","formAction","formEnctype","formMethod","formNoValidate","formTarget","menu","HTMLCanvasElement","width","height","HTMLDataElement","HTMLDetailsElement","open","HTMLEmbedElement","src","HTMLFieldSetElement","acceptCharset","action","autocomplete","enctype","encoding","method","noValidate","HTMLIFrameElement","srcdoc","sandbox","allowFullscreen","HTMLImageElement","srcset","crossOrigin","useMap","isMap","HTMLInputElement","accept","defaultChecked","dirName","inputMode","max","maxLength","minLength","multiple","pattern","placeholder","readOnly","required","size","step","defaultValue","HTMLKeygenElement","challenge","keytype","HTMLLabelElement","htmlFor","HTMLLegendElement","HTMLLIElement","HTMLLinkElement","media","sizes","HTMLMapElement","HTMLMediaElement","preload","loop","autoplay","mediaGroup","controls","defaultMuted","label","HTMLMenuItemElement","icon","checked","radiogroup","HTMLMetaElement","httpEquiv","content","HTMLMeterElement","low","high","optimum","HTMLModElement","cite","dateTime","HTMLObjectElement","typeMustMatch","HTMLOListElement","reversed","start","HTMLOptGroupElement","HTMLOptionElement","defaultSelected","HTMLOutputElement","HTMLParamElement","HTMLProgressElement","HTMLQuoteElement","HTMLScriptElement","charset","async","defer","nonce","HTMLSelectElement","HTMLSourceElement","HTMLStyleElement","HTMLTableCellElement","colSpan","rowSpan","headers","HTMLTableColElement","span","HTMLTableHeaderCellElement","scope","abbr","HTMLTextAreaElement","cols","wrap","HTMLTimeElement","HTMLTrackElement","kind","srclang","HTMLVideoElement","poster","_toConsumableArray","from","appendChild","message","reportError","console","error","d","getOwnPropertyDescriptor","_shadow","nodeName","parsingElement","parsingFragment","qualifiedName","p","descendant","inclusiveDescendant","ancestor","inclusiveAncestor","cloneNode","adopt","hostIncludingInclusiveAncestor","shadowIncludingDescendant","shadowIncludingInclusiveDescendant","shadowIncludingAncestor","updateSlotName","assignSlotablesForATree","updateSlotableName","assignSlotables","assignASlot","attributeChangeSteps","queueMutationRecord","namespace","oldValue","setAttributeNodeNS","removeAttributeNode","replaceAttribute","attribute","getNamedItemNS","findASlot","findSlotables","apply","concat","signalASlotChange","setImmediate","renderSlotablesAsync","signalSlotList","queueMutationObserverCompoundMicrotask","ensurePreInsertionValidity","removedNodes","v","h","m","insertBefore","g","addedNodes","observers","options","subtree","createTransientObserver","mutationObservers","getOrCreateNodeObservers","nodes","instance","node","attributeFilter","characterData","childList","attributeOldValue","characterDataOldValue","attributeName","attributeNamespace","theEmptyList","freeze","mutationObserverCompoundMicrotaskQueuedFlag","notifyMutationObservers","setTimeout"],"mappings":"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","file":"./dist/shadow-dom.min.js.map","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-attr\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'value',\n        get: function get() {\n            return $.descriptors.Attr.value.get.call(this);\n        },\n        set: function set(value) {\n            $.setExistingAttributeValue(this, value);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-characterdata\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar getData = $.descriptors.CharacterData.data.get;\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'appendData',\n        value: function appendData(data) {\n            var length = getData.call(this).length;\n            $.replaceData(this, length, 0, data);\n        }\n    }, {\n        key: 'insertData',\n        value: function insertData(offset, data) {\n            $.replaceData(this, offset, 0, data);\n        }\n    }, {\n        key: 'deleteData',\n        value: function deleteData(offset, count) {\n            $.replaceData(this, offset, count, '');\n        }\n    }, {\n        key: 'replaceData',\n        value: function replaceData(offset, count, data) {\n            $.replaceData(this, offset, count, data);\n        }\n    }, {\n        key: 'data',\n        get: function get() {\n            return getData.call(this);\n        },\n        set: function set(value) {\n            var length = getData.call(this).length;\n            $.replaceData(this, 0, length, value);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } // https://dom.spec.whatwg.org/#interface-customevent\n\nvar _class = function _class(type, init) {\n    _classCallCheck(this, _class);\n\n    var bubbles = false;\n    var cancelable = false;\n    var composed = false;\n    var detail = null;\n    if (init) {\n        bubbles = init.bubbles === true;\n        cancelable = init.cancelable === true;\n        composed = init.composed === true;\n        detail = init.detail || null;\n    }\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, bubbles, cancelable, detail);\n    $.setShadowState(event, { composed: composed });\n    return event;\n};\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-domtokenlist\n\nexports.getOrCreateDOMTokenList = getOrCreateDOMTokenList;\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'item',\n\n\n        // TODO: Caveat about indexer expressions?\n        value: function item(index) {\n            var state = $.getShadowState(this);\n            return index >= state.tokens.length ? null : state.tokens[index];\n        }\n    }, {\n        key: 'contains',\n        value: function contains(token) {\n            var state = $.getShadowState(this);\n            return state.tokens.indexOf(token) !== -1;\n        }\n    }, {\n        key: 'add',\n        value: function add() {\n            for (var _len = arguments.length, tokens = Array(_len), _key = 0; _key < _len; _key++) {\n                tokens[_key] = arguments[_key];\n            }\n\n            validateTokens(tokens);\n            var state = $.getShadowState(this);\n            for (var i = 0; i < tokens.length; i++) {\n                var token = tokens[i];\n                var index = state.tokens.indexOf(token);\n                if (index === -1) {\n                    state.tokens.push(token);\n                }\n            }\n            state.tokens.sort();\n            $.setAttributeValue(state.element, state.localName, state.tokens.join(' '));\n        }\n    }, {\n        key: 'remove',\n        value: function remove() {\n            for (var _len2 = arguments.length, tokens = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                tokens[_key2] = arguments[_key2];\n            }\n\n            validateTokens(tokens);\n            var state = $.getShadowState(this);\n            for (var i = 0; i < tokens.length; i++) {\n                var token = tokens[i];\n                var index = state.tokens.indexOf(token);\n                if (index !== -1) {\n                    state.tokens.splice(index, 1);\n                }\n            }\n            $.setAttributeValue(state.element, state.localName, state.tokens.join(' '));\n        }\n    }, {\n        key: 'toggle',\n        value: function toggle(token, force) {\n            validateToken(token);\n            var state = $.getShadowState(this);\n            var index = state.tokens.indexOf(token);\n            if (index !== -1) {\n                if (arguments.length === 1 || force === false) {\n                    state.tokens.splice(index, 1);\n                    $.setAttributeValue(state.element, state.localName, state.tokens.join(' '));\n                    return false;\n                } else {\n                    return true;\n                }\n            } else {\n                if (force === false) {\n                    return false;\n                } else {\n                    state.tokens.push(token);\n                    state.tokens.sort();\n                    $.setAttributeValue(state.element, state.localName, state.tokens.join(' '));\n                    return true;\n                }\n            }\n        }\n    }, {\n        key: 'replace',\n        value: function replace(token, newToken) {\n            validateToken(token);\n            validateToken(newToken);\n            var state = $.getShadowState(this);\n            var index = state.tokens.indexOf(token);\n            if (index === -1) {\n                return;\n            }\n            state.tokens[index] = newToken;\n            state.tokens.sort();\n            $.setAttributeValue(state.element, state.localName, state.tokens.join(' '));\n        }\n    }, {\n        key: 'length',\n        get: function get() {\n            var state = $.getShadowState(this);\n            return state.tokens.length;\n        }\n    }, {\n        key: 'value',\n        get: function get() {\n            var state = $.getShadowState(this);\n            return state.element.getAttribute(state.localName) || '';\n        },\n        set: function set(value) {\n            var state = $.getShadowState(this);\n            $.setAttributeValue(state.element, state.localName, value);\n            state.tokens = $.slice(this);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;\n\n\nfunction validateTokens(tokens) {\n    for (var i = 0; i < tokens.length; i++) {\n        validateToken(tokens[i]);\n    }\n}\n\nfunction validateToken(token) {\n    if (token == '') {\n        throw $.makeError('SyntaxError');\n    }\n    if (/\\s/.test(token)) {\n        throw $.makeError('InvalidCharacterError');\n    }\n}\n\nfunction createDOMTokenList(element, localName) {\n    // TODO: run the steps per the DOM spec for 'when a DOMTokenList is created'\n    var originalValue = element.getAttribute(localName);\n    var tokens = originalValue ? originalValue.split(/\\s/).sort() : [];\n    var tokenList = Object.create(DOMTokenList.prototype);\n    $.setShadowState(tokenList, { element: element, localName: localName, tokens: tokens });\n    return tokenList;\n}\n\nfunction getOrCreateDOMTokenList(element, localName) {\n    var elementState = $.getShadowState(element) || $.setShadowState(element, { tokenLists: {} });\n    if (!elementState.tokenLists) {\n        elementState.tokenLists = {};\n    }\n    var tokenList = void 0;\n    if (tokenList = elementState.tokenLists[localName]) {\n        return tokenList;\n    }\n    return elementState.tokenLists[localName] = createDOMTokenList(element, localName);\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-document\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'getElementsByTagName',\n\n\n        // TODO: tests\n        value: function getElementsByTagName(qualifiedName) {\n            var results = $.descriptors.Document.getElementsByTagName.value.call(this, qualifiedName);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByTagNameNS',\n        value: function getElementsByTagNameNS(ns, localName) {\n            var results = $.descriptors.Document.getElementsByTagNameNS.value.call(this, ns, localName);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByClassName',\n        value: function getElementsByClassName(names) {\n            var results = $.descriptors.Document.getElementsByClassName.value.call(this, name);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'importNode',\n        value: function importNode(node, deep) {\n            if (node.nodeType === Node.DOCUMENT_NODE || $.isShadowRoot(node)) {\n                throw $.makeError('NotSupportedError');\n            }\n\n            return $.clone(node, this, deep);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _ShadowRoot = require('../interfaces/ShadowRoot.js');\n\nvar _ShadowRoot2 = _interopRequireDefault(_ShadowRoot);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'setAttribute',\n\n\n        // TODO: tests\n        value: function setAttribute(qualifiedName, value) {\n            var attribute = $.descriptors.Element.attributes.get.call(this).getNamedItem(qualifiedName);\n            if (!attribute) {\n                attribute = this.ownerDocument.createAttribute(qualifiedName);\n                $.descriptors.Attr.value.set.call(attribute, value);\n                $.appendAttribute(attribute, this);\n                return;\n            }\n            $.changeAttribute(attribute, this, value);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'setAttributeNS',\n        value: function setAttributeNS(namespace, qualifiedName, value) {\n            var dummy = document.createAttributeNS(namespace, qualifiedName);\n            $.setAttributeValue(this, dummy.localName, value, dummy.prefix, dummy.namespaceURI);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'removeAttribute',\n        value: function removeAttribute(qualifiedName) {\n            $.removeAttributeByName(qualifiedName, this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'removeAttributeNS',\n        value: function removeAttributeNS(namespace, localName) {\n            $.removeAttributeByNamespace(namespace, localName, this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'setAttributeNode',\n        value: function setAttributeNode(attr) {\n            return $.setAttribute(attr, this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'setAttributeNodeNS',\n        value: function setAttributeNodeNS(attr) {\n            return $.setAttribute(attr, this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'removeAttributeNode',\n        value: function removeAttributeNode(attr) {\n            if (attr.ownerElement !== this) {\n                throw $.makeError('NotFoundError');\n            }\n            $.removeAttribute(attr, this);\n            return attr;\n        }\n    }, {\n        key: 'attachShadow',\n        value: function attachShadow(init) {\n            // https://dom.spec.whatwg.org/#dom-element-attachshadow\n            if (!init || init.mode !== 'open' && init.mode !== 'closed') {\n                throw $.makeError('TypeError');\n            }\n\n            if (this.namespaceURI !== 'http://www.w3.org/1999/xhtml') {\n                throw $.makeError('NotSupportedError');\n            }\n\n            switch (this.localName) {\n                case \"article\":case \"aside\":case \"blockquote\":case \"body\":\n                case \"div\":case \"footer\":case \"h1\":case \"h2\":case \"h3\":\n                case \"h4\":case \"h5\":case \"h6\":case \"header\":case \"main\":\n                case \"nav\":case \"p\":case \"section\":case \"span\":\n                    break;\n                default:\n                    if ($.isValidCustomElementName(this.localName)) {\n                        break;\n                    }\n                    throw $.makeError('NotSupportedError');\n            }\n\n            if (this.shadowRoot) {\n                throw $.makeError('InvalidStateError');\n            }\n\n            var shadow = this.ownerDocument.createDocumentFragment();\n\n            $.extend(shadow, _ShadowRoot2.default);\n\n            $.setShadowState(shadow, {\n                host: this,\n                mode: init.mode,\n                childNodes: []\n            });\n\n            var originalChildNodes = $.descriptors.Node.childNodes.get.call(this);\n            var removeChild = $.descriptors.Node.removeChild.value;\n            var savedChildNodes = new Array(originalChildNodes.length);\n            var firstChild = void 0;\n            var i = 0;\n            while (firstChild = originalChildNodes[0]) {\n                var childState = $.getShadowState(firstChild) || $.setShadowState(firstChild, {});\n                childState.parentNode = this;\n                savedChildNodes[i++] = firstChild;\n                removeChild.call(this, firstChild);\n            }\n\n            var hostState = $.getShadowState(this);\n            if (!hostState) {\n                hostState = {};\n                $.setShadowState(this, hostState);\n            }\n            hostState.shadowRoot = shadow;\n            hostState.childNodes = savedChildNodes;\n\n            return shadow;\n        }\n    }, {\n        key: 'closest',\n\n\n        // TODO: tests\n        value: function closest(selectors) {\n            var element = this;\n\n            do {\n                if (element.matches(selectors)) {\n                    return element;\n                }\n            } while (element = element.parentElement);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByTagName',\n        value: function getElementsByTagName(qualifiedName) {\n            var results = $.descriptors.Element.getElementsByTagName.value.call(this, qualifiedName);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByTagNameNS',\n        value: function getElementsByTagNameNS(ns, localName) {\n            var results = $.descriptors.Element.getElementsByTagNameNS.value.call(this, ns, localName);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'getElementsByClassName',\n        value: function getElementsByClassName(names) {\n            var results = $.descriptors.Element.getElementsByClassName.value.call(this, name);\n            return $.filterByRoot(this, results);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'insertAdjacentElement',\n        value: function insertAdjacentElement(where, element) {\n            // https://dom.spec.whatwg.org/#dom-element-insertadjacentelement\n            return $.insertAdjacent(this, where, element);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'insertAdjacentText',\n        value: function insertAdjacentText(where, data) {\n            // https://dom.spec.whatwg.org/#dom-element-insertadjacenttext\n            var text = this.ownerDocument.createTextNode(data);\n            $.insertAdjacent(this, where, text);\n            return;\n        }\n\n        // https://w3c.github.io/DOM-Parsing/#extensions-to-the-element-interface\n\n        // TODO: more thorough tests of the serialization\n\n    }, {\n        key: 'insertAdjacentHTML',\n\n\n        // TODO: tests\n        value: function insertAdjacentHTML(position, text) {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-insertadjacenthtml\n            // We aren't going to go exactly by the books for this one.\n            var fragment = $.parseHTMLFragment(text, this);\n            $.insertAdjacent(this, position, fragment);\n        }\n    }, {\n        key: 'attributes',\n\n\n        // TODO: tests\n        get: function get() {\n            var attributes = $.descriptors.Element.attributes.get.call(this);\n            var shadowState = $.getShadowState(attributes);\n            if (!shadowState) {\n                $.setShadowState(attributes, { element: this });\n            }\n            return attributes;\n        }\n    }, {\n        key: 'shadowRoot',\n        get: function get() {\n            // https://dom.spec.whatwg.org/#dom-element-shadowroot\n            var shadowRoot = null;\n            var shadowState = $.getShadowState(this);\n            if (shadowState) {\n                shadowRoot = shadowState.shadowRoot;\n                if (!shadowRoot || shadowRoot.mode === 'closed') {\n                    return null;\n                }\n            }\n            return shadowRoot;\n        }\n    }, {\n        key: 'innerHTML',\n        get: function get() {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-innerhtml\n            return $.serializeHTMLFragment(this);\n        }\n\n        // TODO: MutationObserver tests\n        ,\n        set: function set(value) {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-innerhtml\n            var fragment = $.parseHTMLFragment(value, this);\n            $.replaceAll(fragment, this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'outerHTML',\n        get: function get() {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-outerhtml\n            return $.serializeHTMLFragment({ childNodes: [this] });\n        }\n\n        // TODO: tests\n        ,\n        set: function set(value) {\n            // https://w3c.github.io/DOM-Parsing/#dom-element-outerhtml\n            var parent = this.parentNode;\n            if (parent === null) {\n                return;\n            }\n            if (parent.nodeType === Node.DOCUMENT_NODE) {\n                throw $.makeError('NoModificationAllowedError');\n            }\n            if (parent.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n                parent = this.ownerDocument.createElement('body');\n            }\n            var fragment = $.parseHTMLFragment(value, parent);\n            $.replace(this, fragment, this.parentNode);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.hasRelatedTarget = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-event\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class(type, init) {\n        _classCallCheck(this, _class);\n\n        var bubbles = false;\n        var cancelable = false;\n        var composed = false;\n        if (init) {\n            bubbles = init.bubbles === true;\n            cancelable = init.cancelable === true;\n            composed = init.composed === true;\n        }\n        var event = document.createEvent('event');\n        event.initEvent(type, bubbles, cancelable);\n        $.setShadowState(event, { composed: composed });\n        return event;\n    }\n\n    _createClass(_class, [{\n        key: 'stopImmediatePropagation',\n        value: function stopImmediatePropagation() {\n            this.stopPropagation();\n            $.getShadowState(this).stopImmediatePropagationFlag = true;\n        }\n    }, {\n        key: 'composedPath',\n        value: function composedPath() {\n            // https://dom.spec.whatwg.org/#dom-event-composedpath\n\n            // 1. Let composedPath be a new empty list.\n            var composedPath = [];\n\n            // 2. Let currentTarget be context objects currentTarget attribute value.\n            var currentTarget = this.currentTarget;\n\n            // 3. For each tuple in context objects path:\n            var path = $.getShadowState(this).path;\n\n            if (path) {\n                var c = 0;\n                for (var i = 0; i < path.length; i++) {\n                    var item = path[i][0];\n                    if (currentTarget instanceof Window) {\n                        if (!(item instanceof Node) || !$.closedShadowHidden(item, $.shadowIncludingRoot(item))) {\n                            composedPath[c++] = item;\n                        }\n                    } else if (currentTarget instanceof Node) {\n                        if (!$.closedShadowHidden(item, currentTarget)) {\n                            composedPath[c++] = item;\n                        }\n                    } else {\n                        composedPath[c++] = item;\n                    }\n                }\n            }\n\n            // 4. return composedPath.\n            return composedPath;\n        }\n    }, {\n        key: 'currentTarget',\n        get: function get() {\n            return $.getShadowState(this).currentTarget;\n        }\n    }, {\n        key: 'target',\n        get: function get() {\n            return $.getShadowState(this).target;\n        }\n    }, {\n        key: 'composed',\n        get: function get() {\n            // TODO: Compare against the actual prototype instead of just the type strings\n            return $.getShadowState(this).composed || builtInComposedEvents.indexOf(this.type) !== -1;\n        }\n    }]);\n\n    return _class;\n}();\n\n// FocusEvent:\n// relatedTarget will be the element losing or gaining focus\n// MouseEvent:\n// relatedTarget will be the element being moved into or out of\n\n\nexports.default = _class;\n\nvar hasRelatedTarget = exports.hasRelatedTarget = function () {\n    function hasRelatedTarget() {\n        _classCallCheck(this, hasRelatedTarget);\n    }\n\n    _createClass(hasRelatedTarget, [{\n        key: 'relatedTarget',\n        get: function get() {\n            return $.getShadowState(this).relatedTarget;\n        }\n    }]);\n\n    return hasRelatedTarget;\n}();\n\n;\n\nvar builtInComposedEvents = [\n// FocusEvent\n'blur', 'focus', 'focusin', 'focusout',\n// MouseEvent\n'click', 'dblclick', 'mousedown', 'mouseenter', 'mouseleave', 'mousemove', 'mouseout', 'mouseover', 'mouseup',\n// WheelEvent\n'wheel',\n// InputEvent\n'beforeinput', 'input',\n// KeyboardEvent\n'keydown', 'keyup',\n// CompositionEvent\n'compositionstart', 'compositionupdate', 'compositionend',\n// Legacy UIEvent\n'DOMActivate',\n// Legacy FocusEvent\n'DOMFocusIn', 'DOMFocusOut',\n// Legacy KeyboardEvent\n'keypress'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-eventtarget\n\nexports.default = function (base) {\n\n    var native = {\n        addEventListener: base.prototype.addEventListener,\n        removeEventListener: base.prototype.removeEventListener,\n        dispatchEvent: base.prototype.dispatchEvent\n    };\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'addEventListener',\n            value: function addEventListener(type, callback, options) {\n                if (typeof callback !== 'function') {\n                    return;\n                }\n\n                var listener = { callback: callback };\n                var capture = false;\n\n                if (typeof options === 'boolean') {\n                    capture = options;\n                } else if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n                    capture = options.capture === true;\n                    listener.once = options.once === true;\n                    // we don't do anything with passive.\n                    listener.passive = options.passive === true;\n                }\n\n                var collection = EventListenerCollection.get(this, type, capture) || EventListenerCollection.create(this, type, capture);\n\n                collection.addListener(this, listener);\n                collection.attach(native.addEventListener);\n            }\n        }, {\n            key: 'removeEventListener',\n            value: function removeEventListener(type, callback, options) {\n                if (typeof callback !== 'function') {\n                    return;\n                }\n\n                var listener = { callback: callback };\n                var capture = false;\n\n                if (typeof options === 'boolean') {\n                    capture = options;\n                } else if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n                    capture = options.capture === true;\n                }\n\n                var collection = EventListenerCollection.get(this, type, capture);\n\n                if (!collection) {\n                    return;\n                }\n\n                collection.removeListener(this, listener);\n\n                if (collection.empty) {\n                    collection.detach(native.removeEventListener);\n                }\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar EventListenerCollection = function () {\n    _createClass(EventListenerCollection, null, [{\n        key: 'get',\n        value: function get(target, type, capture) {\n            var targetState = $.getShadowState(target);\n            var nativeTarget = target;\n            var nativeTargetState = targetState;\n            if (targetState && targetState.host) {\n                nativeTarget = targetState.host;\n                nativeTargetState = $.getShadowState(nativeTarget);\n            }\n            if (!nativeTargetState || !nativeTargetState.listeners) {\n                return null;\n            }\n            var collections = nativeTargetState.listeners;\n            for (var i = 0; i < collections.length; i++) {\n                var collection = collections[i];\n                if (collection.target === nativeTarget && collection.type === type && collection.capture === capture) {\n                    return collection;\n                }\n            }\n            return null;\n        }\n    }, {\n        key: 'create',\n        value: function create(target, type, capture) {\n            var targetState = $.getShadowState(target);\n            var nativeTarget = target;\n            var nativeTargetState = targetState;\n            if (targetState && targetState.host) {\n                nativeTarget = targetState.host;\n                nativeTargetState = $.getShadowState(nativeTarget);\n            }\n            if (!nativeTargetState) {\n                nativeTargetState = $.setShadowState(nativeTarget, { listeners: [] });\n            } else if (!nativeTargetState.listeners) {\n                nativeTargetState.listeners = [];\n            }\n            var collection = new EventListenerCollection(nativeTarget, type, capture);\n            nativeTargetState.listeners.push(collection);\n            return collection;\n        }\n    }]);\n\n    function EventListenerCollection(target, type, capture) {\n        var _this = this;\n\n        _classCallCheck(this, EventListenerCollection);\n\n        this.target = target;\n        this.type = type;\n        this.capture = capture;\n\n        this.hostListeners = [];\n        this.shadowListeners = [];\n\n        this.callback = function (event) {\n            var shadowRoot = null;\n            var targetState = $.getShadowState(target);\n            if (targetState) {\n                shadowRoot = targetState.shadowRoot;\n            }\n            switch (event.eventPhase) {\n                case Event.prototype.CAPTURING_PHASE:\n                    _this.invokeListeners(event, _this.target, _this.hostListeners);\n                    if (shadowRoot) {\n                        _this.invokeListeners(event, shadowRoot, _this.shadowListeners);\n                    }\n                    break;\n                case Event.prototype.AT_TARGET:\n                    var nativeTarget = $.descriptors.Event.target.get.call(event);\n                    _this.invokeListeners(event, nativeTarget, _this.getListeners(nativeTarget));\n                    break;\n                case Event.prototype.BUBBLING_PHASE:\n                    if (shadowRoot) {\n                        _this.invokeListeners(event, shadowRoot, _this.shadowListeners);\n                    }\n                    _this.invokeListeners(event, _this.target, _this.hostListeners);\n                    break;\n            }\n        };\n    }\n\n    _createClass(EventListenerCollection, [{\n        key: 'getListeners',\n        value: function getListeners(target) {\n            var targetState = $.getShadowState(target);\n            if (targetState && targetState.host) {\n                return this.shadowListeners;\n            }\n            return this.hostListeners;\n        }\n    }, {\n        key: 'addListener',\n        value: function addListener(target, listener) {\n            var listeners = this.getListeners(target);\n\n            for (var i = 0; i < listeners.length; i++) {\n                if (listener.callback === listeners[i].callback) {\n                    return;\n                }\n            }\n\n            listeners.push(listener);\n        }\n    }, {\n        key: 'removeListener',\n        value: function removeListener(target, listener) {\n            var listeners = this.getListeners(target);\n\n            for (var i = 0; i < listeners.length; i++) {\n                var other = listeners[i];\n                if (listener.callback === other.callback) {\n                    listeners.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    }, {\n        key: 'invokeListeners',\n        value: function invokeListeners(event, currentTarget, listeners) {\n            var eventState = $.getShadowState(event) || $.setShadowState(event, {});\n            var path = eventState.calculatedPath;\n            if (!path) {\n                path = eventState.calculatedPath = calculatePath(event);\n            }\n            // if there is no target, the event is not composed and should be stopped\n            var target = calculateTarget(currentTarget, path);\n            if (!target) {\n                event.stopImmediatePropagation();\n            } else {\n                var relatedTarget = calculateRelatedTarget(currentTarget, path);\n                var remove = void 0;\n\n                eventState.path = path;\n                eventState.currentTarget = currentTarget;\n                eventState.target = target;\n                eventState.relatedTarget = relatedTarget;\n\n                for (var i = 0; i < listeners.length; i++) {\n                    var listener = listeners[i];\n                    var result = listener.callback.call(currentTarget, event);\n                    if (listener.once) {\n                        if (!remove) {\n                            remove = [listener];\n                        } else {\n                            remove.push[listener];\n                        }\n                    }\n                    if (eventState.stopImmediatePropagationFlag) {\n                        break;\n                    }\n                }\n\n                eventState.path = null;\n                eventState.currentTarget = null;\n\n                if (remove) {\n                    for (var _i = 0; _i < remove.length; _i++) {\n                        var index = listeners.indexOf(remove[_i]);\n                        listeners.splice(index, 1);\n                    }\n                }\n            }\n        }\n    }, {\n        key: 'attach',\n        value: function attach(descriptor) {\n            descriptor.call(this.target, this.type, this.callback, this.capture);\n        }\n    }, {\n        key: 'detach',\n        value: function detach(descriptor) {\n            descriptor.call(this.target, this.type, this.callback, this.capture);\n        }\n    }, {\n        key: 'empty',\n        get: function get() {\n            return this.hostListeners.length === 0 && this.shadowListeners.length === 0;\n        }\n    }]);\n\n    return EventListenerCollection;\n}();\n\nfunction calculatePath(event) {\n    // https://dom.spec.whatwg.org/#concept-event-dispatch\n\n    var path = [];\n    var p = 0;\n\n    var target = $.descriptors.Event.target.get.call(event);\n\n    var relatedTargetDescriptor = null;\n\n    if (event instanceof FocusEvent) {\n        relatedTargetDescriptor = $.descriptors.FocusEvent.relatedTarget;\n    } else if (event instanceof MouseEvent) {\n        relatedTargetDescriptor = $.descriptors.MouseEvent.relatedTarget;\n    }\n\n    // Skip (native)\n    // 1. Set events dispatch flag.\n\n    // 2. Let targetOverride be target, if legacy target override flag is \n    // not given, and targets associated Document otherwise. \n    var targetOverride = target;\n\n    // 3. Let relatedTarget be the result of retargeting events relatedTarget \n    // against target if events relatedTarget is non-null, and null otherwise.\n    var originalRelatedTarget = null;\n    var relatedTarget = null;\n    if (relatedTargetDescriptor) {\n        originalRelatedTarget = relatedTargetDescriptor.get.call(event);\n        if (originalRelatedTarget) {\n            relatedTarget = $.retarget(originalRelatedTarget, target);\n        }\n    }\n\n    // Skip (native)\n    // 4. If target is relatedTarget and target is not events relatedTarget, then return true.\n\n    // 5. Append (target, targetOverride, relatedTarget) to events path.\n    path[p++] = [target, targetOverride, relatedTarget];\n\n    // Skip (native)\n    // 6. Let isActivationEvent be true, if event is a MouseEvent object and \n    // events type attribute is \"click\", and false otherwise.\n    // 7. Let activationTarget be target, if isActivationEvent is true and \n    //target has activation behavior, and null otherwise.\n\n    // 8. Let parent be the result of invoking targets get the parent with event.\n    var parent = getTheParent(target, event);\n\n    // 9. While parent is non-null:\n    while (parent != null) {\n        // 1. Let relatedTarget be the result of retargeting events relatedTarget\n        // against parent if events relatedTarget is non-null, and null otherwise.\n        if (originalRelatedTarget) {\n            relatedTarget = $.retarget(originalRelatedTarget, parent);\n        }\n        // 2. If targets root is a shadow-including inclusive ancestor of parent, then... \n        // append (parent, null, relatedTarget) to events path.\n        if ($.shadowIncludingInclusiveAncestor($.root(target), parent)) {\n            path[p++] = [parent, null, relatedTarget];\n            parent = getTheParent(parent, event);\n            continue;\n        }\n        // 3. Otherwise, if parent and relatedTarget are identical, then set parent to null.\n        else if (parent === relatedTarget) {\n                break;\n            }\n            // 4. Otherwise, set target to parent and then... \n            // append (parent, target, relatedTarget) to events path.\n            else {\n                    target = parent;\n                    path[p++] = [parent, target, relatedTarget];\n                    parent = getTheParent(parent, event);\n                    continue;\n                }\n        // 5. If parent is non-null, then set parent to the result of \n        // invoking parents get the parent with event.\n        // NOTE: This step was duplicated above to save some cycles.\n    }\n\n    return path;\n}\n\nfunction getTheParent(node, event) {\n    // https://dom.spec.whatwg.org/#get-the-parent\n    // Each EventTarget object also has an associated get the parent \n    // algorithm, which takes an event event, and returns an EventTarget \n    // object. Unless specified otherwise it returns null.\n\n    // A nodes get the parent algorithm, given an event, \n    // returns the nodes assigned slot, if node is assigned, \n    // and nodes parent otherwise.\n\n    // A documents get the parent algorithm, given an event, returns null if events \n    // type attribute value is \"load\" or document does not have a browsing context, \n    // and the documents associated Window object otherwise.\n\n    // A shadow roots get the parent algorithm, given an event, returns null if \n    // events composed flag is unset and shadow root is the root of events \n    // paths first tuples item, and shadow roots host otherwise.\n\n    if (node instanceof Node) {\n        if (node.nodeType === Node.DOCUMENT_NODE) {\n            if (event.type === 'load') {\n                // or browsing context?\n                return null;\n            }\n            return node.defaultView;\n        } else if ($.isShadowRoot(node)) {\n            if (!event.composed) {\n                var _$$getShadowState$pat = _slicedToArray($.getShadowState(event).path[0], 1),\n                    item = _$$getShadowState$pat[0];\n\n                if ($.root(item) === node) {\n                    return null;\n                }\n            }\n            return node.host;\n        }\n        return node.assignedSlot || node.parentNode;\n    }\n\n    return null;\n}\n\nfunction calculateRelatedTarget(currentTarget, path) {\n    for (var i = 0; i < path.length; i++) {\n        var _path$i = _slicedToArray(path[i], 3),\n            item = _path$i[0],\n            relatedTarget = _path$i[2];\n\n        if (item === currentTarget) {\n            return relatedTarget;\n        }\n    }\n    return null;\n}\n\nfunction calculateTarget(currentTarget, path) {\n    for (var i = 0; i < path.length; i++) {\n        var _path$i2 = _slicedToArray(path[i], 1),\n            item = _path$i2[0];\n\n        if (item === currentTarget) {\n            for (var j = i; j >= 0; j--) {\n                var _path$j = _slicedToArray(path[j], 2),\n                    target = _path$j[1];\n\n                if (target != null) {\n                    return target;\n                }\n            }\n            return null;\n        }\n    }\n    return null;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://html.spec.whatwg.org/multipage/scripting.html#the-slot-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'assignedNodes',\n\n\n        // TODO: tests\n        value: function assignedNodes(options) {\n            if (this.localName !== 'slot') {\n                return;\n            }\n\n            // https://html.spec.whatwg.org/multipage/scripting.html#dom-slot-assignednodes\n            // The assignedNodes(options) method, when invoked, must run these steps:\n\n            // 1. If the value of options's flatten member is false, then return this element's assigned nodes.\n            if (!options || options.flatten !== true) {\n                var assignedNodes = null;\n                var shadowState = $.getShadowState(this);\n                if (shadowState) {\n                    assignedNodes = shadowState.assignedNodes;\n                }\n                return assignedNodes || [];\n            }\n\n            // 2. Return the result of finding flattened slotables with this element.\n            return $.findFlattenedSlotables(this);\n        }\n    }, {\n        key: 'name',\n\n\n        // TODO: tests\n        get: function get() {\n            if (this.localName !== 'slot') {\n                return;\n            }\n\n            return this.getAttribute('name');\n        }\n\n        // TODO: tests\n        ,\n        set: function set(value) {\n            if (this.localName !== 'slot') {\n                return;\n            }\n\n            $.setAttributeValue(this, 'name', value);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://www.w3.org/TR/html5/single-page.html#the-table-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'deleteCaption',\n\n\n        // TODO: tests\n        value: function deleteCaption() {\n            var caption = this.caption;\n            if (caption) {\n                $.remove(caption, this);\n            }\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'deleteTHead',\n        value: function deleteTHead() {\n            var tHead = this.tHead;\n            if (tHead) {\n                $.remove(tHead, this);\n            }\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'deleteTFoot',\n        value: function deleteTFoot() {\n            var tFoot = this.tFoot;\n            if (tFoot) {\n                $.remove(tFoot, this);\n            }\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'deleteRow',\n        value: function deleteRow(index) {\n            // https://www.w3.org/TR/html5/single-page.html#dom-table-deleterow\n            if (index === -1) {\n                index = this.rows.length - 1;\n            }\n            if (index < 0 || index >= this.rows.length) {\n                throw $.makeError('IndexSizeError');\n            }\n            this.rows[index].remove();\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://www.w3.org/TR/html5/single-page.html#the-tr-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'deleteCell',\n\n\n        // TODO: tests\n        value: function deleteCell(index) {\n            // https://www.w3.org/TR/html5/single-page.html#dom-tr-deletecell\n            if (index === -1) {\n                index = this.cells.length - 1;\n            }\n            if (index < 0 || index >= this.cells.length) {\n                throw $.makeError('IndexSizeError');\n            }\n            this.cells[index].remove();\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://www.w3.org/TR/html5/single-page.html#the-tbody-element\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'deleteRow',\n\n\n        // TODO: tests\n        value: function deleteRow(index) {\n            // https://www.w3.org/TR/html5/single-page.html#dom-tbody-deleterow\n            if (index < 0 || index >= this.rows.length) {\n                throw $.makeError('IndexSizeError');\n            }\n            this.rows[index].remove();\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-mutationobserver\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class(callback) {\n        _classCallCheck(this, _class);\n\n        var observer = $.createMutationObserver(callback);\n        $.setShadowState(this, { observer: observer });\n        observer.interface = this;\n    }\n\n    _createClass(_class, [{\n        key: 'observe',\n        value: function observe(target, options) {\n            $.getShadowState(this).observer.observe(target, options);\n        }\n    }, {\n        key: 'disconnect',\n        value: function disconnect() {\n            $.getShadowState(this).observer.disconnect();\n        }\n    }, {\n        key: 'takeRecords',\n        value: function takeRecords() {\n            var records = $.getShadowState(this).observer.queue;\n            return records.splice(0, records.length);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-namednodemap\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'setNamedItem',\n\n\n        // TODO: tests\n        value: function setNamedItem(attr) {\n            var shadowState = $.getShadowState(this);\n            return $.setAttribute(attr, shadowState.element);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'setNamedItemNS',\n        value: function setNamedItemNS(attr) {\n            var shadowState = $.getShadowState(this);\n            return $.setAttribute(attr, shadowState.element);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'removeNamedItem',\n        value: function removeNamedItem(qualifiedName) {\n            var shadowState = $.getShadowState(this);\n            var attr = $.removeAttributeByName(qualifiedName, shadowState.element);\n            if (!attr) {\n                throw $.makeError('NotFoundError');\n            }\n            return attr;\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'removeNamedItemNS',\n        value: function removeNamedItemNS(namespace, localName) {\n            var shadowState = $.getShadowState(this);\n            var attr = $.removeAttributeByNamespace(namespace, localName, shadowState.element);\n            if (!attr) {\n                throw $.makeError('NotFoundError');\n            }\n            return attr;\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-node\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'getRootNode',\n        value: function getRootNode(options) {\n            var composed = options && options.composed === true;\n            return composed ? $.shadowIncludingRoot(this) : $.root(this);\n        }\n    }, {\n        key: 'hasChildNodes',\n\n\n        // TODO: tests\n        value: function hasChildNodes() {\n            var nodeState = $.getShadowState(this);\n            if (nodeState) {\n                var childNodes = nodeState.childNodes;\n                if (childNodes) {\n                    return childNodes.length > 0;\n                }\n            }\n\n            return $.descriptors.Node.hasChildNodes.value.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'normalize',\n\n\n        // TODO: tests\n        value: function normalize() {\n            // https://dom.spec.whatwg.org/#dom-node-normalize\n            // The normalize() method, when invoked, must run these steps \n            // for each descendant exclusive Text node node of context object:\n            var childNodes = this.childNodes;\n            var dataDescriptor = $.descriptors.CharacterData.data;\n            for (var i = 0; i < childNodes.length; i++) {\n                var childNode = childNodes[i];\n                if (childNode.nodeType === Node.TEXT_NODE) {\n                    var length = dataDescriptor.get.call(childNode).length;\n                    if (length === 0) {\n                        $.remove(childNode, this);\n                        continue;\n                    }\n                    var data = '';\n                    var contiguousTextNodes = new Array(childNodes.length);\n                    var contiguousCount = 0;\n                    var next = childNode;\n                    while (next = next.nextSibling && next.nodeType === Node.TEXT_NODE) {\n                        data += dataDescriptor.get.call(next);\n                        contiguousTextNodes[contiguousCount++] = next;\n                    }\n                    $.replaceData(childNode, length, 0, data);\n                    // TODO: (Range)\n                    for (var j = 0; j < contiguousCount; j++) {\n                        $.remove(contiguousTextNodes[j], this);\n                    }\n                } else {\n                    childNode.normalize();\n                }\n            }\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'cloneNode',\n        value: function cloneNode(deep) {\n            // https://dom.spec.whatwg.org/#dom-node-clonenode\n            // The cloneNode(deep) method, when invoked, must run these steps:\n\n            // 1. If context object is a shadow root, then throw a NotSupportedError.\n            if ($.isShadowRoot(this)) {\n                throw $.makeError('NotSupportedError');\n            }\n\n            // 2. Return a clone of the context object, with the clone children flag set if deep is true.\n            return $.clone(this, undefined, deep);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'isEqualNode',\n        value: function isEqualNode(other) {\n            // https://dom.spec.whatwg.org/#dom-node-isequalnode\n            // https://dom.spec.whatwg.org/#concept-node-equals\n            if (!other) {\n                return false;\n            }\n\n            if (this.nodeType !== other.nodeType) {\n                return false;\n            }\n\n            var thisAttributes = void 0;\n            var otherAttributes = void 0;\n\n            switch (this.nodeType) {\n                case Node.DOCUMENT_TYPE_NODE:\n                    if (this.name !== other.name || this.publicId !== other.publicId || this.systemId !== other.systemId) {\n                        return false;\n                    }\n                    break;\n                case Node.ELEMENT_NODE:\n                    if (this.namespaceURI !== other.namespaceURI || this.prefix !== other.prefix || this.localName !== other.localName) {\n                        return false;\n                    }\n                    thisAttributes = $.descriptors.Element.attributes.get.call(this);\n                    otherAttributes = $.descriptors.Element.attributes.get.call(other);\n                    if (thisAttributes.length != otherAttributes.length) {\n                        return false;\n                    }\n                    break;\n                case Node.ATTRIBUTE_NODE:\n                    if (this.namespaceURI !== other.namespaceURI || this.localName !== other.localName || this.value !== other.value) {\n                        return false;\n                    }\n                    break;\n                case Node.PROCESSING_INSTRUCTION_NODE:\n                    if (this.target !== other.target || this.data !== other.data) {\n                        return false;\n                    }\n                    break;\n                case Node.TEXT_NODE:\n                case Node.COMMENT_NODE:\n                    if (this.data !== other.data) {\n                        return false;\n                    }\n                    break;\n            }\n\n            if (this.nodeType == Node.ELEMENT_NODE) {\n                for (var i = 0; i < thisAttributes.length; i++) {\n                    var attr1 = thisAttributes[i];\n                    var attr2 = otherAttributes[attr1.name];\n                    if (attr1.value !== attr2.value) {\n                        return false;\n                    }\n                }\n            }\n\n            var childNodes1 = this.childNodes;\n            var childNodes2 = other.childNodes;\n            if (childNodes1.length !== other.childNodes.length) {\n                return false;\n            }\n\n            for (var _i = 0; _i < childNodes1.length; _i++) {\n                if (!childNodes1[_i].isEqualNode(childNodes2[_i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'compareDocumentPosition',\n        value: function compareDocumentPosition(other) {\n            // https://dom.spec.whatwg.org/#dom-node-comparedocumentposition\n\n            if (this === other) {\n                return 0;\n            }\n\n            var node1 = other;\n            var node2 = this;\n            var attr1 = null;\n            var attr2 = null;\n\n            if (node1.nodeType == Document.prototype.ATTRIBUTE_NODE) {\n                attr1 = node1;\n                node1 = attr1.ownerElement;\n            }\n\n            if (node2.nodeType == Document.prototype.ATTRIBUTE_NODE) {\n                attr2 = node2;\n                node2 = attr2.ownerElement;\n\n                if (attr1 && node1 && node2 === node1) {\n                    var attrs = node2.atttributes;\n                    for (var i = 0; i < attrs.length; i++) {\n                        var attr = attrs[i];\n                        if (attr.isEqualNode(attr1)) {\n                            return Document.prototype.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + Document.prototype.DOCUMENT_POSITION_PRECEDING;\n                        } else if (attr.isEqualNode(attr2)) {\n                            return Document.prototype.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + Document.prototype.DOCUMENT_POSITION_FOLLOWING;\n                        }\n                    }\n                }\n            }\n\n            if (!node1 || !node2 || $.root(node1) !== $.root(node2)) {\n                return Document.prototype.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + Document.prototype.DOCUMENT_POSITION_FOLLOWING + Document.prototype.DOCUMENT_POSITION_DISCONNECTED;\n            }\n\n            if (ancestorOf(node2, node1) || node1 === node2 && attr2) {\n                return Document.prototype.DOCUMENT_POSITION_CONTAINS + Document.prototype.DOCUMENT_POSITION_PRECEDING;\n            }\n\n            if (ancestorOf(node1, node2) || node1 === node2 && attr1) {\n                return Document.prototype.DOCUMENT_POSITION_CONTAINS + Document.prototype.DOCUMENT_POSITION_FOLLOWING;\n            }\n\n            if (preceding(node1, node2)) {\n                return Document.prototype.DOCUMENT_POSITION_PRECEDING;\n            }\n\n            return Document.prototype.DOCUMENT_POSITION_FOLLOWING;\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'contains',\n        value: function contains(node) {\n            // https://dom.spec.whatwg.org/#dom-node-contains\n\n            var parent = node.parentNode;\n\n            if (!parent) {\n                return false;\n            }\n\n            do {\n                if (parent === this) {\n                    return true;\n                }\n            } while (parent = parent.parentNode);\n\n            return false;\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'insertBefore',\n        value: function insertBefore(node, child) {\n            // https://dom.spec.whatwg.org/#dom-node-insertbefore\n            // The insertBefore(node, child) method, when invoked, must return the result \n            // of pre-inserting node into context object before child.\n            return $.preInsert(node, this, child);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'appendChild',\n        value: function appendChild(node) {\n            // https://dom.spec.whatwg.org/#dom-node-appendchild\n            // The appendChild(node) method, when invoked, must return the result of \n            // appending node to context object.\n            return $.append(node, this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'replaceChild',\n        value: function replaceChild(node, child) {\n            // https://dom.spec.whatwg.org/#dom-node-replacechild\n            // The replaceChild(node, child) method, when invoked, must return the \n            // result of replacing child with node within context object.\n            return $.replace(child, node, this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'removeChild',\n        value: function removeChild(child) {\n            // https://dom.spec.whatwg.org/#dom-node-removechild\n            // The removeChild(child) method, when invoked, must return the result of \n            // pre-removing child from context object.\n            return $.preRemove(child, this);\n        }\n    }, {\n        key: 'parentNode',\n        get: function get() {\n            var parentNode = void 0;\n            var nodeState = $.getShadowState(this);\n            if (nodeState) {\n                parentNode = nodeState.parentNode;\n            }\n\n            return parentNode || $.descriptors.Node.parentNode.get.call(this);\n        }\n    }, {\n        key: 'parentElement',\n        get: function get() {\n            var parentNode = this.parentNode;\n            if (parentNode && parentNode.nodeType === Node.ELEMENT_NODE) {\n                return parentNode;\n            }\n\n            return null;\n        }\n    }, {\n        key: 'childNodes',\n        get: function get() {\n            var nodeState = $.getShadowState(this);\n            if (nodeState) {\n                var childNodes = nodeState.childNodes;\n                if (childNodes) {\n                    return childNodes.slice();\n                }\n            }\n\n            return $.descriptors.Node.childNodes.get.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'firstChild',\n        get: function get() {\n            var nodeState = $.getShadowState(this);\n            if (nodeState) {\n                var childNodes = nodeState.childNodes;\n                if (childNodes) {\n                    if (childNodes.length) {\n                        return childNodes[0];\n                    }\n                    return null;\n                }\n            }\n\n            return $.descriptors.Node.firstChild.get.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'lastChild',\n        get: function get() {\n            var nodeState = $.getShadowState(this);\n            if (nodeState) {\n                var childNodes = nodeState.childNodes;\n                if (childNodes) {\n                    if (childNodes.length) {\n                        return childNodes[childNodes.length - 1];\n                    }\n                    return null;\n                }\n            }\n\n            return $.descriptors.Node.lastChild.get.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'previousSibling',\n        get: function get() {\n            var nodeState = $.getShadowState(this);\n            if (nodeState) {\n                var parentNode = nodeState.parentNode;\n                if (parentNode) {\n                    var childNodes = $.getShadowState(parentNode).childNodes;\n                    var siblingIndex = childNodes.indexOf(this) - 1;\n                    return siblingIndex < 0 ? null : childNodes[siblingIndex];\n                }\n            }\n\n            return $.descriptors.Node.previousSibling.get.call(this);\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'nextSibling',\n        get: function get() {\n            var nodeState = $.getShadowState(this);\n            if (nodeState) {\n                var parentNode = nodeState.parentNode;\n                if (parentNode) {\n                    var childNodes = $.getShadowState(parentNode).childNodes;\n                    var siblingIndex = childNodes.indexOf(this) + 1;\n                    return siblingIndex === childNodes.length ? null : childNodes[siblingIndex];\n                }\n            }\n\n            return $.descriptors.Node.nextSibling.get.call(this);\n        }\n\n        // TODO: consider creating a raw property descriptor\n        // that uses the native get instead of a pass-through function\n\n    }, {\n        key: 'nodeValue',\n        get: function get() {\n            return $.descriptors.Node.nodeValue.get.call(this);\n        }\n\n        // TODO: MutationObserver tests\n        ,\n        set: function set(value) {\n            switch (this.nodeType) {\n                case Node.ATTRIBUTE_NODE:\n                    $.setExistingAttributeValue(this, value);\n                    break;\n                case Node.TEXT_NODE:\n                case Node.PROCESSING_INSTRUCTION_NODE:\n                case Node.COMMENT_NODE:\n                    var length = $.descriptors.CharacterData.data.get.call(this).length;\n                    $.replaceData(this, 0, length, value);\n                    break;\n            }\n        }\n    }, {\n        key: 'textContent',\n        get: function get() {\n            switch (this.nodeType) {\n                case Node.DOCUMENT_FRAGMENT_NODE:\n                case Node.ELEMENT_NODE:\n                    return elementTextContent(this);\n                case Node.ATTRIBUTE_NODE:\n                    return $.descriptors.Attr.value.get.call(this);\n                case Node.TEXT_NODE:\n                case Node.PROCESSING_INSTRUCTION_NODE:\n                case Node.COMMENT_NODE:\n                    return $.descriptors.CharacterData.data.get.call(this);\n                default:\n                    return null;\n            }\n        }\n\n        // TODO: MutationObserver tests\n        ,\n        set: function set(value) {\n            switch (this.nodeType) {\n                case Node.DOCUMENT_FRAGMENT_NODE:\n                case Node.ELEMENT_NODE:\n                    var node = null;\n                    if (value !== '') {\n                        node = this.ownerDocument.createTextNode(value);\n                    }\n                    $.replaceAll(node, this);\n                    break;\n                case Node.ATTRIBUTE_NODE:\n                    $.setExistingAttributeValue(this, value);\n                    break;\n                case Node.TEXT_NODE:\n                case Node.PROCESSING_INSTRUCTION_NODE:\n                case Node.COMMENT_NODE:\n                    $.replaceData(this, 0, this.data.length, value);\n                    break;\n            }\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;\n\n\nfunction ancestorOf(node, ancestor) {\n    var parent = node.parentNode;\n\n    do {\n        if (parent === ancestor) {\n            return true;\n        }\n    } while (parent = parent.parentNode);\n\n    return false;\n}\n\nfunction preceding(element1, element2) {\n    function precedingSiblings(parent, sibling1, sibling2) {\n        var siblings = parent.childNodes;\n        for (var _i2 = 0; _i2 < siblings.length; _i2++) {\n            var sibling = siblings[_i2];\n            if (sibling === sibling1) {\n                return true;\n            } else if (sibling === sibling2) {\n                return false;\n            }\n        }\n    }\n\n    // Check if they're already siblings.\n    var ancestor1 = element1.parentNode;\n    var ancestor2 = element2.parentNode;\n\n    if (ancestor1 === ancestor2) {\n        return precedingSiblings(element1, element2);\n    }\n\n    // Find the closest common ancestor.\n    var ancestors1 = [ancestor1];\n    var ancestors2 = [ancestor2];\n\n    while (ancestor1 = ancestor1.parentNode) {\n        ancestors1.push(ancestor1);\n    }\n\n    while (ancestor2 = ancestor2.parentNode) {\n        ancestors2.push(ancestor2);\n    }\n\n    ancestors1.reverse();\n    ancestors2.reverse();\n\n    var diff = Math.abs(ancestors1.length - ancestors2.length);\n    var min = Math.min(ancestors1.length, ancestors2.length);\n\n    var i = 0;\n    while (ancestors1[i] === ancestors2[i]) {\n        i++;\n    }\n\n    return precedingSiblings(ancestors1[i - 1], ancestors1[i], ancestors2[i]);\n}\n\nfunction elementTextContent(element) {\n    var result = '';\n    var childNodes = element.childNodes;\n    for (var i = 0; i < childNodes.length; i++) {\n        var childNode = childNodes[i];\n        switch (childNode.nodeType) {\n            case Node.ELEMENT_NODE:\n                result += elementTextContent(childNode);\n                break;\n            case Node.TEXT_NODE:\n                result += $.descriptors.CharacterData.data.get.call(childNode);\n                break;\n        }\n    }\n    return result;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-shadowroot\n// https://www.w3.org/TR/shadow-dom/#the-shadowroot-interface\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'nodeName',\n        get: function get() {\n            return '#shadow-root';\n        }\n    }, {\n        key: 'mode',\n        get: function get() {\n            return $.getShadowState(this).mode;\n        }\n    }, {\n        key: 'host',\n        get: function get() {\n            return $.getShadowState(this).host;\n        }\n\n        // TODO: tests\n\n    }, {\n        key: 'innerHTML',\n        get: function get() {\n            return $.serializeHTMLFragment(this);\n        }\n\n        // TODO: tests\n        ,\n        set: function set(value) {\n            var fragment = $.parseHTMLFragment(value, this);\n            $.replaceAll(fragment, this);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-text\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'splitText',\n\n\n        // TODO: tests\n        value: function splitText(offset) {\n            var length = this.length;\n            if (offset > length) {\n                throw $.makeError('IndexSizeError');\n            }\n            var count = length - offset;\n            var newData = this.data.slice(offset, count);\n            var newNode = this.ownerDocument.createTextNode(newData);\n            var parent = this.parentNode;\n            if (parent) {\n                $.insert(newNode, parent, this.nextSibling);\n                // TODO: (Range)\n            }\n            $.replaceData(this, offset, count, '');\n            // TODO: (Range)\n            // if (!parent) { }\n            return newNode;\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nvar _patch = require('./patch.js');\n\nvar _patch2 = _interopRequireDefault(_patch);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar nativeShadowDom = 'attachShadow' in Element.prototype;\n\nif (!nativeShadowDom || window['forceShadowDomPolyfill']) {\n    (0, _patch2.default)();\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n            value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-childnode\n\nexports.default = function (base) {\n\n            return function () {\n                        function _class() {\n                                    _classCallCheck(this, _class);\n                        }\n\n                        _createClass(_class, [{\n                                    key: 'before',\n\n\n                                    // TODO: tests\n                                    value: function before() {\n                                                // https://dom.spec.whatwg.org/#dom-childnode-before\n                                                // The before(nodes) method, when invoked, must run these steps:\n\n                                                // 1. Let parent be context objects parent.\n                                                var parent = this.parentNode;\n\n                                                // 2. If parent is null, terminate these steps.\n                                                if (!parent) {\n                                                            return;\n                                                }\n\n                                                // 3. Let viablePreviousSibling be context objects first preceding \n                                                // sibling not in nodes, and null otherwise.\n                                                var viablePreviousSibling = this.previousSibling;\n\n                                                for (var _len = arguments.length, nodes = Array(_len), _key = 0; _key < _len; _key++) {\n                                                            nodes[_key] = arguments[_key];\n                                                }\n\n                                                while (viablePreviousSibling && nodes.indexOf(viablePreviousSibling) !== -1) {\n                                                            viablePreviousSibling = viablePreviousSibling.previousSibling;\n                                                }\n\n                                                // 4. Let node be the result of converting nodes into a node, given \n                                                // nodes and context objects node document. Rethrow any exceptions.\n                                                var node = $.convertNodesIntoANode(nodes, this.ownerDocument);\n\n                                                // 5. If viablePreviousSibling is null, set it to parents first child, \n                                                // and to viablePreviousSiblings next sibling otherwise.\n                                                if (viablePreviousSibling === null) {\n                                                            viablePreviousSibling = parent.firstChild;\n                                                } else {\n                                                            viablePreviousSibling = viablePreviousSibling.nextSibling;\n                                                }\n\n                                                // 6. Pre-insert node into parent before viablePreviousSibling. \n                                                // Rethrow any exceptions.\n                                                $.preInsert(node, parent, viablePreviousSibling);\n                                    }\n\n                                    // TODO: tests\n\n                        }, {\n                                    key: 'after',\n                                    value: function after() {\n                                                // https://dom.spec.whatwg.org/#dom-childnode-after\n                                                // The after(nodes) method, when invoked, must run these steps:\n\n                                                // 1. Let parent be context objects parent.\n                                                var parent = this.parentNode;\n\n                                                // 2. If parent is null, terminate these steps.\n                                                if (!parent) {\n                                                            return;\n                                                }\n\n                                                // 3. Let viableNextSibling be context objects first following \n                                                // sibling not in nodes, and null otherwise.\n                                                var viableNextSibling = this.nextSibling;\n\n                                                for (var _len2 = arguments.length, nodes = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                                                            nodes[_key2] = arguments[_key2];\n                                                }\n\n                                                while (viableNextSibling && nodes.indexOf(viableNextSibling) !== -1) {\n                                                            viableNextSibling = viableNextSibling.nextSibling;\n                                                }\n\n                                                // 4. Let node be the result of converting nodes into a node, given \n                                                // nodes and context objects node document. Rethrow any exceptions.\n                                                var node = $.convertNodesIntoANode(nodes, this.ownerDocument);\n\n                                                // 5. Pre-insert node into parent before viableNextSibling. Rethrow \n                                                // any exceptions.\n                                                $.preInsert(node, parent, viableNextSibling);\n                                    }\n\n                                    // TODO: tests\n\n                        }, {\n                                    key: 'replaceWith',\n                                    value: function replaceWith() {\n                                                // https://dom.spec.whatwg.org/#dom-childnode-replacewith\n                                                // The replaceWith(nodes) method, when invoked, must run these steps:\n\n                                                // 1. Let parent be context objects parent.\n                                                var parent = this.parentNode;\n\n                                                // 2. If parent is null, terminate these steps.\n                                                if (!parent) {\n                                                            return;\n                                                }\n\n                                                // 3. Let viableNextSibling be context objects first following \n                                                // sibling not in nodes, and null otherwise.\n                                                var viableNextSibling = this.nextSibling;\n\n                                                for (var _len3 = arguments.length, nodes = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n                                                            nodes[_key3] = arguments[_key3];\n                                                }\n\n                                                while (viableNextSibling && nodes.indexOf(viableNextSibling) !== -1) {\n                                                            viableNextSibling = viableNextSibling.nextSibling;\n                                                }\n\n                                                // 4. Let node be the result of converting nodes into a node, given \n                                                // nodes and context objects node document. Rethrow any exceptions.\n                                                var node = $.convertNodesIntoANode(nodes, this.ownerDocument);\n\n                                                // 5. If context objects parent is parent, replace the context object \n                                                // with node within parent. Rethrow any exceptions.\n                                                if (this.parentNode == parent) {\n                                                            $.replace(this, node, parent);\n                                                }\n                                                // 6. Otherwise, pre-insert node into parent before viableNextSibling. \n                                                // Rethrow any exceptions.\n                                                else {\n                                                                        $.preInsert(node, parent, viableNextSibling);\n                                                            }\n                                    }\n\n                                    // TODO: tests\n\n                        }, {\n                                    key: 'remove',\n                                    value: function remove() {\n                                                // https://dom.spec.whatwg.org/#dom-childnode-remove\n                                                // The remove() method, when invoked, must run these steps:\n\n                                                // 1. If context objects parent is null, terminate these steps.\n                                                var parent = this.parentNode;\n\n                                                if (!parent) {\n                                                            return;\n                                                }\n\n                                                // 2. Remove the context object from context objects parent.\n                                                $.remove(this, parent);\n                                    }\n                        }]);\n\n                        return _class;\n            }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#mixin-documentorshadowroot\n// https://www.w3.org/TR/shadow-dom/#extensions-to-the-documentorshadowroot-mixin\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'activeElement',\n\n\n        // TODO: consider getSelection()\n        // TODO: consider elementFromPoint(double x, double y)\n        // TODO: consider elementsFromPoint(double x, double y)\n        // TODO: consider get styleSheets()\n\n        // TODO: tests\n        get: function get() {\n            var document = this.ownerDocument || this;\n            var nativeActiveElement = native.activeElement.get.call(document);\n\n            if (!nativeActiveElement || document != $.shadowIncludingRoot(this)) {\n                return null;\n            }\n\n            return $.retarget(nativeActiveElement, this);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-nondocumenttypechildnode\n\nexports.default = function (base) {\n\n    var native = {\n        previousElementSibling: $.descriptor(base, 'previousElementSibling'),\n        nextElementSibling: $.descriptor(base, 'nextElementSibling')\n    };\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'previousElementSibling',\n\n\n            // TODO: tests\n            get: function get() {\n                var nodeState = $.getShadowState(this);\n                if (nodeState && nodeState.parentNode) {\n                    var childNodes = $.getShadowState(nodeState.parentNode).childNodes;\n                    var index = childNodes.indexOf(this);\n                    while (index > 0) {\n                        var previous = childNodes[--index];\n                        if (previous.nodeType === Node.ELEMENT_NODE) {\n                            return previous;\n                        }\n                    };\n                    return null;\n                } else if (native.previousElementSibling) {\n                    return native.previousElementSibling.get.call(this);\n                } else {\n                    var getPreviousSibling = $.descriptors.Node.previousSibling.get;\n                    var previousSibling = this;\n                    while (previousSibling = getPreviousSibling.call(previousSibling)) {\n                        if (previousSibling.nodeType === Node.ELEMENT_NODE) {\n                            return previousSibling;\n                        }\n                    }\n                    return null;\n                }\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'nextElementSibling',\n            get: function get() {\n                var nodeState = $.getShadowState(this);\n                if (nodeState && nodeState.parentNode) {\n                    var childNodes = $.getShadowState(nodeState.parentNode).childNodes;\n                    var index = childNodes.indexOf(this);\n                    while (index < childNodes.length - 1) {\n                        var next = childNodes[++index];\n                        if (next.nodeType === Node.ELEMENT_NODE) {\n                            return next;\n                        }\n                    };\n                    return null;\n                } else if (native.nextElementSibling) {\n                    return native.nextElementSibling.get.call(this);\n                } else {\n                    var getNextSibling = $.descriptors.Node.nextSibling.get;\n                    var nextSibling = this;\n                    while (nextSibling = getNextSibling.call(nextSibling)) {\n                        if (nextSibling.nodeType === Node.ELEMENT_NODE) {\n                            return nextSibling;\n                        }\n                    }\n                    return null;\n                }\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-nonelementparentnode\n\nexports.default = function (base) {\n\n    var native = {\n        querySelectorAll: $.descriptor(base, 'querySelectorAll')\n    };\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'getElementById',\n            value: function getElementById(id) {\n                // https://dom.spec.whatwg.org/#dom-nonelementparentnode-getelementbyid\n\n                if (id === '' || /\\s/.test(id)) {\n                    return null;\n                }\n\n                var firstChild = this.firstChild;\n\n                if (!firstChild) {\n                    return null;\n                }\n\n                return $.treeOrderRecursiveSelectFirst(firstChild, function (node) {\n                    return node.id === id;\n                });\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#interface-parentnode\n\nexports.default = function (base) {\n\n    var native = {\n        children: $.descriptor(base, 'children'),\n        firstElementChild: $.descriptor(base, 'firstElementChild'),\n        lastElementChild: $.descriptor(base, 'lastElementChild'),\n        childElementCount: $.descriptor(base, 'childElementCount')\n    };\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'prepend',\n\n\n            // TODO: tests\n            value: function prepend() {\n                for (var _len = arguments.length, nodes = Array(_len), _key = 0; _key < _len; _key++) {\n                    nodes[_key] = arguments[_key];\n                }\n\n                // https://dom.spec.whatwg.org/#dom-parentnode-prepend\n                // The prepend(nodes) method, when invoked, must run these steps:\n\n                // 1. Let node be the result of converting nodes into a node given \n                // nodes and context objects node document. Rethrow any exceptions.\n                var node = $.convertNodesIntoANode(nodes, this.ownerDocument || this);\n\n                // 2. Pre-insert node into context object before the context objects \n                // first child. Rethrow any exceptions.\n                $.preInsert(node, this, this.firstChild);\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'append',\n            value: function append() {\n                for (var _len2 = arguments.length, nodes = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                    nodes[_key2] = arguments[_key2];\n                }\n\n                // https://dom.spec.whatwg.org/#dom-parentnode-append\n                // The append(nodes) method, when invoked, must run these steps:\n\n                // 1. Let node be the result of converting nodes into a node given \n                // nodes and context objects node document. Rethrow any exceptions.\n                var node = $.convertNodesIntoANode(nodes, this.ownerDocument || this);\n\n                // 2. Append node to context object. Rethrow any exceptions.\n                $.append(node, this);\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'querySelector',\n            value: function querySelector(selectors) {\n                var results = this.querySelectorAll(selectors);\n\n                if (results.length) {\n                    return results[0];\n                }\n\n                return null;\n            }\n\n            // TODO: tests\n\n        }, {\n            key: 'querySelectorAll',\n            value: function querySelectorAll(selectors) {\n                // https://dom.spec.whatwg.org/#scope-match-a-selectors-string\n                // this is horrible, performance-wise.\n                // it's about 100x slower than native querySelectorAll.\n                // that might not amount to much in practice, though.\n                // after all, this is a polyfill.\n\n                var firstChild = this.firstChild;\n\n                if (!firstChild) {\n                    return null;\n                }\n\n                var results = [];\n\n                $.treeOrderRecursiveSelectAll(firstChild, results, function (node) {\n                    return node.nodeType === Node.ELEMENT_NODE && node.matches(selectors);\n                });\n\n                return results;\n            }\n        }, {\n            key: 'children',\n            get: function get() {\n                var childNodes = void 0;\n\n                var shadowState = $.getShadowState(this);\n                if (shadowState) {\n                    childNodes = shadowState.childNodes;\n                }\n\n                if (!childNodes) {\n                    if (native.children) {\n                        return native.children.get.call(this);\n                    }\n                    childNodes = this.childNodes;\n                }\n\n                var elements = [];\n\n                for (var i = 0; i < childNodes.length; i++) {\n                    var node = childNodes[i];\n                    if (node.nodeType == Node.ELEMENT_NODE) {\n                        elements.push(node);\n                    }\n                }\n\n                return elements;\n            }\n        }, {\n            key: 'firstElementChild',\n            get: function get() {\n                var childNodes = void 0;\n\n                var shadowState = $.getShadowState(this);\n                if (shadowState) {\n                    childNodes = shadowState.childNodes;\n                }\n\n                if (!childNodes) {\n                    if (native.firstElementChild) {\n                        return native.firstElementChild.get.call(this);\n                    }\n                    childNodes = this.childNodes;\n                }\n\n                for (var i = 0; i < childNodes.length; i++) {\n                    var node = childNodes[i];\n                    if (node.nodeType == Node.ELEMENT_NODE) {\n                        return node;\n                    }\n                }\n\n                return null;\n            }\n        }, {\n            key: 'lastElementChild',\n            get: function get() {\n                var childNodes = void 0;\n\n                var shadowState = $.getShadowState(this);\n                if (shadowState) {\n                    childNodes = shadowState.childNodes;\n                }\n\n                if (!childNodes) {\n                    if (native.lastElementChild) {\n                        return native.lastElementChild.get.call(this);\n                    }\n                    childNodes = this.childNodes;\n                }\n\n                for (var i = childNodes.length - 1; i >= 0; i--) {\n                    var node = childNodes[i];\n                    if (node.nodeType == Node.ELEMENT_NODE) {\n                        return node;\n                    }\n                }\n\n                return null;\n            }\n        }, {\n            key: 'childElementCount',\n            get: function get() {\n                var childNodes = void 0;\n\n                var shadowState = $.getShadowState(this);\n                if (shadowState) {\n                    childNodes = shadowState.childNodes;\n                }\n\n                if (!childNodes) {\n                    if (native.childElementCount) {\n                        return native.childElementCount.get.call(this);\n                    }\n                    childNodes = this.childNodes;\n                }\n\n                var count = 0;\n\n                for (var i = 0; i < childNodes.length; i++) {\n                    var node = childNodes[i];\n                    if (node.nodeType == Node.ELEMENT_NODE) {\n                        count++;\n                    }\n                }\n\n                return count;\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // https://dom.spec.whatwg.org/#mixin-slotable\n\nexports.default = function (base) {\n\n    return function () {\n        function _class() {\n            _classCallCheck(this, _class);\n        }\n\n        _createClass(_class, [{\n            key: 'assignedSlot',\n            get: function get() {\n                // spec implementation is:\n                // return $.findASlot(this, true);\n                // this uses an alternative (see https://github.com/whatwg/dom/issues/369)\n                var shadowState = $.getShadowState(this);\n                if (shadowState) {\n                    var slot = shadowState.assignedSlot;\n                    if (slot && $.closedShadowHidden(slot, this)) {\n                        slot = null;\n                    }\n                    return slot;\n                }\n                return null;\n            }\n        }]);\n\n        return _class;\n    }();\n};\n\nvar _utils = require('../utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function () {\n\n    // Reflected attributes\n    reflect.patchAll();\n\n    // Element.matches(selectors) polyfill from MDN\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/matches#Polyfill\n    // Purposefully chop out the polyfill function that uses querySelectorAll.\n    if (!Element.prototype.matches) {\n        Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.webkitMatchesSelector;\n    }\n\n    // Attr interface\n    $.extend(Attr, _Attr2.default);\n\n    // CharacterData interface\n    $.extend(CharacterData, _CharacterData2.default);\n\n    // CustomEvent interface\n    $.extend(CustomEvent, _CustomEvent2.default);\n    _CustomEvent2.default.prototype = CustomEvent.prototype;\n    window.CustomEvent = _CustomEvent2.default;\n\n    // Document interface\n    $.extend(Document, _Document2.default);\n\n    // DOMTokenList interface\n    if ('DOMTokenList' in window) {\n        $.extend(DOMTokenList, _DOMTokenList2.default);\n    }\n\n    // Element interface\n    $.extend(Element, _Element2.default);\n\n    // Event interface\n    $.extend(Event, _Event2.default);\n    $.extend(FocusEvent, _Event.hasRelatedTarget);\n    $.extend(MouseEvent, _Event.hasRelatedTarget);\n    _Event2.default.prototype = Event.prototype;\n    window.Event = _Event2.default;\n\n    // EventTarget\n    if ('EventTarget' in Window) {\n        $.extend(EventTarget, (0, _EventTarget2.default)(EventTarget));\n    } else {\n        // In IE, EventTarget is not exposed and Window's\n        // EventTarget methods are not the same as Node's.\n        $.extend(Window, (0, _EventTarget2.default)(Window));\n        $.extend(Node, (0, _EventTarget2.default)(Node));\n    }\n\n    // HTMLSlotElement interface\n    $.extend('HTMLSlotElement' in window ? HTMLSlotElement : HTMLUnknownElement, _HTMLSlotElement2.default);\n\n    // HTMLTableElement interface\n    $.extend(HTMLTableElement, _HTMLTableElement2.default);\n\n    // HTMLTableRowElement interface\n    $.extend(HTMLTableRowElement, _HTMLTableRowElement2.default);\n\n    // HTMLTableSectionElement interface\n    $.extend(HTMLTableSectionElement, _HTMLTableSectionElement2.default);\n\n    // MutationObserver interface\n    window.MutationObserver = _MutationObserver2.default;\n\n    // NamedNodeMap interface\n    $.extend(NamedNodeMap, _NamedNodeMap2.default);\n\n    // Node interface\n    $.extend(Node, _Node2.default);\n\n    // TODO: implement Range interface\n\n    // Text interface\n    $.extend(Text, _Text2.default);\n\n    // ChildNode mixin\n    $.extend(DocumentType, (0, _ChildNode2.default)(DocumentType));\n    $.extend(Element, (0, _ChildNode2.default)(Element));\n    $.extend(CharacterData, (0, _ChildNode2.default)(CharacterData));\n\n    // DocumentOrShadowRoot mixin\n    $.extend(Document, _DocumentOrShadowRoot2.default);\n    $.extend(_ShadowRoot2.default, _DocumentOrShadowRoot2.default);\n\n    // NonDocumentTypeChildNode mixin\n    $.extend(Element, (0, _NonDocumentTypeChildNode2.default)(Element));\n    $.extend(CharacterData, (0, _NonDocumentTypeChildNode2.default)(CharacterData));\n\n    // NonElementParentNode mixin\n    $.extend(Document, (0, _NonElementParentNode2.default)(Document));\n    $.extend(DocumentFragment, (0, _NonElementParentNode2.default)(DocumentFragment));\n\n    // ParentNode mixin\n    $.extend(Document, (0, _ParentNode2.default)(Document));\n    $.extend(DocumentFragment, (0, _ParentNode2.default)(DocumentFragment));\n    $.extend(Element, (0, _ParentNode2.default)(Element));\n\n    // Slotable mixin\n    $.extend(Element, (0, _Slotable2.default)(Element));\n    $.extend(Text, (0, _Slotable2.default)(Text));\n\n    // Cleanup for IE, Edge\n    delete Node.prototype.attributes;\n    delete HTMLElement.prototype.classList;\n    delete HTMLElement.prototype.children;\n    delete HTMLElement.prototype.parentElement;\n    delete HTMLElement.prototype.innerHTML;\n    delete HTMLElement.prototype.outerHTML;\n    delete HTMLElement.prototype.insertAdjacentText;\n    delete HTMLElement.prototype.insertAdjacentElement;\n    delete HTMLElement.prototype.insertAdjacentHTML;\n};\n\nvar _utils = require('./utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _reflect = require('./reflect.js');\n\nvar reflect = _interopRequireWildcard(_reflect);\n\nvar _Attr = require('./interfaces/Attr.js');\n\nvar _Attr2 = _interopRequireDefault(_Attr);\n\nvar _CharacterData = require('./interfaces/CharacterData.js');\n\nvar _CharacterData2 = _interopRequireDefault(_CharacterData);\n\nvar _CustomEvent = require('./interfaces/CustomEvent.js');\n\nvar _CustomEvent2 = _interopRequireDefault(_CustomEvent);\n\nvar _Document = require('./interfaces/Document.js');\n\nvar _Document2 = _interopRequireDefault(_Document);\n\nvar _DOMTokenList = require('./interfaces/DOMTokenList.js');\n\nvar _DOMTokenList2 = _interopRequireDefault(_DOMTokenList);\n\nvar _Element = require('./interfaces/Element.js');\n\nvar _Element2 = _interopRequireDefault(_Element);\n\nvar _Event = require('./interfaces/Event.js');\n\nvar _Event2 = _interopRequireDefault(_Event);\n\nvar _EventTarget = require('./interfaces/EventTarget.js');\n\nvar _EventTarget2 = _interopRequireDefault(_EventTarget);\n\nvar _HTMLSlotElement = require('./interfaces/HTMLSlotElement.js');\n\nvar _HTMLSlotElement2 = _interopRequireDefault(_HTMLSlotElement);\n\nvar _HTMLTableElement = require('./interfaces/HTMLTableElement.js');\n\nvar _HTMLTableElement2 = _interopRequireDefault(_HTMLTableElement);\n\nvar _HTMLTableRowElement = require('./interfaces/HTMLTableRowElement.js');\n\nvar _HTMLTableRowElement2 = _interopRequireDefault(_HTMLTableRowElement);\n\nvar _HTMLTableSectionElement = require('./interfaces/HTMLTableSectionElement.js');\n\nvar _HTMLTableSectionElement2 = _interopRequireDefault(_HTMLTableSectionElement);\n\nvar _MutationObserver = require('./interfaces/MutationObserver.js');\n\nvar _MutationObserver2 = _interopRequireDefault(_MutationObserver);\n\nvar _NamedNodeMap = require('./interfaces/NamedNodeMap.js');\n\nvar _NamedNodeMap2 = _interopRequireDefault(_NamedNodeMap);\n\nvar _Node = require('./interfaces/Node.js');\n\nvar _Node2 = _interopRequireDefault(_Node);\n\nvar _ShadowRoot = require('./interfaces/ShadowRoot.js');\n\nvar _ShadowRoot2 = _interopRequireDefault(_ShadowRoot);\n\nvar _Text = require('./interfaces/Text.js');\n\nvar _Text2 = _interopRequireDefault(_Text);\n\nvar _ChildNode = require('./mixins/ChildNode.js');\n\nvar _ChildNode2 = _interopRequireDefault(_ChildNode);\n\nvar _DocumentOrShadowRoot = require('./mixins/DocumentOrShadowRoot.js');\n\nvar _DocumentOrShadowRoot2 = _interopRequireDefault(_DocumentOrShadowRoot);\n\nvar _NonDocumentTypeChildNode = require('./mixins/NonDocumentTypeChildNode.js');\n\nvar _NonDocumentTypeChildNode2 = _interopRequireDefault(_NonDocumentTypeChildNode);\n\nvar _NonElementParentNode = require('./mixins/NonElementParentNode.js');\n\nvar _NonElementParentNode2 = _interopRequireDefault(_NonElementParentNode);\n\nvar _ParentNode = require('./mixins/ParentNode.js');\n\nvar _ParentNode2 = _interopRequireDefault(_ParentNode);\n\nvar _Slotable = require('./mixins/Slotable.js');\n\nvar _Slotable2 = _interopRequireDefault(_Slotable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.patchAll = patchAll;\n\nvar _utils = require('./utils.js');\n\nvar $ = _interopRequireWildcard(_utils);\n\nvar _DOMTokenList = require('./interfaces/DOMTokenList.js');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// Fear not the single page\n// https://www.w3.org/TR/html/single-page.html\n\n// TODO: implement on demand\n// These might be a bit much considering we can't do anything about inline script handlers\n// GlobalEventHandlers\n// DocumentAndElementEventHandlers\n\n// TODO: implement on demand\n// This would be useful to polyfill considering most current browsers don't implement it yet\n// HTMLHyperlinkElementUtils (Anchor, Area)\n\n// An index of IDL attributes that should reflect a corresponding content attribute.\n\nvar interfaces = {\n    'Element': {\n        'id': reflectString(),\n        'className': reflectString('class'),\n        'classList': reflectDOMTokenList('class'),\n        'slot': reflectString()\n    },\n    'HTMLElement': {\n        'title': reflectString(),\n        'lang': reflectString(),\n        'translate': reflectString(),\n        'dir': reflectString(),\n        // TODO: implement on demand\n        //'dataset': reflect.DOMStringMap('data'),\n        'hidden': reflectBoolean(),\n        'tabIndex': reflectInteger(null, 0),\n        'accessKey': reflectString(),\n        'draggable': reflectString(),\n        'contextMenu': reflectHTMLElement(window.HTMLMenuElement),\n        'spellcheck': reflectString(),\n        // ElementContentEditable\n        'contentEditable': reflectString()\n    },\n    'HTMLAnchorElement': {\n        'target': reflectString(),\n        'download': reflectString(),\n        'rel': reflectString(),\n        'rev': reflectString(),\n        'relList': reflectDOMTokenList('rel'),\n        'hreflang': reflectString(),\n        'type': reflectString(),\n        'text': reflectTextContent()\n    },\n    'HTMLAreaElement': {\n        'alt': reflectString(),\n        'coords': reflectString(),\n        'shape': reflectString(),\n        'target': reflectString(),\n        'download': reflectString(),\n        'rel': reflectString(),\n        'relList': reflectDOMTokenList('rel'),\n        'hreflang': reflectString(),\n        'type': reflectString()\n    },\n    'HTMLBaseElement': {\n        'href': reflectString(),\n        'target': reflectString()\n    },\n    'HTMLButtonElement': {\n        'autofocus': reflectBoolean(),\n        'disabled': reflectBoolean(),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'formAction': reflectString(),\n        'formEnctype': reflectString(),\n        'formMethod': reflectString(),\n        'formNoValidate': reflectBoolean(),\n        'formTarget': reflectString(),\n        'name': reflectString(),\n        'type': reflectString(),\n        'value': reflectString(),\n        'menu': reflectHTMLElement(window.HTMLMenuElement)\n    },\n    'HTMLCanvasElement': {\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0)\n    },\n    'HTMLDataElement': {\n        'value': reflectString()\n    },\n    'HTMLDetailsElement': {\n        'open': reflectBoolean()\n    },\n    'HTMLEmbedElement': {\n        'src': reflectString(),\n        'type': reflectString(),\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0)\n    },\n    'HTMLFieldSetElement': {\n        'disabled': reflectBoolean(),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'name': reflectString()\n    },\n    'HTMLFormElement': {\n        'acceptCharset': reflectString('accept-charset'),\n        'action': reflectString(),\n        'autocomplete': reflectString(),\n        'enctype': reflectString(),\n        'encoding': reflectString('enctype'),\n        'method': reflectString(),\n        'name': reflectString(),\n        'noValidate': reflectBoolean(),\n        'target': reflectString()\n    },\n    'HTMLIFrameElement': {\n        'src': reflectString(),\n        'srcdoc': reflectString(),\n        'name': reflectString(),\n        'sandbox': reflectDOMTokenList('sandbox'),\n        'allowFullscreen': reflectBoolean(),\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0)\n    },\n    'HTMLImageElement': {\n        'alt': reflectString(),\n        'src': reflectString(),\n        'srcset': reflectString(),\n        'crossOrigin': reflectString(),\n        'useMap': reflectString(),\n        'isMap': reflectBoolean(),\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0)\n    },\n    // TODO: caveat about feature testing input elements using anything besides 'type'\n    'HTMLInputElement': {\n        'accept': reflectString(),\n        'alt': reflectString(),\n        'autocomplete': reflectString(),\n        'autofocus': reflectBoolean(),\n        'defaultChecked': reflectBoolean('checked'),\n        'dirName': reflectString(),\n        'disabled': reflectBoolean(),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'formAction': reflectString(),\n        'formEnctype': reflectString(),\n        'formMethod': reflectString(),\n        'formNoValidate': reflectBoolean(),\n        'formTarget': reflectString(),\n        'height': reflectInteger(null, 0),\n        'inputMode': reflectString(),\n        // TODO: investigate whether we should bother with 'list'.\n        // Browsers without native Shadow DOM could end up not\n        // pulling suggestions from the correct list anyways.\n        // Possibly needs to be a caveat about this.\n        //'list': reflectSuggestionSourceElement(),\n        'max': reflectString(),\n        'maxLength': reflectInteger(0, 0),\n        'min': reflectString(),\n        'minLength': reflectInteger(0, 0),\n        'multiple': reflectBoolean(),\n        'name': reflectString(),\n        'pattern': reflectString(),\n        'placeholder': reflectString(),\n        'readOnly': reflectBoolean(),\n        'required': reflectBoolean(),\n        'size': reflectInteger(1, 1),\n        'src': reflectString(),\n        'step': reflectString(),\n        'type': reflectString(),\n        'defaultValue': reflectString('value'),\n        'width': reflectInteger(null, 0)\n    },\n    'HTMLKeygenElement': {\n        'autofocus': reflectBoolean(),\n        'challenge': reflectString(),\n        'disabled': reflectBoolean(),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'keytype': reflectString(),\n        'name': reflectString()\n    },\n    'HTMLLabelElement': {\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'htmlFor': reflectString('for')\n    },\n    'HTMLLegendElement': {\n        'form': reflectHTMLElement(HTMLFormElement, true)\n    },\n    'HTMLLIElement': {\n        'value': reflectString()\n    },\n    'HTMLLinkElement': {\n        'href': reflectString(),\n        'crossOrigin': reflectString(),\n        'rel': reflectString(),\n        'rev': reflectString(),\n        'relList': reflectDOMTokenList('rel'),\n        'media': reflectString(),\n        'hreflang': reflectString(),\n        'type': reflectString(),\n        'sizes': reflectDOMTokenList('sizes')\n    },\n    'HTMLMapElement': {\n        'name': reflectString()\n    },\n    'HTMLMediaElement': {\n        'src': reflectString(),\n        'crossOrigin': reflectString(),\n        'preload': reflectString(),\n        'loop': reflectBoolean(),\n        'autoplay': reflectBoolean(),\n        'mediaGroup': reflectString(),\n        'controls': reflectBoolean(),\n        'defaultMuted': reflectBoolean('muted')\n    },\n    'HTMLMenuElement': {\n        'type': reflectString(),\n        'label': reflectString()\n    },\n    'HTMLMenuItemElement': {\n        'type': reflectString(),\n        'label': reflectString(),\n        'icon': reflectString(),\n        'disabled': reflectBoolean(),\n        'checked': reflectBoolean('checked'),\n        'radiogroup': reflectString(),\n        'default': reflectBoolean()\n    },\n    'HTMLMetaElement': {\n        'name': reflectString(),\n        'httpEquiv': reflectString('http-equiv'),\n        'content': reflectString()\n    },\n    'HTMLMeterElement': {\n        'value': reflectFloat(null, 0),\n        'min': reflectFloat(null, 0),\n        'max': reflectFloat(null, 0),\n        'low': reflectFloat(null, 0),\n        'high': reflectFloat(null, 0),\n        'optimum': reflectFloat(null, 0)\n    },\n    'HTMLModElement': {\n        'cite': reflectString(),\n        'dateTime': reflectString()\n    },\n    'HTMLObjectElement': {\n        'data': reflectString(),\n        'type': reflectString(),\n        'typeMustMatch': reflectBoolean(),\n        'name': reflectString(),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0)\n    },\n    'HTMLOListElement': {\n        'reversed': reflectBoolean(),\n        'start': reflectInteger(null, 0),\n        'type': reflectString()\n    },\n    'HTMLOptGroupElement': {\n        'disabled': reflectBoolean(),\n        'label': reflectString()\n    },\n    'HTMLOptionElement': {\n        'disabled': reflectBoolean(),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'label': reflectString(),\n        'defaultSelected': reflectBoolean('selected'),\n        'value': reflectString()\n    },\n    'HTMLOutputElement': {\n        'htmlFor': reflectDOMTokenList('for'),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'name': reflectString(),\n        'defaultValue': reflectString('value')\n    },\n    'HTMLParamElement': {\n        'name': reflectString(),\n        'value': reflectString()\n    },\n    'HTMLProgressElement': {\n        'value': reflectFloat(null, 0),\n        'max': reflectFloat(null, 0)\n    },\n    'HTMLQuoteElement': {\n        'cite': reflectString()\n    },\n    'HTMLScriptElement': {\n        'src': reflectString(),\n        'type': reflectString(),\n        'charset': reflectString(),\n        'async': reflectBoolean(),\n        'defer': reflectBoolean(),\n        'crossOrigin': reflectString(),\n        // TODO: implement on demand\n        // 'text': reflectScriptText(),\n        'nonce': reflectString()\n    },\n    'HTMLSelectElement': {\n        'autocomplete': reflectString(),\n        'autofocus': reflectBoolean(),\n        'disabled': reflectBoolean(),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'multiple': reflectBoolean(),\n        'name': reflectString(),\n        'required': reflectBoolean(),\n        'size': reflectInteger(1, 1)\n    },\n    'HTMLSourceElement': {\n        'src': reflectString(),\n        'type': reflectString(),\n        'media': reflectString()\n    },\n    'HTMLStyleElement': {\n        'media': reflectString(),\n        'nonce': reflectString(),\n        'type': reflectString()\n    },\n    'HTMLTableCellElement': {\n        'colSpan': reflectInteger(0, -1),\n        'rowSpan': reflectInteger(0, -1),\n        'headers': reflectDOMTokenList('headers')\n    },\n    'HTMLTableColElement': {\n        'span': reflectInteger(1, 1)\n    },\n    'HTMLTableHeaderCellElement': {\n        'scope': reflectString(),\n        'abbr': reflectString()\n    },\n    'HTMLTextAreaElement': {\n        'autocomplete': reflectString(),\n        'autofocus': reflectBoolean(),\n        'cols': reflectString(),\n        'dirName': reflectString(),\n        'disabled': reflectBoolean(),\n        'form': reflectHTMLElement(HTMLFormElement, true),\n        'inputMode': reflectString(),\n        'maxLength': reflectInteger(0, 0),\n        'minLength': reflectInteger(0, 0),\n        'name': reflectString(),\n        'placeholder': reflectString(),\n        'readOnly': reflectBoolean(),\n        'required': reflectBoolean(),\n        'rows': reflectInteger(1, 1),\n        'wrap': reflectString(),\n        'defaultValue': reflectTextContent()\n    },\n    'HTMLTimeElement': {\n        'dateTime': reflectString()\n    },\n    'HTMLTrackElement': {\n        'kind': reflectString(),\n        'src': reflectString(),\n        'srclang': reflectString(),\n        'label': reflectString(),\n        'default': reflectBoolean()\n    },\n    'HTMLVideoElement': {\n        'width': reflectInteger(null, 0),\n        'height': reflectInteger(null, 0),\n        'poster': reflectString()\n    }\n};\n\n// https://www.w3.org/TR/html/single-page.html#reflection\n\nfunction reflectString(attributeName) {\n    return function (type, name) {\n        attributeName = attributeName || name.toLowerCase();\n        var descriptor = $.descriptor(type, name);\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: descriptor ? descriptor.get : function () {\n                return this.getAttribute(attributeName) || '';\n            },\n            set: function set(value) {\n                $.setAttributeValue(this, attributeName, value);\n            }\n        });\n    };\n}\n\nfunction reflectBoolean(attributeName) {\n    return function (type, name) {\n        attributeName = attributeName || name.toLowerCase();\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                return this.hasAttribute(attributeName);\n            },\n            set: function set(value) {\n                if (value == null) {\n                    $.removeAttributeByName(attributeName, this);\n                } else {\n                    $.setAttributeValue(this, attributeName, value);\n                }\n            }\n        });\n    };\n}\n\n// TODO: minValue, errors\nfunction reflectInteger(minValue, defaultValue) {\n    return function (type, name) {\n        var attributeName = name.toLowerCase();\n        defaultValue = defaultValue || 0;\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                var value = this.getAttribute(attributeName);\n                return parseInt(value) || defaultValue;\n            },\n            set: function set(value) {\n                if (typeof value !== 'number') {\n                    throw $.makeError('TypeError');\n                }\n                $.setAttributeValue(this, attributeName, value.toString());\n            }\n        });\n    };\n}\n\n// TODO: minValue, errors\nfunction reflectFloat(minValue, defaultValue) {\n    return function (type, name) {\n        var attributeName = name.toLowerCase();\n        defaultValue = defaultValue || 0;\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                var value = this.getAttribute(attributeName);\n                return parseFloat(value) || defaultValue;\n            },\n            set: function set(value) {\n                if (typeof value !== 'number') {\n                    throw $.makeError('TypeError');\n                }\n                $.setAttributeValue(this, attributeName, value.toString());\n            }\n        });\n    };\n}\n\nfunction reflectDOMTokenList(localName) {\n    return function (type, name) {\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                return (0, _DOMTokenList.getOrCreateDOMTokenList)(this, localName);\n            },\n            set: function set(value) {\n                (0, _DOMTokenList.getOrCreateDOMTokenList)(this, localName).value = value;\n            }\n        });\n    };\n}\n\nfunction reflectHTMLElement(candidateType, readOnly) {\n    return function (type, name) {\n        var attributeName = name.toLowerCase();\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                if (!this.hasAttribute(attributeName)) {\n                    return null;\n                }\n                var id = this.getAttribute(attributeName);\n                var candidate = this.ownerDocument.getElementById(id);\n                if (candidate == null || !(candidate instanceof candidateType)) {\n                    return null;\n                }\n                return candidate;\n            },\n            set: readOnly ? undefined : function (value) {\n                if (!(value instanceof candidateType)) {\n                    throw $.makeError('TypeError');\n                }\n                if (value.hasAttribute('id')) {\n                    var found = this.ownerDocument.getElementById(value.id);\n                    if (value === found) {\n                        this.setAttribute(attributeName, value.id);\n                        return;\n                    }\n                }\n                this.setAttribute(attributeName, '');\n            }\n        });\n    };\n}\n\nfunction reflectTextContent() {\n    return function (type, name) {\n        Object.defineProperty(type.prototype, name, {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n                return this.textContent;\n            },\n            set: function set(value) {\n                this.textContent = value;\n            }\n        });\n    };\n}\n\nfunction patchAll() {\n    var identifiers = Object.getOwnPropertyNames(interfaces);\n    for (var i = 0; i < identifiers.length; i++) {\n        var identifier = identifiers[i];\n        if (identifier in window) {\n            var type = window[identifier];\n            var attributes = Object.getOwnPropertyNames(interfaces[identifier]);\n            for (var j = 0; j < attributes.length; j++) {\n                var attribute = attributes[j];\n                interfaces[identifier][attribute](type, attribute);\n            }\n        }\n    }\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.makeError = makeError;\nexports.reportError = reportError;\nexports.extend = extend;\nexports.getShadowState = getShadowState;\nexports.setShadowState = setShadowState;\nexports.treeOrderRecursiveSelectAll = treeOrderRecursiveSelectAll;\nexports.treeOrderRecursiveSelectFirst = treeOrderRecursiveSelectFirst;\nexports.filterByRoot = filterByRoot;\nexports.isShadowRoot = isShadowRoot;\nexports.isValidCustomElementName = isValidCustomElementName;\nexports.parseHTMLFragment = parseHTMLFragment;\nexports.serializeHTMLFragment = serializeHTMLFragment;\nexports.root = root;\nexports.descendant = descendant;\nexports.inclusiveDescendant = inclusiveDescendant;\nexports.ancestor = ancestor;\nexports.inclusiveAncestor = inclusiveAncestor;\nexports.convertNodesIntoANode = convertNodesIntoANode;\nexports.clone = clone;\nexports.adopt = adopt;\nexports.hostIncludingInclusiveAncestor = hostIncludingInclusiveAncestor;\nexports.shadowIncludingRoot = shadowIncludingRoot;\nexports.shadowIncludingDescendant = shadowIncludingDescendant;\nexports.shadowIncludingInclusiveDescendant = shadowIncludingInclusiveDescendant;\nexports.shadowIncludingAncestor = shadowIncludingAncestor;\nexports.shadowIncludingInclusiveAncestor = shadowIncludingInclusiveAncestor;\nexports.closedShadowHidden = closedShadowHidden;\nexports.retarget = retarget;\nexports.changeAttribute = changeAttribute;\nexports.appendAttribute = appendAttribute;\nexports.removeAttribute = removeAttribute;\nexports.replaceAttribute = replaceAttribute;\nexports.setAttribute = setAttribute;\nexports.setAttributeValue = setAttributeValue;\nexports.removeAttributeByName = removeAttributeByName;\nexports.removeAttributeByNamespace = removeAttributeByNamespace;\nexports.insertAdjacent = insertAdjacent;\nexports.setExistingAttributeValue = setExistingAttributeValue;\nexports.replaceData = replaceData;\nexports.findASlot = findASlot;\nexports.findSlotables = findSlotables;\nexports.findFlattenedSlotables = findFlattenedSlotables;\nexports.assignSlotables = assignSlotables;\nexports.assignSlotablesForATree = assignSlotablesForATree;\nexports.assignASlot = assignASlot;\nexports.signalASlotChange = signalASlotChange;\nexports.ensurePreInsertionValidity = ensurePreInsertionValidity;\nexports.preInsert = preInsert;\nexports.insert = insert;\nexports.append = append;\nexports.replace = replace;\nexports.replaceAll = replaceAll;\nexports.preRemove = preRemove;\nexports.remove = remove;\nexports.createMutationObserver = createMutationObserver;\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar slice = exports.slice = function slice(array) {\n    return Array.prototype.slice.call(array);\n};\n\nvar descriptor = exports.descriptor = function descriptor(type, name) {\n    return Object.getOwnPropertyDescriptor(type.prototype, name);\n};\n\nvar descriptors = exports.descriptors = {\n    Attr: {\n        value: descriptor(Attr, 'value')\n    },\n    CharacterData: {\n        data: descriptor(CharacterData, 'data')\n    },\n    Document: {\n        activeElement: descriptor(Document, 'activeElement'),\n        getElementsByTagName: descriptor(Document, 'getElementsByTagName'),\n        getElementsByTagNameNS: descriptor(Document, 'getElementsByTagNameNS'),\n        getElementsByClassName: descriptor(Document, 'getElementsByClassName')\n    },\n    Element: {\n        attributes: descriptor(Element, 'attributes') || descriptor(Node, 'attributes'),\n        getElementsByTagName: descriptor(Element, 'getElementsByTagName'),\n        getElementsByTagNameNS: descriptor(Element, 'getElementsByTagNameNS'),\n        getElementsByClassName: descriptor(Element, 'getElementsByClassName'),\n        innerHTML: descriptor(Element, 'innerHTML') || descriptor(HTMLElement, 'innerHTML'),\n        querySelectorAll: descriptor(Element, 'querySelectorAll'),\n        setAttribute: descriptor(Element, 'setAttribute'),\n        setAttributeNodeNS: descriptor(Element, 'setAttributeNodeNS'),\n        removeAttributeNode: descriptor(Element, 'removeAttributeNode')\n    },\n    Event: {\n        currentTarget: descriptor(Event, 'currentTarget'),\n        target: descriptor(Event, 'target')\n    },\n    FocusEvent: {\n        relatedTarget: descriptor(FocusEvent, 'relatedTarget')\n    },\n    MouseEvent: {\n        relatedTarget: descriptor(MouseEvent, 'relatedTarget')\n    },\n    Node: {\n        parentNode: descriptor(Node, 'parentNode'),\n        hasChildNodes: descriptor(Node, 'hasChildNodes'),\n        childNodes: descriptor(Node, 'childNodes'),\n        firstChild: descriptor(Node, 'firstChild'),\n        lastChild: descriptor(Node, 'lastChild'),\n        previousSibling: descriptor(Node, 'previousSibling'),\n        nextSibling: descriptor(Node, 'nextSibling'),\n        nodeValue: descriptor(Node, 'nodeValue'),\n        textContent: descriptor(Node, 'textContent'),\n        cloneNode: descriptor(Node, 'cloneNode'),\n        insertBefore: descriptor(Node, 'insertBefore'),\n        removeChild: descriptor(Node, 'removeChild'),\n        appendChild: descriptor(Node, 'appendChild')\n    }\n};\n\n// TODO: add a note about importing YuzuJS/setImmediate before \n// this polyfill if better performance is desired.\nvar setImmediate = exports.setImmediate = 'setImmediate' in window ? window.setImmediate : function (callback) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n    }\n\n    return setTimeout.apply(undefined, [callback, 0].concat(args));\n};\n\n// TODO: analyze usages and provide brief but descriptive messages\nfunction makeError(name, message) {\n    try {\n        var sacrifice = document.createElement('div');\n        descriptors.Node.appendChild.call(sacrifice, sacrifice);\n    } catch (error) {\n        error.message = message;\n        error.name = name;\n        return error;\n    }\n}\n\nfunction reportError(error) {\n    if ('console' in window && 'error' in window.console) {\n        window.console.error(error);\n    }\n}\n\nfunction extend(object) {\n    for (var _len2 = arguments.length, mixins = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        mixins[_key2 - 1] = arguments[_key2];\n    }\n\n    for (var i = 0; i < mixins.length; i++) {\n        var mixin = mixins[i].prototype;\n        var names = Object.getOwnPropertyNames(mixin);\n        for (var j = 0; j < names.length; j++) {\n            var name = names[j];\n            if (name === 'constructor') {\n                continue;\n            }\n            var _descriptor = Object.getOwnPropertyDescriptor(mixin, name);\n            Object.defineProperty(object.prototype || object, name, _descriptor);\n        }\n    }\n}\n\nfunction getShadowState(object) {\n    return object._shadow;\n}\n\nfunction setShadowState(object, state) {\n    return object._shadow = state;\n}\n\nfunction treeOrderRecursiveSelectAll(node, results, match) {\n    if (match(node)) {\n        results.push(node);\n    }\n    var firstChild = node.firstChild;\n    if (firstChild) {\n        treeOrderRecursiveSelectAll(firstChild, results, match);\n    }\n    var nextSibling = node.nextSibling;\n    if (nextSibling) {\n        treeOrderRecursiveSelectAll(nextSibling, results, match);\n    }\n}\n\nfunction treeOrderRecursiveSelectFirst(node, match) {\n    if (match(node)) {\n        return node;\n    }\n    var firstChild = node.firstChild;\n    if (firstChild) {\n        var result = treeOrderRecursiveSelectFirst(firstChild, match);\n        if (result) {\n            return result;\n        }\n    }\n    var nextSibling = node.nextSibling;\n    if (nextSibling) {\n        return treeOrderRecursiveSelectFirst(nextSibling, match);\n    }\n    return null;\n}\n\nfunction filterByRoot(node, descendants) {\n    var contextRoot = root(node);\n    var filtered = new Array(descendants.length);\n    var filteredCount = 0;\n    for (var i = 0; i < descendants.length; i++) {\n        var item = descendants[i];\n        if (root(item) === contextRoot) {\n            filtered[filteredCount++] = item;\n        }\n    }\n    filtered.length = filteredCount;\n    return filtered;\n}\n\nfunction isShadowRoot(node) {\n    return node.nodeName === '#shadow-root';\n}\n\n// https://html.spec.whatwg.org/multipage/scripting.html#valid-custom-element-name\n\nfunction isValidCustomElementName(localName) {\n    switch (localName) {\n        case \"annotation-xml\":\n        case \"color-profile\":\n        case \"font-face\":\n        case \"font-face-src\":\n        case \"font-face-uri\":\n        case \"font-face-format\":\n        case \"font-face-name\":\n        case \"missing-glyph\":\n            return false;\n    }\n\n    // For now, to reduce complexity, we are leaving the unicode sets out...\n    // TODO: Consider adding 'full' support (for Unicode)\n    var regex = /[a-z](-|\\.|[0-9]|_|[a-z])+-(-|\\.|[0-9]|_|[a-z])+/g;\n\n    return regex.test(localName);\n}\n\n// https://www.w3.org/TR/DOM-Parsing/\n\n// PERF: This function uses a recycled div element\n// and a recycled document fragment stored in the passed \n// element's owner document so it can avoid allocation.\n// Callers must empty the returned fragment.\nfunction parseHTMLFragment(markup, context) {\n    var document = context.ownerDocument;\n    var documentState = getShadowState(document) || setShadowState(document, {});\n    var parsingElement = documentState.parsingElement;\n    if (!parsingElement) {\n        parsingElement = documentState.parsingElement = document.createElement('div');\n    }\n    var parsingFragment = documentState.parsingFragment;\n    if (!documentState.parsingFragment) {\n        parsingFragment = documentState.parsingFragment = document.createDocumentFragment();\n    }\n    descriptors.Element.innerHTML.set.call(parsingElement, markup);\n    var nodeFirstChildGet = descriptors.Node.firstChild.get;\n    var nodeAppendChildValue = descriptors.Node.appendChild.value;\n    var firstChild = void 0;\n    while (firstChild = nodeFirstChildGet.call(parsingElement)) {\n        nodeAppendChildValue.call(parsingFragment, firstChild);\n    }\n    return parsingFragment;\n}\n\nfunction serializeHTMLFragment(node) {\n    // https://www.w3.org/TR/html5/single-page.html#html-fragment-serialization-algorithm\n\n    // 1. Let s be a string, and initialize it to the empty string.\n    var s = '';\n\n    // 2. If the node is a template element, then let the node instead be the \n    // template element's template contents (a DocumentFragment node).\n    if (node.localName === 'template') {\n        var content = node.content;\n        if (content) {\n            node = content;\n        }\n    }\n\n    // 3. For each child node of the node, in tree order, run the following steps:\n    var childNodes = node.childNodes;\n    for (var i = 0; i < childNodes.length; i++) {\n        // 1. Let current node be the child node being processed.\n        var currentNode = childNodes[i];\n        // 2. Append the appropriate string from the following list to s:\n        switch (currentNode.nodeType) {\n            case Node.ELEMENT_NODE:\n                var tagName = void 0;\n                switch (currentNode.namespaceURI) {\n                    case 'http://www.w3.org/1999/xhtml':\n                    case 'http://www.w3.org/1998/Math/MathML':\n                    case 'http://www.w3.org/2000/svg':\n                        tagName = currentNode.localName;\n                        break;\n                    default:\n                        tagName = currentNode.qualifiedName;\n                        break;\n                }\n                s += '<' + tagName;\n                var attributes = descriptors.Element.attributes.get.call(currentNode);\n                for (var j = 0; j < attributes.length; j++) {\n                    var _attribute = attributes[j];\n                    s += ' ' + serializeAttributeName(_attribute);\n                    s += '=\"' + escapeString(_attribute.value) + '\"';\n                }\n                s += '>';\n                switch (currentNode.localName) {\n                    case 'area':case 'base':case 'basefont':case 'bgsound':\n                    case 'br':case 'col':case 'embed':case 'frame':case 'hr':\n                    case 'img':case 'input':case 'keygen':case 'link':case 'meta':\n                    case 'param':case 'source':case 'track':case 'wbr':\n                        continue;\n                    case 'pre':case 'textarea':case 'listing':\n                        var firstChild = currentNode.firstChild;\n                        if (firstChild && firstChild.nodeType === Node.TEXT_NODE && firstChild.data[0] === '\\n') {\n                            s += '\\n';\n                        }\n                        break;\n                }\n                s += serializeHTMLFragment(currentNode);\n                s += '</' + tagName + '>';\n                break;\n            case Node.TEXT_NODE:\n                switch (currentNode.parentNode.localName) {\n                    case 'style':case 'script':case 'xmp':case 'iframe':\n                    case 'noembed':case 'noframes':case 'plaintext':case 'noscript':\n                        s += currentNode.data;\n                        break;\n                    default:\n                        s += escapeString(currentNode.data);\n                        break;\n                }\n                break;\n            case Node.COMMENT_NODE:\n                s += '<!--' + currentNode.data + '-->';\n                break;\n            case Node.PROCESSING_INSTRUCTION_NODE:\n                s += '<?' + currentNode.target + ' ' + currentNode.data + '>';\n                break;\n            case Node.DOCUMENT_TYPE_NODE:\n                s += '<!DOCTYPE ' + currentNode.name + '>';\n                break;\n        }\n    }\n\n    // 4. The result of the algorithm is the string s.\n    return s;\n\n    function escapeString(string, attributeMode) {\n        if (!string || !string.length) {\n            return '';\n        }\n\n        string = string.replace('&', '&amp;');\n        string = string.replace('\\xA0', '&nbsp;');\n\n        if (attributeMode) {\n            string = string.replace('\"', '&quot;');\n        } else {\n            string = string.replace('<', '&lt;');\n            string = string.replace('>', '&gt;');\n        }\n\n        return string;\n    }\n\n    function serializeAttributeName(attribute) {\n        var namespaceURI = attribute.namespaceURI;\n        var localName = attribute.localName;\n        if (!namespaceURI) {\n            return localName;\n        }\n        switch (namespaceURI) {\n            case 'http://www.w3.org/XML/1998/namespace':\n                return 'xml:' + localName;\n            case 'http://www.w3.org/2000/xmlns/':\n                if (localName === 'xmlns') {\n                    return localName;\n                }\n                return 'xmlns:' + localName;\n            case 'http://www.w3.org/1999/xlink':\n                return 'xlink:' + localName;\n            default:\n                return attribute.name;\n        }\n    }\n}\n\n// https://dom.spec.whatwg.org/#trees\n\nfunction root(node) {\n    var root = node;\n    var parent = root.parentNode;\n\n    while (parent != null) {\n        root = parent;\n        parent = root.parentNode;\n    }\n\n    return root;\n}\n\nfunction descendant(nodeA, nodeB) {\n    var parent = nodeA.parentNode;\n\n    while (parent != null) {\n        if (nodeB === parent) {\n            return true;\n        }\n        parent = parent.parentNode;\n    }\n\n    return false;\n}\n\nfunction inclusiveDescendant(nodeA, nodeB) {\n    return nodeA === nodeB || descendant(nodeA, nodeB);\n}\n\nfunction ancestor(nodeA, nodeB) {\n    var parent = nodeB.parentNode;\n\n    while (parent != null) {\n        if (nodeA === parent) {\n            return true;\n        }\n        parent = parent.parentNode;\n    }\n\n    return false;\n}\n\nfunction inclusiveAncestor(nodeA, nodeB) {\n    return nodeA === nodeB || ancestor(nodeA, nodeB);\n}\n\n// https://dom.spec.whatwg.org/#interface-parentnode\n\nfunction convertNodesIntoANode(nodes, document) {\n    var node = null;\n\n    for (var i = 0; i < nodes.length; i++) {\n        var item = nodes[i];\n\n        if (typeof item === \"string\") {\n            nodes[i] = document.createTextNode(item);\n        }\n    }\n\n    if (nodes.length === 1) {\n        node = nodes[0];\n    } else {\n        node = document.createDocumentFragment();\n\n        for (var _i = 0; _i < nodes.length; _i++) {\n            node.appendChild(nodes[_i]);\n        }\n    }\n\n    return node;\n}\n\n// https://dom.spec.whatwg.org/#interface-node\n\nfunction clone(node, document, cloneChildren) {\n    // https://dom.spec.whatwg.org/#concept-node-clone\n    // To clone a node, with an optional document and clone children flag, run these steps:\n\n    // 1. If document is not given, let document be nodes node document.\n    document = document || node.ownerDocument;\n\n    // Use a shortcut here\n    // 2. If node is an element, then:\n    // 3. Otherwise, let copy be a node that implements the same interfaces \n    // as node, and fulfills these additional requirements, switching on node:\n    // 4. Set copys node document and document to copy, if copy is a document, \n    // and set copys node document to document otherwise.\n    // 5. Run any cloning steps defined for node in other applicable \n    // specifications and pass copy, node, document and the clone children \n    // flag if set, as parameters.\n    var copy = descriptors.Node.cloneNode.value.call(node, false);\n\n    // 6. If the clone children flag is set, clone all the children of node \n    // and append them to copy, with document as specified and the clone \n    // children flag being set.\n    if (cloneChildren === true) {\n        var childNodes = slice(node.childNodes);\n        for (var i = 0; i < childNodes.length; i++) {\n            append(childNodes[i].cloneNode(true), copy);\n        }\n    }\n\n    return copy;\n}\n\nfunction adopt(node, document) {\n    // https://dom.spec.whatwg.org/#concept-node-adopt\n\n    // 1. Let oldDocument be nodes node document.\n    var oldDocument = node.ownerDocument;\n\n    // 2. If nodes parent is not null, remove node from its parent.\n    var parent = node.parentNode;\n    if (parent != null) {\n        remove(node, parent);\n    }\n\n    // Skip (CustomElements, native)\n    // 3. If document is not the same as oldDocument, run these substeps:\n}\n\n// https://dom.spec.whatwg.org/#interface-documentfragment\n\nfunction hostIncludingInclusiveAncestor(nodeA, nodeB) {\n    if (inclusiveAncestor(nodeA, nodeB)) {\n        return true;\n    }\n\n    var host = root(nodeB).host;\n\n    if (host && hostIncludingInclusiveAncestor(nodeA, host)) {\n        return true;\n    }\n\n    return false;\n}\n\n// https://dom.spec.whatwg.org/#interface-shadowroot\n\nfunction shadowIncludingRoot(node) {\n    var rootNode = root(node);\n    if (isShadowRoot(rootNode)) {\n        rootNode = shadowIncludingRoot(rootNode.host);\n    }\n    return rootNode;\n}\n\nfunction shadowIncludingDescendant(nodeA, nodeB) {\n    do {\n        if (isShadowRoot(nodeA)) {\n            nodeA = nodeA.host;\n        } else {\n            nodeA = nodeA.parentNode;\n        }\n        if (nodeA === nodeB) {\n            return true;\n        }\n    } while (nodeA != null);\n\n    return false;\n}\n\nfunction shadowIncludingInclusiveDescendant(nodeA, nodeB) {\n    return nodeA === nodeB || shadowIncludingDescendant(nodeA, nodeB);\n}\n\nfunction shadowIncludingAncestor(nodeA, nodeB) {\n    return shadowIncludingDescendant(nodeB, nodeA);\n}\n\nfunction shadowIncludingInclusiveAncestor(nodeA, nodeB) {\n    return nodeA === nodeB || shadowIncludingAncestor(nodeA, nodeB);\n}\n\nfunction closedShadowHidden(nodeA, nodeB) {\n    // https://dom.spec.whatwg.org/#concept-closed-shadow-hidden\n    var rootNode = root(nodeA);\n\n    if (!isShadowRoot(rootNode)) {\n        return false;\n    }\n\n    if (shadowIncludingInclusiveAncestor(rootNode, nodeB)) {\n        return false;\n    }\n\n    if (rootNode.mode === 'closed' || closedShadowHidden(rootNode.host, nodeB)) {\n        return true;\n    }\n\n    return false;\n}\n\nfunction retarget(nodeA, nodeB) {\n    // https://dom.spec.whatwg.org/#retarget\n    // To retarget an object A against an object B, repeat these steps \n    // until they return an object:\n\n    var rootNode = void 0;\n    while (rootNode = root(nodeA)) {\n        // 1. If As root is not a shadow root, or As root is a shadow-including \n        // inclusive ancestor of B, then return A.\n        if (!isShadowRoot(rootNode) || shadowIncludingInclusiveAncestor(rootNode, nodeB)) {\n            return nodeA;\n        }\n        // 2. Set A to As roots host.\n        nodeA = rootNode.host;\n    }\n}\n\n// https://dom.spec.whatwg.org/#interface-element\n\nfunction updateSlotName(element, localName, oldValue, value, namespace) {\n    // https://dom.spec.whatwg.org/#slot-name\n    if (element.localName === 'slot') {\n        if (localName === 'name' && namespace == null) {\n            if (value === oldValue) {\n                return;\n            }\n            if (value == null && oldValue === '') {\n                return;\n            }\n            if (value === '' && oldValue == null) {\n                return;\n            }\n            if (value == null || value === '') {\n                descriptors.Element.setAttribute.value.call(element, 'name', '');\n            } else {\n                descriptors.Element.setAttribute.value.call(element, 'name', value);\n            }\n            assignSlotablesForATree(element);\n        }\n    }\n}\n\nfunction updateSlotableName(element, localName, oldValue, value, namespace) {\n    // https://dom.spec.whatwg.org/#slotable-name\n    if (localName === 'slot' && namespace == null) {\n        if (value === oldValue) {\n            return;\n        }\n        if (value == null && oldValue === '') {\n            return;\n        }\n        if (value === '' && oldValue == null) {\n            return;\n        }\n        if (value == null || value === '') {\n            descriptors.Element.setAttribute.value.call(element, 'slot', '');\n        } else {\n            descriptors.Element.setAttribute.value.call(element, 'slot', value);\n        }\n        var elementState = getShadowState(element);\n        if (elementState && elementState.assignedSlot) {\n            assignSlotables(elementState.assignedSlot);\n        }\n        assignASlot(element);\n    }\n}\n\nfunction attributeChangeSteps(element, localName, oldValue, value, namespace) {\n    updateSlotName(element, localName, oldValue, value, namespace);\n    updateSlotableName(element, localName, oldValue, value, namespace);\n}\n\nfunction changeAttribute(attribute, element, value) {\n    // https://dom.spec.whatwg.org/#concept-element-attributes-change\n\n    var name = attribute.localName;\n    var namespace = attribute.namespaceURI;\n    var oldValue = descriptors.Attr.value.get.call(attribute);\n\n    // 1. Queue a mutation record...\n    queueMutationRecord('attributes', element, { name: name, namespace: namespace, oldValue: oldValue });\n\n    // Skip (CustomElements)\n    // 2. If element is custom...\n\n    // 3. Run the attribute change steps...\n    attributeChangeSteps(element, name, oldValue, value, namespace);\n\n    // 4. Set attribute's value...\n    descriptors.Attr.value.set.call(attribute, value);\n}\n\nfunction appendAttribute(attribute, element) {\n    // https://dom.spec.whatwg.org/#concept-element-attributes-append\n\n    var name = attribute.localName;\n    var namespace = attribute.namespaceURI;\n    var oldValue = null;\n\n    // 1. Queue a mutation record...\n    queueMutationRecord('attributes', element, { name: name, namespace: namespace, oldValue: oldValue });\n\n    // Skip (CustomElements)\n    // 2. If element is custom...\n\n    // 3. Run the attribute change steps...\n    attributeChangeSteps(element, name, oldValue, attribute.value, namespace);\n\n    // 4. Append the attribute to the elements attribute list.\n    descriptors.Element.setAttributeNodeNS.value.call(element, attribute);\n\n    // Skip (native)\n    // 5. Set attributes element to element.\n}\n\nfunction removeAttribute(attribute, element) {\n    // https://dom.spec.whatwg.org/#concept-element-attributes-remove\n\n    var name = attribute.localName;\n    var namespace = attribute.namespaceURI;\n    var oldValue = descriptors.Attr.value.get.call(attribute);\n\n    // 1. Queue a mutation record...\n    queueMutationRecord('attributes', element, { name: name, namespace: namespace, oldValue: oldValue });\n\n    // Skip (CustomElements)\n    // 2. If element is custom...\n\n    // 3. Run the attribute change steps...\n    attributeChangeSteps(element, name, oldValue, value, namespace);\n\n    // 4. Remove attribute from the elements attribute list.\n    descriptors.Element.removeAttributeNode.value.call(element, attribute);\n\n    // Skip (native)\n    // 5. Set attributes element to null.\n}\n\nfunction replaceAttribute(oldAttr, newAttr, element) {\n    // Used by 'set an attribute'\n    // https://dom.spec.whatwg.org/#concept-element-attributes-replace\n\n    var name = attribute.localName;\n    var namespace = attribute.namespaceURI;\n    var oldValue = descriptors.Attr.value.get.call(attribute);\n\n    // 1. Queue a mutation record...\n    queueMutationRecord('attributes', element, { name: name, namespace: namespace, oldValue: oldValue });\n\n    // Skip (CustomElements)\n    // 2. If element is custom...\n\n    // 3. Run the attribute change steps...\n    attributeChangeSteps(element, name, oldValue, value, namespace);\n\n    // 4. Replace oldAttr by newAttr in the elements attribute list.\n    descriptors.Element.setAttributeNodeNS.value.call(element, newAttr);\n\n    // Skip (native)\n    // 5. Set oldAttrs element to null.\n    // 6. Set newAttrs element to element.\n}\n\nfunction setAttribute(attr, element) {\n    if (attr.ownerElement != null && attr.ownerElement !== element) {\n        throw makeError('InUseAttributeError');\n    }\n    var attributes = descriptors.Element.attributes.get.call(element);\n    var oldAttr = attributes.getNamedItemNS(attr.namespaceURI, attr.localName);\n    if (oldAttr === attr) {\n        return attr;\n    }\n    if (oldAttr) {\n        replaceAttribute(oldAttr, attr, element);\n    } else {\n        appendAttribute(attr, element);\n    }\n    return oldAttr;\n}\n\nfunction setAttributeValue(element, localName, value, prefix, ns) {\n    prefix = prefix || null;\n    ns = ns || null;\n    var attributes = descriptors.Element.attributes.get.call(element);\n    var attribute = attributes.getNamedItemNS(ns, localName);\n    if (!attribute) {\n        attribute = element.ownerDocument.createAttributeNS(ns, localName);\n        descriptors.Attr.value.set.call(attribute, value);\n        appendAttribute(attribute, element);\n        return;\n    }\n    changeAttribute(attribute, element, value);\n}\n\nfunction removeAttributeByName(qualifiedName, element) {\n    var attributes = descriptors.Element.attributes.get.call(element);\n    var attr = attributes.getNamedItem(qualifiedName);\n    if (attr) {\n        removeAttribute(attr, element);\n    }\n    return attr;\n}\n\nfunction removeAttributeByNamespace(namespace, localName, element) {\n    var attributes = descriptors.Element.attributes.get.call(element);\n    var attr = attributes.getNamedItemNS(namespace, localName);\n    if (attr) {\n        removeAttribute(attr, element);\n    }\n    return attr;\n}\n\nfunction insertAdjacent(element, where, node) {\n    if (!(node instanceof Node)) {\n        throw makeError('TypeError');\n    }\n    var parent = void 0;\n    // https://dom.spec.whatwg.org/#insert-adjacent\n    switch ((where || '').toLowerCase()) {\n        case \"beforebegin\":\n            if (parent = element.parentNode) {\n                return preInsert(node, parent, element);\n            }\n            return null;\n        case \"afterbegin\":\n            return preInsert(node, element, element.firstChild);\n        case \"beforeend\":\n            return preInsert(node, element, null);\n        case \"afterend\":\n            if (parent = element.parentNode) {\n                return preInsert(node, parent, element.nextSibling);\n            }\n            return null;\n        default:\n            throw makeError('SyntaxError');\n    }\n}\n\n// https://dom.spec.whatwg.org/#attr\n\nfunction setExistingAttributeValue(attribute, value) {\n    if (attribute.ownerElement == null) {\n        descriptors.Attr.value.set.call(attribute, value);\n    } else {\n        changeAttribute(attribute, attribute.ownerElement, value);\n    }\n}\n\n// https://dom.spec.whatwg.org/#interface-characterdata\n\nfunction replaceData(node, offset, count, data) {\n    // https://dom.spec.whatwg.org/#concept-cd-replace\n    if (data == null) {\n        data = '';\n    }\n    var dataDescriptor = descriptors.CharacterData.data;\n    var oldValue = dataDescriptor.get.call(node);\n    var length = oldValue.length;\n    if (offset > length) {\n        throw makeError('IndexSizeError');\n    }\n    if (offset + count > length) {\n        count = length - offset;\n    }\n    queueMutationRecord('characterData', node, { oldValue: oldValue });\n    dataDescriptor.set.call(node, oldValue.slice(0, offset) + data + oldValue.slice(offset + count));\n    // TODO: (Range)\n}\n\n// https://dom.spec.whatwg.org/#finding-slots-and-slotables\n\nfunction findASlot(slotable, open) {\n    // https://dom.spec.whatwg.org/#find-a-slot\n    // To find a slot for a given slotable slotable and an optional \n    // open flag (unset unless stated otherwise), run these steps:\n\n    // 1. If slotables parent is null, then return null.\n    var parent = slotable.parentNode;\n    if (!parent) {\n        return null;\n    }\n\n    // 2. Let shadow be slotables parents shadow root.\n    var parentState = getShadowState(parent);\n\n    // 3. If shadow is null, then return null.\n    if (!parentState || !parentState.shadowRoot) {\n        return null;\n    }\n\n    // 4. If the open flag is set and shadows mode is not \"open\", then return null.\n    if (open === true && parentState.shadowRoot.mode !== 'open') {\n        return null;\n    }\n\n    // 5. Return the first slot in shadows tree whose name is slotables name, if any, and null otherwise.\n    if (!parentState.shadowRoot.firstChild) {\n        return null;\n    }\n\n    var name = slotable instanceof Element ? slotable.slot : null;\n\n    return treeOrderRecursiveSelectFirst(parentState.shadowRoot.firstChild, function (node) {\n        return node.localName === 'slot' && node.name === name;\n    });\n}\n\nfunction findSlotables(slot) {\n    // https://dom.spec.whatwg.org/#find-slotables\n    // To find slotables for a given slot slot, run these steps:\n\n    // 1. Let result be an empty list.\n    var result = [];\n\n    // 2. If slots root is not a shadow root, then return result.\n    var slotRoot = root(slot);\n    if (!isShadowRoot(slotRoot)) {\n        return result;\n    }\n\n    // 3. Let host be slots roots host.\n    var host = slotRoot.host;\n\n    // 4. For each slotable child of host, slotable, in tree order, run these substeps:\n    var slotableChildren = slice(host.childNodes);\n    for (var i = 0; i < slotableChildren.length; i++) {\n        var slotable = slotableChildren[i];\n        if (slotable.nodeType === Node.ELEMENT_NODE || slotable.nodeType === Node.TEXT_NODE) {\n            // 1. Let foundSlot be the result of finding a slot given slotable.\n            var foundSlot = findASlot(slotable);\n            // 2. If foundSlot is slot, then append slotable to result.\n            if (foundSlot === slot) {\n                result.push(slotable);\n            }\n        }\n    }\n\n    // 5. Return result.\n    return result;\n}\n\nfunction findFlattenedSlotables(slot) {\n    // https://dom.spec.whatwg.org/#find-flattened-slotables\n    // To find flattened slotables for a given slot slot, run these steps:\n\n    // 1. Let result be an empty list.\n    var result = [];\n\n    // 2. Let slotables be the result of finding slotables given slot.\n    var slotables = findSlotables(slot);\n\n    // 3. If slotables is the empty list, then append each slotable child of slot, in tree order, to slotables.\n    if (slotables.length === 0) {\n        var slotableChildren = slice(slot.childNodes);\n        for (var i = 0; i < slotableChildren.length; i++) {\n            var slotableChild = slotableChildren[i];\n            if (slotableChild.nodeType === Node.ELEMENT_NODE || slotableChild.nodeType === Node.TEXT_NODE) {\n                slotables.push(slotableChild);\n            }\n        }\n    }\n\n    // 4. For each node in slotables, run these substeps:\n    for (var _i2 = 0; _i2 < slotables.length; _i2++) {\n        var node = slotables[_i2];\n        // 1. If node is a slot, run these subsubsteps:\n        if (node.localName === 'slot') {\n            var temporaryResult = findFlattenedSlotables(node);\n            result.splice.apply(result, [result.length, 0].concat(_toConsumableArray(temporaryResult)));\n        } else {\n            result.push(node);\n        }\n    }\n\n    // 5. Return result.\n    return result;\n}\n\n// https://dom.spec.whatwg.org/#assigning-slotables-and-slots\n\nfunction assignSlotables(slot, suppressSignaling) {\n    // https://dom.spec.whatwg.org/#assign-slotables\n    // To assign slotables, for a slot slot with an optional suppress \n    // signaling flag (unset unless stated otherwise), run these steps:\n\n    // 1. Let slotables be the result of finding slotables for slot.\n    var slotables = findSlotables(slot);\n\n    // 2. If suppress signaling flag is unset, and slotables and slots assigned \n    // nodes are not identical, then run signal a slot change for slot.\n    var identical = true;\n    var slotState = getShadowState(slot) || setShadowState(slot, {});\n    var assignedNodes = slotState.assignedNodes || [];\n    for (var i = 0; i < slotables.length; i++) {\n        if (slotables[i] !== assignedNodes[i]) {\n            identical = false;\n            break;\n        }\n    }\n    if (!suppressSignaling && !identical) {\n        signalASlotChange(slot);\n    }\n\n    // 3. Set slots assigned nodes to slotables.\n    slotState.assignedNodes = slotables;\n\n    // 4. For each slotable in slotables, set slotables assigned slot to slot.\n    for (var _i3 = 0; _i3 < slotables.length; _i3++) {\n        var slotable = slotables[_i3];\n        // If it's a slotable it should already have an associated state object.\n        getShadowState(slotable).assignedSlot = slot;\n    }\n\n    // 4a. If we haven't tracked them yet, track the slot's logical children\n    if (!slotState.childNodes) {\n        slotState.childNodes = slice(descriptors.Node.childNodes.get.call(slot));\n    }\n\n    // function call avoiding closure for performance.\n    if (!identical) {\n        setImmediate(renderSlotablesAsync, slot);\n    }\n}\n\nfunction renderSlotablesAsync(slot) {\n    var slotState = getShadowState(slot);\n    var slotables = slotState.assignedNodes;\n\n    // 4b. Clean out the slot\n    var firstChild = void 0;\n    while (firstChild = descriptors.Node.firstChild.get.call(slot)) {\n        descriptors.Node.removeChild.value.call(slot, firstChild);\n    }\n\n    // 4c. Append the slotables, if any\n    for (var i = 0; i < slotables.length; i++) {\n        var slotable = slotables[i];\n        descriptors.Node.appendChild.value.call(slot, slotable);\n    }\n\n    // 4d. Append the fallback content, if no slots\n    if (!slotables.length) {\n        var childNodes = slotState.childNodes;\n        for (var _i4 = 0; _i4 < childNodes.length; _i4++) {\n            descriptors.Node.appendChild.value.call(slot, childNodes[_i4]);\n        }\n    }\n}\n\nfunction assignSlotablesForATree(tree, noSignalSlots) {\n    // https://dom.spec.whatwg.org/#assign-slotables-for-a-tree\n    // To assign slotables for a tree, given a tree tree and an optional set of slots noSignalSlots\n    // (empty unless stated otherwise), run these steps for each slot slot in tree, in tree order:\n    var slots = [];\n\n    if (tree.localName === 'slot') {\n        slots.push(tree);\n    }\n\n    if (tree.hasChildNodes()) {\n        slots.push.apply(slots, _toConsumableArray(tree.querySelectorAll('slot')));\n    }\n\n    for (var i = 0; i < slots.length; i++) {\n        var slot = slots[i];\n\n        // 1. Let suppress signaling flag be set, if slot is in noSignalSlots, and unset otherwise.\n        var suppressSignaling = noSignalSlots && noSignalSlots.indexOf(slot) !== -1;\n\n        // 2. Run assign slotables for slot with suppress signaling flag.\n        assignSlotables(slot, suppressSignaling);\n    }\n}\n\nfunction assignASlot(slotable) {\n    var slot = findASlot(slotable);\n\n    if (slot != null) {\n        assignSlotables(slot);\n    }\n}\n\n// https://dom.spec.whatwg.org/#signaling-slot-change\n\nfunction signalASlotChange(slot) {\n    // https://dom.spec.whatwg.org/#signal-a-slot-change\n    // To signal a slot change, for a slot slot, run these steps:\n\n    // 1. If slot is not in unit of related similar-origin browsing contexts' \n    // signal slot list, append slot to unit of related similar-origin browsing \n    // contexts' signal slot list.\n    if (signalSlotList.indexOf(slot) === -1) {\n        signalSlotList.push(slot);\n    }\n\n    // 2. Queue a mutation observer compound microtask.\n    queueMutationObserverCompoundMicrotask();\n}\n\n// https://dom.spec.whatwg.org/#mutation-algorithms\n\nfunction ensurePreInsertionValidity(node, parent, child) {\n    // https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n    // To ensure pre-insertion validity of a node into a parent before a child, run these steps:\n\n    // Skip (native)\n    // 1. If parent is not a Document, DocumentFragment, or Element node, throw a HierarchyRequestError.\n\n    // 2. If node is a host-including inclusive ancestor of parent, throw a HierarchyRequestError.\n    if (hostIncludingInclusiveAncestor(node, parent)) {\n        throw makeError('HierarchyRequestError');\n    }\n\n    // 3. If child is not null and its parent is not parent, then throw a NotFoundError.\n    if (child != null && child.parentNode !== parent) {\n        throw makeError('NotFoundError');\n    }\n\n    // Skip (native)\n    // 4. If node is not a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction, \n    // or Comment node, throw a HierarchyRequestError.\n    // 5. If either node is a Text node and parent is a document, or node is a doctype \n    // and parent is not a document, throw a HierarchyRequestError.\n    // 6. If parent is a document, and any of the statements below, switched on node, \n    // are true, throw a HierarchyRequestError.\n}\n\nfunction preInsert(node, parent, child) {\n    // https://dom.spec.whatwg.org/#concept-node-pre-insert\n    // To pre-insert a node into a parent before a child, run these steps:\n\n    // 1. Ensure pre-insertion validity of node into parent before child.\n    ensurePreInsertionValidity(node, parent, child);\n\n    // 2. Let reference child be child.\n    var referenceChild = child;\n\n    // 3. If reference child is node, set it to nodes next sibling.\n    referenceChild === node && (referenceChild = node.nextSibling);\n\n    // 4. Adopt node into parents node document.\n    // https://dom.spec.whatwg.org/#concept-node-adopt\n    adopt(node, parent.ownerDocument);\n\n    // 5. Insert node into parent before reference child.\n    // https://dom.spec.whatwg.org/#concept-node-insert\n    insert(node, parent, referenceChild);\n\n    // 6. Return node.\n    return node;\n}\n\nfunction insert(node, parent, child, suppressObservers) {\n    // https://dom.spec.whatwg.org/#concept-node-insert\n    // To insert a node into a parent before a child, with an optional suppress observers flag, run these steps:\n\n    // 1. Let count be the number of children of node if it is a DocumentFragment node, and one otherwise.\n    var count = 1;\n    var nodeChildNodes = void 0;\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n        nodeChildNodes = node.childNodes;\n        count = nodeChildNodes.length;\n    }\n\n    // Skip (Range)\n    // 2. If child is non-null, run these substeps:\n\n    // 3. Let nodes be nodes children if node is a DocumentFragment node, \n    // and a list containing solely node otherwise.\n    var nodes = new Array(count);\n\n    // 4. If node is a DocumentFragment node, remove its children with the suppress observers flag set.\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n        for (var i = 0; i < count; i++) {\n            nodes[i] = nodeChildNodes[i];\n        }\n        for (var _i5 = 0; _i5 < count; _i5++) {\n            remove(nodes[_i5], node, true);\n        }\n        // 5. If node is a DocumentFragment node, queue a mutation record of \"childList\" for node with removedNodes nodes.\n        queueMutationRecord('childList', node, { removedNodes: nodes });\n    } else {\n        nodes[0] = node;\n    }\n\n    // 6. For each node in nodes, in tree order, run these substeps:\n    var parentState = getShadowState(parent);\n    var parentIsShadow = isShadowRoot(parent);\n    var hasShadowStateChildNodes = parentState && parentState.childNodes;\n    for (var _i6 = 0; _i6 < nodes.length; _i6++) {\n        var _node = nodes[_i6];\n        // 1. Insert node into parent before child or at the end of parent if child is null.\n        if (hasShadowStateChildNodes) {\n            if (child) {\n                var childIndex = parentState.childNodes.indexOf(child);\n                parentState.childNodes.splice(childIndex, 0, _node);\n            } else {\n                parentState.childNodes.push(_node);\n            }\n            var nodeState = getShadowState(_node) || setShadowState(_node, {});\n            nodeState.parentNode = parent;\n            // If it's a shadow root, perform physical insert on the host.\n            if (parentIsShadow) {\n                descriptors.Node.insertBefore.value.call(parentState.host, _node, child);\n            }\n        } else {\n            descriptors.Node.insertBefore.value.call(parent, _node, child);\n        }\n\n        // 2. If parent is a shadow host and node is a slotable, then assign a slot for node.\n        if (parentState && parentState.shadowRoot && 'assignedSlot' in _node) {\n            assignASlot(_node);\n        }\n\n        // 3. If parent is a slot whose assigned nodes is the empty list, \n        // then run signal a slot change for parent.\n        if (parent.localName === 'slot' && parent.assignedNodes().length === 0) {\n            // 3a. Physically append the child into the slot.\n            descriptors.Node.appendChild.value.call(parent, _node);\n            // 3b. Do what the spec said\n            signalASlotChange(parent);\n        }\n\n        // 4. Run assign slotables for a tree with nodes tree and a set containing \n        // each inclusive descendant of node that is a slot.\n        var inclusiveSlotDescendants = [];\n        if (_node.localName === 'slot') {\n            inclusiveSlotDescendants.push(_node);\n        }\n        if (_node.hasChildNodes()) {\n            inclusiveSlotDescendants.push.apply(inclusiveSlotDescendants, _toConsumableArray(_node.querySelectorAll('slot')));\n        }\n        assignSlotablesForATree(_node, inclusiveSlotDescendants);\n\n        // Skip (CustomElements)\n        // 5. For each shadow-including inclusive descendant inclusiveDescendant of node, \n        // in shadow-including tree order, run these subsubsteps:\n    }\n\n    // 7. If suppress observers flag is unset, queue a mutation record of \"childList\" for parent \n    // with addedNodes nodes, nextSibling child, and previousSibling childs previous sibling or \n    // parents last child if child is null.\n    if (!suppressObservers) {\n        queueMutationRecord('childList', parent, {\n            addedNodes: nodes,\n            nextSibling: child,\n            previousSibling: child ? child.previousSibling : parent.lastChild\n        });\n    }\n}\n\nfunction append(node, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-append\n    // To append a node to a parent, pre-insert node into parent before null.\n    preInsert(node, parent, null);\n}\n\nfunction replace(child, node, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-replace\n    // To replace a child with node within a parent, run these steps:\n\n    // Skip (native)\n    // 1. If parent is not a Document, DocumentFragment, or Element node, throw a HierarchyRequestError.\n\n    // 2. If node is a host-including inclusive ancestor of parent, throw a HierarchyRequestError.\n    if (hostIncludingInclusiveAncestor(node, parent)) {\n        throw makeError('HierarchyRequestError');\n    }\n\n    // 3. If childs parent is not parent, then throw a NotFoundError.\n    if (child.parentNode !== parent) {\n        throw makeError('NotFoundError');\n    }\n\n    // Skip (native)\n    // 4. If node is not a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction, or Comment node, throw a HierarchyRequestError.\n    // 5. If either node is a Text node and parent is a document, or node is a doctype and parent is not a document, throw a HierarchyRequestError.\n    // 6. If parent is a document, and any of the statements below, switched on node, are true, throw a HierarchyRequestError.\n\n    // 7. Let reference child be childs next sibling.\n    var referenceChild = child.nextSibling;\n\n    // 8. If reference child is node, set it to nodes next sibling.\n    if (referenceChild === node) {\n        referenceChild = node.nextSibling;\n    }\n\n    // 9. Let previousSibling be childs previous sibling.\n    var previousSibling = child.previousSibling;\n\n    // 10. Adopt node into parents node document.\n    adopt(node, parent.ownerDocument);\n\n    // 11. Let removedNodes be the empty list.\n    var removedNodes = [];\n\n    // 12. If childs parent is not null, run these substeps:\n    var childParent = child.parentNode;\n    if (childParent != null) {\n        // 1. Set removedNodes to a list solely containing child.\n        removedNodes.push(child);\n        // 2. Remove child from its parent with the suppress observers flag set.\n        remove(child, parent, true);\n    }\n\n    // 13. Let nodes be nodes children if node is a DocumentFragment node, and a list containing solely node otherwise.\n    var nodes = node instanceof DocumentFragment ? node.childNodes : [node];\n\n    // 14. Insert node into parent before reference child with the suppress observers flag set.\n    insert(node, parent, referenceChild, true);\n\n    // 15. Queue a mutation record of \"childList\" for target parent with addedNodes nodes, \n    // removedNodes removedNodes, nextSibling reference child, and previousSibling previousSibling.\n    queueMutationRecord('childList', parent, {\n        addedNodes: nodes,\n        removedNodes: removedNodes,\n        nextSibling: referenceChild,\n        previousSibling: previousSibling\n    });\n}\n\nfunction replaceAll(node, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-replace-all\n    // To replace all with a node within a parent, run these steps:\n\n    // 1. If node is not null, adopt node into parents node document.\n    if (node != null) {\n        adopt(node, parent.ownerDocument);\n    }\n\n    // 2. Let removedNodes be parents children.\n    var removedNodes = slice(parent.childNodes);\n\n    // 3. Let addedNodes be the empty list if node is null, nodes children if node is a DocumentFragment node, and a list containing node otherwise.\n    var addedNodes = node === null ? [] : node.nodeType === Node.DOCUMENT_FRAGMENT_NODE ? slice(node.childNodes) : [node];\n\n    // 4. Remove all parents children, in tree order, with the suppress observers flag set.\n    for (var i = 0; i < removedNodes.length; i++) {\n        remove(removedNodes[i], parent, true);\n    }\n\n    // 5. If node is not null, insert node into parent before null with the suppress observers flag set.\n    if (node != null) {\n        insert(node, parent, null, true);\n    }\n\n    // 6. Queue a mutation record of \"childList\" for parent with addedNodes addedNodes and removedNodes removedNodes.\n    queueMutationRecord('childList', parent, { addedNodes: addedNodes, removedNodes: removedNodes });\n}\n\nfunction preRemove(child, parent) {\n    // https://dom.spec.whatwg.org/#concept-node-pre-remove\n    // To pre-remove a child from a parent, run these steps:\n\n    // 1. If childs parent is not parent, then throw a NotFoundError.\n    if (child.parentNode !== parent) {\n        throw makeError('NotFoundError');\n    }\n\n    // 2. Remove child from parent.\n    remove(child, parent);\n\n    // 3. Return child.\n    return child;\n}\n\nfunction remove(node, parent, suppressObservers) {\n    // https://dom.spec.whatwg.org/#concept-node-remove\n    // To remove a node from a parent, with an optional suppress observers flag, run these steps:\n\n    // Skip (Range)\n    // 1. Let index be nodes index.\n    // 2. For each range whose start node is an inclusive descendant of node, set its start to (parent, index).\n    // 3. For each range whose end node is an inclusive descendant of node, set its end to (parent, index).\n    // 4. For each range whose start node is parent and start offset is greater than index, decrease its start offset by one.\n    // 5. For each range whose end node is parent and end offset is greater than index, decrease its end offset by one.\n\n    // Skip (NodeIterator)\n    // 6. For each NodeIterator object iterator whose roots node document is nodes node document, \n    // run the NodeIterator pre-removing steps given node and iterator.\n\n    // 7. Let oldPreviousSibling be nodes previous sibling.\n    var oldPreviousSibling = node.previousSibling;\n\n    // 8. Let oldNextSibling be nodes next sibling.\n    var oldNextSibling = node.nextSibling;\n\n    // 9. Remove node from its parent.\n    var nodeState = getShadowState(node);\n    var parentState = getShadowState(parent);\n    if (parentState && parentState.childNodes) {\n        var nodeIndex = parentState.childNodes.indexOf(node);\n        parentState.childNodes.splice(nodeIndex, 1);\n        // Should always have nodeState if we got here.\n        nodeState.parentNode = null;\n        var parentNode = descriptors.Node.parentNode.get.call(node);\n        descriptors.Node.removeChild.value.call(parentNode, node);\n    } else {\n        descriptors.Node.removeChild.value.call(parent, node);\n    }\n\n    // 10. If node is assigned, then run assign slotables for nodes assigned slot.\n    if (nodeState && nodeState.assignedSlot) {\n        assignSlotables(nodeState.assignedSlot);\n        nodeState.assignedSlot = null;\n    }\n\n    // 11. If parent is a slot whose assigned nodes is the empty list,\n    // then run signal a slot change for parent.\n    if (parent.localName === 'slot' && parent.assignedNodes().length === 0) {\n        signalASlotChange(parent);\n    }\n\n    // 12. If node has an inclusive descendant that is a slot, then:\n    var inclusiveSlotDescendants = [];\n    if (node.localName === 'slot') {\n        inclusiveSlotDescendants.push(node);\n    }\n    if (node.hasChildNodes()) {\n        inclusiveSlotDescendants.push.apply(inclusiveSlotDescendants, _toConsumableArray(node.querySelectorAll('slot')));\n    }\n    if (inclusiveSlotDescendants.length) {\n        // 1. Run assign slotables for a tree with parents tree.\n        assignSlotablesForATree(parent);\n        // 2. Run assign slotables for a tree with nodes tree and a \n        // set containing each inclusive descendant of node that is a slot.\n        assignSlotablesForATree(node, inclusiveSlotDescendants);\n    }\n\n    // Skip (other)\n    // 13. Run the removing steps with node and parent.\n\n    // Skip (CustomElements)\n    // 14. If node is custom, then enqueue a custom element callback reaction \n    // with node, callback name \"disconnectedCallback\", and an empty argument list.\n\n    // Skip (CustomElements)\n    // 15. For each shadow-including descendant descendant of node, in \n    // shadow-including tree order, run these substeps:\n\n    // 16. For each inclusive ancestor inclusiveAncestor of parent...\n    var inclusiveAncestor = parent;\n    while (inclusiveAncestor) {\n        // ...if inclusiveAncestor has any registered observers whose options' \n        // subtree is true, then for each such registered observer registered... \n        var ancestorState = getShadowState(inclusiveAncestor);\n        if (ancestorState && ancestorState.observers) {\n            var ancestorObservers = ancestorState.observers;\n            for (var i = 0; i < ancestorObservers.length; i++) {\n                var ancestorObserver = ancestorObservers[i];\n                if (ancestorObserver.options.subtree) {\n                    // ..append a transient registered observer whose observer and options are \n                    // identical to those of registered and source which is registered to nodes \n                    // list of registered observers.\n                    var transientObserver = createTransientObserver(ancestorObserver, node);\n                    mutationObservers.push(transientObserver);\n                }\n            }\n        }\n        inclusiveAncestor = inclusiveAncestor.parentNode;\n    }\n\n    // 17. If suppress observers flag is unset, queue a mutation record of \"childList\" \n    // for parent with removedNodes a list solely containing node, nextSibling \n    // oldNextSibling, and previousSibling oldPreviousSibling.\n    if (!suppressObservers) {\n        queueMutationRecord('childList', parent, {\n            removedNodes: [node],\n            nextSibling: oldNextSibling,\n            previousSibling: oldPreviousSibling\n        });\n    }\n}\n\n// https://dom.spec.whatwg.org/#mutation-observers\n\n// TODO: test everything that queues mutation records\n\nfunction getOrCreateNodeObservers(node) {\n    var nodeState = getShadowState(node) || setShadowState(node, {});\n    var observers = nodeState.observers;\n    return observers ? observers : nodeState.observers = [];\n}\n\nfunction createMutationObserver(callback) {\n    return {\n        callback: callback,\n        queue: [],\n        nodes: [],\n        observe: function observe(node, options) {\n            if (this.nodes.length === 0) {\n                mutationObservers.push(this);\n            }\n            var nodeObservers = getOrCreateNodeObservers(node);\n            nodeObservers.push({ instance: this, options: options });\n            this.nodes.push(node);\n        },\n        disconnect: function disconnect() {\n            var index = mutationObservers.indexOf(this);\n            mutationObservers.splice(index, 1);\n            for (var i = 0; i < this.nodes.length; i++) {\n                var nodeObservers = getOrCreateNodeObservers(this.nodes[i]);\n                for (var j = 0; j < nodeObservers.length; j++) {\n                    if (nodeObservers[j].instance === this) {\n                        nodeObservers.splice(j, 1);\n                        break;\n                    }\n                }\n            }\n            this.nodes = [];\n        }\n    };\n}\n\nfunction createTransientObserver(observer, options, node) {\n    var transientObserver = {\n        observer: observer,\n        callback: observer.callback,\n        options: observer.options,\n        queue: [],\n        node: node,\n        disconnect: function disconnect() {\n            var nodeObservers = getOrCreateNodeObservers(this.node);\n            for (var j = 0; j < nodeObservers.length; j++) {\n                if (nodeObservers[j].instance === this) {\n                    nodeObservers.splice(j, 1);\n                    break;\n                }\n            }\n        }\n    };\n\n    var nodeObservers = getOrCreateNodeObservers(node);\n    nodeObservers.append({ instance: transientObserver, options: options });\n\n    return transientObserver;\n}\n\nvar mutationObserverCompoundMicrotaskQueuedFlag = false;\n\nvar mutationObservers = [];\nvar signalSlotList = [];\nvar theEmptyList = Object.freeze([]);\n\nfunction queueMutationRecord(type, target, details) {\n    // PERF: This is an out-of-spec optimization\n    if (mutationObservers.length === 0) {\n        return;\n    }\n\n    // https://dom.spec.whatwg.org/#queueing-a-mutation-record\n    // 1. Let interested observers be an initially empty set of \n    // MutationObserver objects optionally paired with a string.\n    var interestedObservers = [];\n    var pairedStrings = [];\n    // 2. Let nodes be the inclusive ancestors of target.\n    var nodes = [target];\n    var ancestor = target;\n    while (ancestor = ancestor.parentNode) {\n        nodes.push(ancestor);\n    }\n    // 3. Then, for each node in nodes... \n    for (var i = 0; i < nodes.length; i++) {\n        var node = nodes[i];\n        var nodeState = getShadowState(node);\n        if (!nodeState || !nodeState.observers) {\n            continue;\n        }\n        // ...and then for each registered observer (with registered \n        // observers options as options) in nodes list of registered \n        // observers...\n        for (var j = 0; j < nodeState.observers.length; j++) {\n            var registeredObserver = nodeState.observers[i];\n            var options = registeredObserver.options;\n            // ...run these substeps:\n            // 1. If none of the following are true:\n            if (node != target && !options.subtree) {\n                continue;\n            }\n            if (type === 'attributes') {\n                if (!options.attributes) {\n                    continue;\n                }\n                // if options' attributeFilter is present, and options' attributeFilter\n                // does not contain name or namespace is non-null\n                if (options.attributeFilter && (options.attributeFilter.indexOf(details.name) === -1 || details.namespace != null)) {\n                    continue;\n                }\n            }\n            if (type === 'characterData' && !options.characterData) {\n                continue;\n            }\n            if (type === 'childList' && !options.childList) {\n                continue;\n            }\n            // ...then run the subsubsteps:\n            // 1. If registered observers observer is not in interested observers, \n            // append registered observers observer to interested observers.\n            var observer = registeredObserver.instance;\n            var index = interestedObservers.indexOf(observer);\n            if (index === -1) {\n                index = interestedObservers.length;\n                interestedObservers[index] = observer;\n            }\n            // 2. If either type is \"attributes\" and options attributeOldValue is true, \n            // or type is \"characterData\" and options characterDataOldValue is true, \n            // set the paired string of registered observers observer in interested observers to oldValue.\n            if (type === 'attributes' && options.attributeOldValue || type === 'characterData' && options.characterDataOldValue) {\n                pairedStrings[index] = details.oldValue;\n            }\n        }\n    }\n\n    // PERF: This is an out-of-spec optimization\n    if (interestedObservers.length === 0) {\n        return;\n    }\n\n    // 4. Then, for each observer in interested observers, run these substeps:\n    for (var _i7 = 0; _i7 < interestedObservers.length; _i7++) {\n        var _observer = interestedObservers[_i7];\n        // 1. Let record be a new MutationRecord object with its type set to type and target set to target.\n        var record = {\n            type: type,\n            target: target,\n            attributeName: null,\n            attributeNamespace: null,\n            addedNodes: theEmptyList,\n            removedNodes: theEmptyList,\n            previousSibling: null,\n            nextSibling: null,\n            oldValue: null\n        };\n        // 2. If name and namespace are given, set records attributeName to name, and records attributeNamespace to namespace.\n        if ('name' in details) {\n            record.attributeName = details.name;\n            record.attributeNamespace = details.namespace;\n        }\n        // 3. If addedNodes is given, set records addedNodes to addedNodes.\n        if ('addedNodes' in details) {\n            record.addedNodes = Object.freeze(details.addedNodes);\n        }\n        // 4. If removedNodes is given, set records removedNodes to removedNodes.\n        if ('removedNodes' in details) {\n            record.removedNodes = Object.freeze(details.removedNodes);\n        }\n        // 5. If previousSibling is given, set records previousSibling to previousSibling.\n        if ('previousSibling' in details) {\n            record.previousSibling = details.previousSibling;\n        }\n        // 6. If nextSibling is given, set records nextSibling to nextSibling.\n        if ('nextSibling' in details) {\n            record.nextSibling = details.nextSibling;\n        }\n        // 7. If observer has a paired string, set records oldValue to observers paired string.\n        var pairedString = pairedStrings[_i7];\n        if (pairedString != null) {\n            record.oldValue = pairedString;\n        }\n        // 8. Append record to observers record queue.\n        Object.freeze(record);\n        _observer.queue.push(record);\n\n        // TODO: consider setting prototype to MutationRecord.prototype\n    }\n\n    // 5. Queue a mutation observer compound microtask.\n    queueMutationObserverCompoundMicrotask();\n}\n\nfunction queueMutationObserverCompoundMicrotask() {\n    if (mutationObserverCompoundMicrotaskQueuedFlag) {\n        return;\n    }\n    mutationObserverCompoundMicrotaskQueuedFlag = true;\n    setImmediate(notifyMutationObservers);\n}\n\nfunction notifyMutationObservers() {\n    mutationObserverCompoundMicrotaskQueuedFlag = false;\n    var notifyList = mutationObservers.slice();\n    var signalList = signalSlotList.splice(0, signalSlotList.length);\n    for (var i = 0; i < notifyList.length; i++) {\n        var observer = notifyList[i];\n        var queue = observer.queue.splice(0, observer.queue.length);\n        for (var j = mutationObservers.length - 1; j >= 0; j--) {\n            var transientObserver = mutationObservers[j];\n            if (transientObserver.observer === observer) {\n                mutationObservers.splice(j, 1);\n                transientObserver.disconnect();\n            }\n        }\n        if (queue.length) {\n            try {\n                observer.callback.call(observer.interface, queue, observer.interface);\n            } catch (error) {\n                reportError(error);\n            }\n        }\n    }\n    for (var _i8 = 0; _i8 < signalList.length; _i8++) {\n        var slot = signalList[_i8];\n        var event = slot.ownerDocument.createEvent('event');\n        event.initEvent('slotchange', true, false);\n        try {\n            slot.dispatchEvent(event);\n        } catch (error) {\n            reportError(error);\n        }\n    }\n}"]}